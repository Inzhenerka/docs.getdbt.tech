#### Соображения при обновлении {#upgrade-considerations}

Учитывайте следующие моменты в процессе обновления:

- **Несовместимость манифестов** — <Constant name="fusion" /> обратно совместим и может читать [манифесты](/reference/artifacts/manifest-json) <Constant name="core" />. Однако <Constant name="core" /> не обладает прямой совместимостью и не может читать манифесты Fusion. <Constant name="fusion" /> создаёт манифест версии `v20`, в то время как последняя версия <Constant name="core" /> по‑прежнему создаёт манифест `v12`.

  В результате смешивание манифестов <Constant name="core" /> и <Constant name="fusion" /> между разными окружениями нарушает работу кросс‑окруженческих возможностей. Чтобы этого избежать, используйте `state:modified`, `--defer` и кросс‑окруженческий `dbt docs generate` только после того, как _все_ окружения будут работать на последней версии Fusion. Использование этих возможностей до перевода всех окружений на <Constant name="fusion" /> может приводить к ошибкам и сбоям.

- **Оркестрация с учётом состояния (state-aware orchestration)** — При использовании [state-aware orchestration](/docs/deploy/state-aware-about) dbt не обнаруживает изменения, если таблица или представление были удалены вне dbt, поскольку кэш является уникальным для каждого окружения <Constant name="dbt_platform" />. Это означает, что state-aware orchestration не будет пересобирать соответствующую модель до тех пор, пока не появятся новые данные или не произойдёт изменение кода, который использует эта модель.
  - **Обходные решения:**
    - Использовать кнопку **Clear cache** на странице целевого окружения Environment, чтобы принудительно выполнить полную пересборку (аналогично сбросу), или
    - Временно отключить state-aware orchestration для задания и запустить его повторно.
