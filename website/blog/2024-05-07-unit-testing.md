---
title: "–ú–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ dbt –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π —Ç–µ—Å—Ç–∞–º–∏"
description: "–í dbt v1.8 –º—ã –≤–≤–æ–¥–∏–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –í —ç—Ç–æ–º –±–ª–æ–≥–µ –î–∞–≥ –ø–æ–∫–∞–∂–µ—Ç, –∫–∞–∫ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å"
slug: announcing-unit-testing

authors: [doug_beatty]

tags: [analytics craft]
hide_table_of_contents: false

date: 2024-05-07
is_featured: true
---

–í–∞–º –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å —Å–Ω–∏–ª–∏—Å—å –∫–æ—à–º–∞—Ä—ã –æ "–ø–ª–æ—Ö–∏—Ö –¥–∞–Ω–Ω—ã—Ö"? –ò–ª–∏ —è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π, —É –∫–æ–≥–æ —Ç–∞–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∫–æ—à–º–∞—Ä—ã? üò±

–í–æ—Ç –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö, –∫–æ—Ç–æ—Ä—ã–π –º–Ω–µ –ø—Ä–∏—Å–Ω–∏–ª—Å—è –ø—Ä–æ—à–ª–æ–π –Ω–æ—á—å—é:

–í—Å–µ –Ω–∞—á–∞–ª–æ—Å—å —Å –Ω–æ—á–Ω–æ–π –æ—Ö–æ—Ç—ã –Ω–∞ –±–∞–≥–∏. –£–≥—Ä–æ–∂–∞—é—â–µ–µ –Ω–∞—Å–µ–∫–æ–º–æ–µ –∑–∞–ø–µ—Ä–ª–æ –º–æ–∏—Ö –∫–æ–ª–ª–µ–≥ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ, –∏ –æ–Ω–∏ —É–º–æ–ª—è—é—Ç –º–µ–Ω—è –ø–æ–º–æ—á—å –∏–º –≤—ã–±—Ä–∞—Ç—å—Å—è. –ù–∞–π—Ç–∏ –∫–ª—é—á –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ª–æ–∂–Ω–æ, –∏ –æ–Ω –≤—Å–µ–≥–¥–∞ –∫–∞–∂–µ—Ç—Å—è —á—É—Ç—å-—á—É—Ç—å –Ω–µ–¥–æ—Å—è–≥–∞–µ–º—ã–º. –°—Ç—Ä–µ—Å—Å –æ—â—É—Ç–∏–º, –∫–∞–∫ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –≥—Ä—É–∑ –Ω–∞ –º–æ–µ–π –≥—Ä—É–¥–∏, –ø–æ–∫–∞ —è —Å–æ—Ä–µ–≤–Ω—É—é—Å—å —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –∏—Ö.

–ö–æ–Ω–µ—á–Ω–æ, —è –ø—Ä–æ—Å—ã–ø–∞—é—Å—å, —Ç–∞–∫ –∏ –Ω–µ —Å–ø–∞—Å–∞—è –∏—Ö, –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ —á—É–≤—Å—Ç–≤—É—é –æ–±–ª–µ–≥—á–µ–Ω–∏–µ. –ò —É –º–µ–Ω—è –±—ã–ª–∏ –ø–æ—Ö–æ–∂–∏–µ –∫–æ—à–º–∞—Ä—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –≥–µ—Ä–æ–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–æ–π –∫–æ–¥–∞ –∏–ª–∏ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏.

–•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏: –Ω–∞—á–∏–Ω–∞—è —Å dbt v1.8, –º—ã –≤–≤–æ–¥–∏–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –∫–∞–∂–¥—ã–º –∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏–∑ –º–æ–∏—Ö –∫–æ—à–º–∞—Ä–æ–≤ –æ –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–µ–∂–¥–µ —á–µ–º —É–≥–ª—É–±–∏—Ç—å—Å—è –≤ –¥–µ—Ç–∞–ª–∏, –¥–∞–≤–∞–π—Ç–µ –±—ã—Å—Ç—Ä–æ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –º—ã –∫ —ç—Ç–æ–º—É –ø—Ä–∏—à–ª–∏.

<!--truncate-->

## –ò—Å—Ç–æ—Ä–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –≤ dbt

–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –º–æ–∏—Ö –ø–ª–æ—Ö–∏—Ö —Å–Ω–æ–≤ ‚Äî —ç—Ç–æ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –æ –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –≤–ª–∏—è—é—Ç –Ω–∞ –æ–±—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

–û–¥–Ω–æ–π –∏–∑ –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä–∞—è –º–Ω–µ —Å—Ä–∞–∑—É –ø–æ–Ω—Ä–∞–≤–∏–ª–∞—Å—å, –∫–æ–≥–¥–∞ —è –Ω–∞—á–∞–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å dbt, –±—ã–ª–æ —Ç–æ, —á—Ç–æ –æ–Ω –∏–º–µ–ª –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—Å–µ—Ö –Ω–∞—à–∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ [—Ç–µ—Å—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö](https://docs.getdbt.com/docs/build/data-tests).

–ú–Ω–µ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –æ —Ç–æ–º, —É–Ω–∏–∫–∞–ª–µ–Ω –ª–∏ –º–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á, —è –º–æ–≥ –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –¥–∞–Ω–Ω—ã—Ö dbt, —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —ç—Ç–æ –æ–∂–∏–¥–∞–Ω–∏–µ!

`dbt test` –±—ã—Å—Ç—Ä–æ —Å—Ç–∞–ª –ª—é–±–∏–º–æ–π –∫–æ–º–∞–Ω–¥–æ–π, –ø–æ–∑–≤–æ–ª—è—é—â–µ–π –º–Ω–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ. –ò —ç—Ç–∏ –∂–µ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å –≤ CI –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

–ù–æ —Ö–æ—Ç—è —ç—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –ø–æ–ª–µ–∑–µ–Ω –Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ–º —É—Ä–æ–≤–Ω–µ, –æ–Ω –Ω–µ —Ç–∞–∫ —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. –û–Ω –Ω–µ –±—ã–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –¥–ª—è –º–æ–¥–µ–ª–∏ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –æ–∂–∏–¥–∞–µ–º—ã–º –≤—ã—Ö–æ–¥–æ–º –∏–∑ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –¢–∞–∫–∂–µ –æ–Ω –Ω–µ –±—ã–ª –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –º–æ–¥–µ–ª–∏.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –æ–Ω –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É —Å–ª—É—á–∞—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏ –∑–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∏ –¥—Ä—É–≥–∏—Ö [–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤](https://tidyfirst.substack.com/p/desirable-unit-tests).

## –í–≤–µ–¥–µ–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ dbt

–í–µ—Ä—Å–∏—è dbt 1.8 –∑–Ω–∞–º–µ–Ω—É–µ—Ç —Å–æ–±–æ–π –≤–≤–µ–¥–µ–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º—ã–µ [–º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã](https://en.wikipedia.org/wiki/Unit_testing), –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ CI. –û–Ω–∏ –ø–æ–ª–µ–∑–Ω—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ **—Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö**, —É–≤–µ—Ä–µ–Ω–Ω–æ–µ **—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞** –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π —Ç–µ—Å—Ç–∞–º–∏](https://en.wikipedia.org/wiki/Test-driven_development) –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ **–Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**.

–î–∞–≤–∞–π—Ç–µ —É–≥–ª—É–±–∏–º—Å—è –≤ –¥–µ—Ç–∞–ª–∏...

## –ü—Ä–∏–≤–µ—Ç, –º–∏—Ä –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

<Lightbox src="/img/blog/2024-05-07-unit-testing/hello-world.png" width="50%" title="–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è" />

–ö–ª—é—á–µ–≤–æ–π —Å–ø–æ—Å–æ–±, –∫–æ—Ç–æ—Ä—ã–º —è —Å—Ç—Ä–æ—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ, ‚Äî —ç—Ç–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Å [—Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞](https://en.wikipedia.org/wiki/%22Hello,_World!%22_program). –ö–∞–∫ —Ç–æ–ª—å–∫–æ —è –¥–æ–±–∏–≤–∞—é—Å—å, —á—Ç–æ–±—ã –Ω–∞—á–∞–ª—å–Ω–∞—è –≤–µ—â—å –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∞, —è –º–æ–≥—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–µ –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ —Ä–∞–∑–¥–µ–ª–∞ ["–ø—Ä–∏–º–µ—Ä –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞"](#real-world-example) –¥–ª—è —á–µ–≥–æ-—Ç–æ –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–≥–æ!). –ò—Ç–∞–∫, –≤–æ—Ç —Å—É–ø–µ—Ä –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —è –æ–±—ä—è—Å–Ω—é –±–æ–ª—å—à–µ –æ –∫–∞–∂–¥–æ–º –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –æ —Ç–æ–º, –∫–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Ö –∫ —Å–≤–æ–∏–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Ç–µ—Å—Ç–æ–≤—ã–º —Å–ª—É—á–∞—è–º.

–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ —ç—Ç—É —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å:

```sql
-- models/hello_world.sql

select 'world' as hello
```

–ó–∞—Ç–µ–º –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ—Å—Ç–æ–π –º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç –¥–ª—è —ç—Ç–æ–π –º–æ–¥–µ–ª–∏:

```yaml
# models/_properties.yml

unit_tests:
  - name: test_hello_world

    # –í—Å–µ–≥–¥–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    model: hello_world

    # –ù–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω—É–∂–Ω—ã!
    # –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–æ–¥—É–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –±—É–¥—É—Ç –∏–º–µ—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî —Å–º. —Ä–∞–∑–¥–µ–ª "–ø—Ä–∏–º–µ—Ä –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞" –Ω–∏–∂–µ
    given: []

    # –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç –Ω—É–ª—è –¥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–æ–∫
    expect:
      rows:
        - {hello: world}
```

–ù–∞–∫–æ–Ω–µ—Ü, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–æ–¥–µ–ª—å –∏ –≤—Å–µ –µ–µ —Ç–µ—Å—Ç—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π, –∫–∞–∫ —ç—Ç–æ:

```shell
dbt build --select hello_world
```

<Lightbox src="/img/blog/2024-05-07-unit-testing/unit-test-terminal-output.png" title="–í—ã–≤–æ–¥ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ hello world" />

Voil√†! –ú—ã –≤–∏–¥–∏–º, —á—Ç–æ –æ–¥–∏–Ω –º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç –±—ã–ª –≤—ã–ø–æ–ª–Ω–µ–Ω –∏ –æ–Ω –ø—Ä–æ—à–µ–ª.

## –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç "hello, world", –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å –ø–∏—Å–∞—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ. –ï—Å—Ç—å –¥–≤–µ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –¥–æ–±–∏—Ç—å—Å—è —É—Å–ø–µ—Ö–∞:

1. –ö–∞–∫ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –¥—É–º–∞—Ç—å –æ –º–æ–¥—É–ª—å–Ω–æ–º —Ç–µ—Å—Ç–µ
2. –ö–∞–∫ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ YAML

–í–æ—Ç –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–ª–µ–¥–æ–≤–∞—Ç—å:

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤–∞—à–∏—Ö –º—ã—Å–ª–µ–π

1. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å–≤–æ–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏:** –í –∫–∞–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –≤—ã —Ö–æ—Ç–∏—Ç–µ –±—ã—Ç—å –±–æ–ª–µ–µ —É–≤–µ—Ä–µ–Ω–Ω—ã–º–∏? –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è, –∫–∞–∫–∞—è –º–æ–¥–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π? –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∫—Ä–∞–π–Ω–∏–µ —Å–ª—É—á–∞–∏: –∫–∞–∫–∏–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ç–æ–π –º–æ–¥–µ–ª–∏? –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –≤–∞—à—É *–º–æ–¥–µ–ª—å* –∏ *–∑–∞–¥–∞–Ω–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ*.
2. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:** –ö–∞–∫–æ–≤ –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è? –ë—É–¥—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã. –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –≤–∞—à *–æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç*.

### –ù–∞–ø–∏—Å–∞–Ω–∏–µ –≤–∞—à–∏—Ö –º–æ–¥—É–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

1. **–ù–∞—á–Ω–∏—Ç–µ —Å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã "–º–æ–¥–µ–ª—å-–≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ-–≤—ã—Ö–æ–¥":** –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —ç—Ç–æ–π *–º–æ–¥–µ–ª–∏*, —Å —É—á–µ—Ç–æ–º —ç—Ç–∏—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö *–≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö*, –æ–∂–∏–¥–∞–µ—Ç—Å—è —ç—Ç–æ—Ç *–≤—ã—Ö–æ–¥*.
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–Ω–∞—á–∏–º—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è:** –û–Ω–∏ –¥–æ–ª–∂–Ω—ã —á–µ—Ç–∫–æ –æ–±—ä—è—Å–Ω—è—Ç—å, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ç–µ—Å—Ç, —á—Ç–æ–±—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ –±—É–¥—É—â–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥–ª–∏ –ø–æ–Ω—è—Ç—å –µ–≥–æ —Ü–µ–ª—å.
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ–¥–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–ª—É—á–∞–π:** –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∞–º –±—ã—Ç—å —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–Ω—ã–º–∏ –∏ –ª–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞–µ–º—ã–º–∏.

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:**

- **–î—É–º–∞–π—Ç–µ –æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏:** –ü–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ –æ–±–Ω–æ–≤–∏—Ç—å.
- **–†–µ—Ñ–∞–∫—Ç–æ—Ä—å—Ç–µ —Ç–µ—Å—Ç—ã –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:** –î–µ—Ä–∂–∏—Ç–µ –∏—Ö –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –∫–æ–¥–∞.
- **–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, —É–ø—Ä–∞–≤–ª—è–µ–º—É—é —Ç–µ—Å—Ç–∞–º–∏ (TDD):** –ü–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞, —á—Ç–æ–±—ã –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
- **–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –º–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞.** –°–æ—á–µ—Ç–∞–π—Ç–µ –µ–≥–æ —Å –¥—Ä—É–≥–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ —Ç–µ—Å—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –º–æ–¥–µ–ª–µ–π, –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞.

–î–∞–ª–µ–µ —è –ø–æ–∫–∞–∂—É –≤–∞–º –∫—Ä–∞—Ç–∫–∏–π –ø—Ä–∏–º–µ—Ä –∏–∑ "—Ä–µ–∞–ª—å–Ω–æ–≥–æ" –º–∏—Ä–∞.

## –ü—Ä–∏–º–µ—Ä –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞

–ö–æ–≥–¥–∞ –º—ã –ø—Ä–æ–±–æ–≤–∞–ª–∏ –æ–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ —ç—Ä–≥–æ–Ω–æ–º–∏–∫—É –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ dbt, –º—ã –æ–±—Ä–∞—Ç–∏–ª–∏—Å—å –∫ –Ω–∞—à–µ–º—É –Ω–∞–¥–µ–∂–Ω–æ–º—É [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é Jaffle Shop](https://github.com/dbt-labs/jaffle-shop). –ú—ã –Ω–∞—á–∞–ª–∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å –≤—ã—à–µ—É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É, —á—Ç–æ–±—ã **–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏**, –∞ –∑–∞—Ç–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å **–∫—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**.

–ü–µ—Ä–≤—ã–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏, –±—ã–ª–æ –ø–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–∏—Ç–∞–Ω–∏—è –∏ –Ω–∞–ø–∏—Ç–∫–æ–≤ –≤ –∑–∞–∫–∞–∑–µ. –û–¥–Ω–∏–º –∏–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞–µ–≤ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–∫–∞–∑ –±–µ–∑ –Ω–∞–ø–∏—Ç–∫–æ–≤. –ù–∞—à–∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∑–∞–∫–ª—é—á–∞—é—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã `count_drink_items` –±—ã–ª–æ —Ä–∞–≤–Ω–æ 0 –≤ –º–æ–¥–µ–ª–∏ `order_items_summary`.

–ß—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç, –º—ã –Ω–∞—á–∞–ª–∏ —Å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã "–º–æ–¥–µ–ª—å-–≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ-–≤—ã—Ö–æ–¥" (MIO), –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤—ã—à–µ. –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π **–º–æ–¥–µ–ª—å—é** –±—ã–ª–∞ `orders` —Å **–∑–∞–¥–∞–Ω–Ω—ã–º–∏** –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `order_items` –∏ `stg_orders`. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã **–æ–∂–∏–¥–∞–µ–º**, —á—Ç–æ –Ω–∞—à –≤—ã—Ö–æ–¥ –¥–ª—è order_id 2 –±—É–¥–µ—Ç `count_drink_items: 0`.

–í–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–µ–ª YAML –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:

### YAML –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```yaml
unit_tests:

  - name: test_order_items_count_drink_items_with_zero_drinks
    description: >
      –°—Ü–µ–Ω–∞—Ä–∏–π: –ó–∞–∫–∞–∑ –±–µ–∑ –Ω–∞–ø–∏—Ç–∫–æ–≤
        –ö–æ–≥–¥–∞ —Ç–∞–±–ª–∏—Ü–∞ `order_items_summary` —Å–æ–∑–¥–∞–µ—Ç—Å—è
        –î–∞–Ω–æ –∑–∞–∫–∞–∑ —Å —Ç–æ–ª—å–∫–æ 1 –ø—Ä–æ–¥—É–∫—Ç–æ–º –ø–∏—Ç–∞–Ω–∏—è
        –¢–æ–≥–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–ø–∏—Ç–∫–æ–≤ —Ä–∞–≤–Ω–æ 0

    # –ú–æ–¥–µ–ª—å
    model: order_items_summary

    # –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    given:
      - input: ref('order_items')
        rows:
          - {
              order_id: 76,
              order_item_id: 3,
              is_drink_item: false,
            }
      - input: ref('stg_orders')
        rows:
          - { order_id: 76 }

    # –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    expect:
      rows:
        - {
            order_id: 76,
            count_drink_items: 0,
          }
```

–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –∫–æ–≥–¥–∞ –º—ã –≤–ø–µ—Ä–≤—ã–µ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç, –æ–Ω –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è! üí•

–ù–æ —ç—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–µ –ø–æ—Ç–æ–º—É, —á—Ç–æ –º—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ –º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç ‚Äî —ç—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –º—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –±–∞–≥, –æ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–Ω–µ–µ –Ω–µ –∑–Ω–∞–ª–∏. –ß—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å, –º—ã [–æ—Ç–∫—Ä—ã–ª–∏ PR](https://github.com/dbt-labs/jaffle-shop/pull/12), –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–∏–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±–∞–≥–∞, –∞ —Ç–∞–∫–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞. –•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–≤ –º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç, –º—ã —Å–º–æ–≥–ª–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –±–∞–≥ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞–ª –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π. üòé

–ï—Å–ª–∏ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∫–∞–∫ –≤—ã–≥–ª—è–¥–µ–ª–∞ –º–æ–¥–µ–ª—å –¥–æ –∏ –∫–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –±—ã–ª–∏ –≤–Ω–µ—Å–µ–Ω—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –≤–æ—Ç –æ–Ω–∏:

### –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π SQL –∫–æ–¥

```sql
with

order_items as (

    select * from {{ ref('order_items') }}

)

select
    order_id,

    sum(supply_cost) as order_cost,
    sum(product_price) as order_items_subtotal,
    count(order_item_id) as count_order_items,
    count(
        case
            when is_food_item then 1
            else 0
        end
    ) as count_food_items,
    count(
        case
            when is_drink_item then 1
            else 0
        end
    ) as count_drink_items

from order_items

group by 1
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SQL –∫–æ–¥–∞

```diff
17c17
<     count(
---
>     sum(
23c23
<     count(
---
>     sum(
```

### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è –∏ —Å–æ–≤–µ—Ç—ã

–°–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è [–ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º](https://docs.getdbt.com/docs/build/unit-tests#before-you-begin), –≤–∫–ª—é—á–∞—è –º–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ [–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π](https://docs.getdbt.com/docs/build/unit-tests#unit-testing-incremental-models), [–º–æ–¥–µ–ª–µ–π, –∑–∞–≤–∏—Å—è—â–∏—Ö –æ—Ç —ç—Ñ–µ–º–µ—Ä–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π](https://docs.getdbt.com/docs/build/unit-tests#unit-testing-a-model-that-depend-on-ephemeral-models), –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ `STRUCT` –≤ BigQuery. –í–æ –º–Ω–æ–≥–∏—Ö —Å–ª—É—á–∞—è—Ö, [`sql` —Ñ–æ—Ä–º–∞—Ç](https://docs.getdbt.com/reference/resource-properties/data-formats#sql) –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å —Ä–µ—à–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∫—Ä–∞–π–Ω–∏–µ —Å–ª—É—á–∞–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç.

–ï—â–µ –æ–¥–Ω–∞ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ç–µ–º–∞ ‚Äî –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º, –∫–æ–≥–¥–∞ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã –Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ —Ç–µ–∫—É—â–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞. –ß—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞, –≤—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ, –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é [`overrides`](https://docs.getdbt.com/reference/resource-properties/unit-test-overrides).

–ü—Ä–µ–∂–¥–µ —á–µ–º –º—ã –∑–∞–≤–µ—Ä—à–∏–º, –¥–∞–≤–∞–π—Ç–µ –∫—Ä–∞—Ç–∫–æ —Å—Ä–∞–≤–Ω–∏–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –≤ dbt –∏ –æ–ø—Ä–µ–¥–µ–ª–∏–º —Å–∏—Ç—É–∞—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∫–∞–∂–¥–∞—è –∏–∑ –Ω–∏—Ö –±—É–¥–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π.

## –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã vs. –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –º–æ–¥–µ–ª–µ–π vs. —Ç–µ—Å—Ç—ã –¥–∞–Ω–Ω—ã—Ö

dbt –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö, –≤–∫–ª—é—á–∞—è [–º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã](https://docs.getdbt.com/docs/build/unit-tests), [–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –º–æ–¥–µ–ª–µ–π](https://docs.getdbt.com/docs/collaborate/govern/model-contracts) –∏ [—Ç–µ—Å—Ç—ã –¥–∞–Ω–Ω—ã—Ö](https://docs.getdbt.com/docs/build/data-tests). –í–æ—Ç —Ç–∞–±–ª–∏—Ü–∞, –∫–∞–∫ –æ–Ω–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –∏ –∫–æ–≥–¥–∞ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –∏–∑ –Ω–∏—Ö:

| –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã | –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –º–æ–¥–µ–ª–µ–π | –¢–µ—Å—Ç—ã –¥–∞–Ω–Ω—ã—Ö |
| --- | --- | --- |
| –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É–∑–ª–∞ —Ä–µ—Å—É—Ä—Å–∞ | –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É–∑–ª–∞ —Ä–µ—Å—É—Ä—Å–∞ | –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É–∑–ª–∞ —Ä–µ—Å—É—Ä—Å–∞ |
| –ë–ª–æ–∫–∏—Ä—É—é—Ç –ø–æ–ø—ã—Ç–∫—É –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ—Å—É—Ä—Å | –ë–ª–æ–∫–∏—Ä—É—é—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —É–∑–ª–∞ —Ä–µ—Å—É—Ä—Å–∞ –∏ –Ω–∏–∂–µ—Å—Ç–æ—è—â–∏—Ö —É–∑–ª–æ–≤ | –ë–ª–æ–∫–∏—Ä—É—é—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –Ω–∏–∂–µ—Å—Ç–æ—è—â–∏—Ö —É–∑–ª–æ–≤ |
| –ñ–µ—Å—Ç–∫–∏–µ —Ç–µ—Å—Ç—ã —Ç–æ—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ | –¢–µ—Å—Ç–∏—Ä—É—é—Ç "—Ñ–æ—Ä–º—É" –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö) –¥–ª—è –æ–¥–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö | –ì–∏–±–∫–∏–µ –∏ –º–æ–≥—É—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –Ω–∞–±–æ—Ä–∞–º –¥–∞–Ω–Ω—ã—Ö, –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º –∑–Ω–∞—á–µ–Ω–∏–π –∏ —Ç.–¥. |
| –•–æ—Ä–æ—à–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –æ–∂–∏–¥–∞–µ–º—ã—Ö –≤ –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | –•–æ—Ä–æ—à–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π —Å—Ç–æ–ª–±—Ü–æ–≤ –∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –æ–ø–∏—Å—ã–≤–∞—é—â–∏—Ö "—Ñ–æ—Ä–º—É" –¥–∞–Ω–Ω—ã—Ö, –∏ —É–∫–∞–∑–∞–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ø–µ—Ä–≤–∏—á–Ω—ã–µ –∏ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ | –•–æ—Ä–æ—à–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π, –æ—Ç–ª–∏—á–Ω—ã—Ö –æ—Ç —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π) –∏–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —á—å—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–Ω—ã–º —è—â–∏–∫–æ–º |

## –†–µ–∑—é–º–µ

–¢–µ–ø–µ—Ä—å –≤—ã –≥–æ—Ç–æ–≤—ã —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–∏ –ø–µ—Ä–≤—ã–µ –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —ç—Ç–æ–π –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π, –∫–æ—Ç–æ—Ä–∞—è –ø–æ—è–≤–∏—Ç—Å—è –≤ dbt v1.8! –ú—ã —Å –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∂–¥–µ–º, –∫–æ–≥–¥–∞ –≤—ã –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ —ç—Ç–æ ‚Äî –¥–∞–π—Ç–µ –Ω–∞–º –∑–Ω–∞—Ç—å, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤–∞—Å, –æ—Å—Ç–∞–≤–∏–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ [—ç—Ç–æ–º –æ–±—Å—É–∂–¥–µ–Ω–∏–∏](https://github.com/dbt-labs/dbt-core/discussions/8275) –∏–ª–∏ [–æ—Ç–∫—Ä—ã–≤ –ø—Ä–æ–±–ª–µ–º—É](https://github.com/dbt-labs/dbt-core/issues/new/choose).

–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –≤ –Ω–∞—à–µ–π [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.getdbt.com/docs/build/unit-tests). –ù–∞–¥–µ–µ–º—Å—è, —ç—Ç–æ –¥–∞—Å—Ç –≤–∞–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –≤–∞—à–∏—Ö –∫–æ–Ω–≤–µ–π–µ—Ä–∞—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–∑–≤–æ–ª–∏—Ç —Å–ø–∞—Ç—å —Å–ø–æ–∫–æ–π–Ω–µ–µ –Ω–æ—á—å—é üò¥