---
datatype: version-range | [version-range]
description: "Прочтите это руководство, чтобы понять конфигурацию require-dbt-version в dbt."
default_value: None
---

<File name='dbt_project.yml'>

```yml
require-dbt-version: version-range | [version-range]
```

</File>

## Определение

Вы можете использовать `require-dbt-version`, чтобы ограничить работу проекта только определённым диапазоном версий dbt.

При установке этой конфигурации:
- Если у вас установлены пакеты из [dbt Packages hub](https://hub.getdbt.com/), которые указывают `require_dbt_version`, не совпадающий с вашей версией, выполнение команд dbt приведёт к ошибке.  
- Это помогает мейнтейнерам пакетов (например, [dbt-utils](https://github.com/dbt-labs/dbt-utils)) гарантировать, что версия dbt пользователя совместима с пакетом.  
- Это сигнализирует о [совместимости с <Constant name="fusion_engine"/>](#fusion-compatibility) (`2.0.0` и выше).  
- Это также может помочь всей команде оставаться синхронизированной на одной версии dbt при локальной разработке, чтобы избежать проблем совместимости из‑за изменённого поведения.

Рекомендуется фиксировать основную (major) версию. Подробнее см. [pin to a range](#pin-to-a-range). Если эта конфигурация не указана, проверка версии выполняться не будет.

:::info <Constant name="cloud" /> release tracks

<Snippet path="_config-dbt-version-check" />

:::

## Кавычки в YAML

Эта конфигурация должна быть интерполирована YAML-парсером как строка. Поэтому вы должны заключить значение конфигурации в кавычки, избегая пробелов. Например:
```yml
# ✅ Эти варианты будут работать
require-dbt-version: ">=1.0.0" # Двойные кавычки допустимы
require-dbt-version: '>=1.0.0' # Также допустимы одинарные кавычки

# ❌ Эти варианты не будут работать
require-dbt-version: >=1.0.0 # Без кавычек? Не годится
require-dbt-version: ">= 1.0.0" # Не ставьте пробелы после знаков равенства
```

#### Избегайте неограниченных верхних границ

Мы рекомендуем [задавать как нижнюю, так и верхнюю границу версии](#pin-to-a-range), например `">=1.0.0,<3.0.0"`, чтобы обеспечить стабильность при выходе новых релизов. Мы **не рекомендуем** использовать неограниченное значение `require-dbt-version` (например, `">=1.0.0"`). Без верхнего ограничения проект может сломаться, когда dbt выпустит новую мажорную версию.

## Совместимость с Fusion
Параметр `require-dbt-version` также сигнализирует о том, поддерживает ли проект или пакет [<Constant name="fusion_engine"/>](/docs/fusion) (`2.0.0` и выше).

- Если диапазон версий исключает `2.0.0`, <Constant name="fusion"/> сегодня выдаст предупреждение, а в будущем релизе — ошибку, аналогично поведению <Constant name="core"/>.
- Вы можете [обойти проверки версий](#disabling-version-checks), используя флаг `--no-version-check`.

Подробнее о том, как задавать диапазон версий, см. раздел [pin to a range](#pin-to-a-range).

<Expandable alt_header="Используйте dbt-autofix для обновления dbt‑проектов и пакетов">

[Инструмент `dbt-autofix`](https://github.com/dbt-labs/dbt-autofix) автоматически сканирует ваш dbt‑проект на наличие устаревших конфигураций и обновляет их в соответствии с последними лучшими практиками, а также подготавливает проект к миграции на <Constant name="fusion"/>.

Во время работы `dbt-autofix`:
- Проверяет ваш `packages.yml`, чтобы определить, какие пакеты можно автоматически обновить.
- Ищет пакеты, в которых указано `require-dbt-version: 2.0.0` или выше (что указывает на поддержку <Constant name="fusion"/>).
- Обновляет такие пакеты до минимальной версии, которая поддерживает <Constant name="fusion"/>.

Это гарантирует, что `dbt-autofix` обновляет только те пакеты, которые подтверждённо работают с <Constant name="fusion"/>, и избегает обновления пакетов, которые заведомо несовместимы с <Constant name="fusion"/>.

</Expandable>

## Примеры

Следующие примеры показывают, как использовать `require-dbt-version`:

<!-- no toc -->
- [Указать минимальную версию dbt](#specify-a-minimum-dbt-version) &mdash; используйте оператор <code>>=</code> для задания минимальной границы.
- [Закрепить диапазон версий](#pin-to-a-range) &mdash; используйте список, разделённый запятыми, чтобы задать верхнюю и нижнюю границы.
- [Требовать конкретную версию dbt](#require-a-specific-dbt-version) &mdash; ограничьте запуск проекта только одной точной версией <Constant name="core" />.

### Указать минимальную версию dbt
Используйте оператор `>=`, чтобы задать нижнюю границу версии. Например:

<File name='dbt_project.yml'>

```yml 
require-dbt-version: ">=1.9.0" # project will only work with versions 1.9 and higher.
require-dbt-version: ">=2.0.0" # project will only work with the dbt Fusion engine (v2.0.0 and higher).
```

</File>

Помните, что наличие неограниченного верхнего предела не рекомендуется. Вместо этого ознакомьтесь с примером [pin to a range](#pin-to-a-range), чтобы определить диапазон с нижней и верхней границей и тем самым обеспечить стабильность между релизами.

### Pin to a range
Используйте список, разделённый запятыми, чтобы задать верхнюю и нижнюю границы. Диапазон версий можно определить либо в виде YAML‑списка (с использованием квадратных скобок), либо в виде строки с разделителями-запятыми — оба варианта валидны и работают.

Чтобы указать совместимость с <Constant name="fusion_engine"/>, включите `2.0.0` или более высокую версию в ваш диапазон версий. Оба следующих формата являются допустимыми:

<File name='dbt_project.yml'>

```yaml
require-dbt-version: [">=1.10.0", "<3.0.0"]

# or

require-dbt-version: ">=1.10.0,<3.0.0"
```
</File>

Если ваш диапазон версий исключает 2.0.0 (например, `>=1.6.0,<2.0.0`), <Constant name="fusion"/> сейчас покажет предупреждение, а в будущих релизах это станет ошибкой. Вы можете [обойти проверки версии](#disabling-version-checks), используя флаг `--no-version-check`.

### Требование к конкретной версии dbt

:::info Не рекомендуется
Закрепление за конкретной версией dbt не рекомендуется, так как это ограничивает гибкость проекта и может вызвать проблемы с совместимостью, особенно с пакетами dbt. Рекомендуется [закреплять за основным выпуском](#pin-to-a-range), используя диапазон версий (например, `">=1.0.0", "<2.0.0"`) для более широкой совместимости и получения обновлений.

Хотя вы можете ограничить запуск своего проекта только с конкретной версией <Constant name="core" />, мы не рекомендуем делать это для <Constant name="core" /> версии 1.0.0 и выше.

:::

В следующем примере проект будет работать только с dbt v1.5:

<File name='dbt_project.yml'>

```yml
require-dbt-version: "1.5.0"
```

</File>

## Недопустимые версии dbt

Если версия dbt, используемая для вызова проекта, не соответствует указанной `require-dbt-version` в проекте или _любом_ из включенных пакетов, dbt немедленно завершится с ошибкой:
```
$ dbt compile
Running with dbt=1.5.0
Encountered an error while reading the project:
Runtime Error
  This version of dbt is not supported with the 'my_project' package.
    Installed version of dbt: =1.5.0
    Required version of dbt for 'my_project': ['>=1.6.0', '<2.0.0']
  Check the requirements for the 'my_project' package, or run dbt again with --no-version-check
```

## Отключение проверки версий

Чтобы подавить ошибки из-за несовместимых версий dbt, используйте флаг `--no-version-check` при запуске `dbt run`.
```
$ dbt run --no-version-check
Running with dbt=1.5.0
Found 13 models, 2 tests, 1 archives, 0 analyses, 204 macros, 2 operations....
```

Подробности использования см. в разделе [global configs](/reference/global-configs/version-compatibility).
