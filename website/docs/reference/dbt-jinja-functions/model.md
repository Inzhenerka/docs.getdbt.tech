---
title: "О объекте модели"
sidebar_label: "модель"
id: "модель"
description: "`model` — это объект графа dbt (или узел) для текущей модели."
---

`model` — это объект [графа](/reference/dbt-jinja-functions/graph) dbt (или узел) для текущей модели. Он может быть использован для:
- Доступа к настройкам `config`, например, в post-hook
- Доступа к пути к модели

Например:
```jinja
{% if model.config.materialized == 'view' %}
  {{ log(model.name ~ " is a view.", info=True) }}
{% endif %}
```

Чтобы просмотреть содержимое `model` для данной модели:

<Tabs>

<TabItem value="cli" label="Интерфейс командной строки">

Если вы используете интерфейс командной строки (CLI), используйте [log()](/reference/dbt-jinja-functions/log), чтобы вывести полное содержимое:

```jinja
{{ log(model, info=True) }}
```
  
 </TabItem>
 
 <TabItem value="ide" label="dbt Cloud IDE">
   
 Если вы используете dbt Cloud IDE, скомпилируйте следующее, чтобы вывести полное содержимое: <br /><br />

 ```jinja
{{ model | tojson(indent = 4) }}
```
   
</TabItem>

</Tabs>

## Свойства пакета для моделей микропакетов

Начиная с версии dbt Core v1.9, объект модели включает свойство `batch` (`model.batch`), которое предоставляет информацию о текущем пакете при выполнении модели [инкрементального микропакета](/docs/build/incremental-microbatch). Это свойство заполняется только во время выполнения пакета модели микропакета.

Следующая таблица описывает свойства объекта `batch`. Обратите внимание, что dbt добавляет это свойство к объектам `model` и `batch`.

| Свойство | Описание | Пример |  
| -------- | ----------- | ------- |
| `id` | Уникальный идентификатор для пакета в контексте модели микропакета. | `model.batch.id` |
| `event_time_start` | Время начала фильтра [`event_time`](/reference/resource-configs/event-time) пакета (включительно). | `model.batch.event_time_start` |
| `event_time_end` | Время окончания фильтра `event_time` пакета (исключительно). | `model.batch.event_time_end` |

### Примечания по использованию

`model.batch` доступен только во время выполнения пакета модели микропакета. Вне выполнения микропакета `model.batch` равно `None`, и его под-свойства недоступны.

#### Пример защиты доступа к свойствам пакета

Рекомендуется всегда проверять, заполнено ли `model.batch`, перед доступом к его свойствам. Для этого используйте оператор `if` для безопасного доступа к свойствам `batch`:

```jinja
{% if model.batch %}
  {{ log(model.batch.id) }}  # Логируем ID пакета #
  {{ log(model.batch.event_time_start) }}  # Логируем время начала пакета #
  {{ log(model.batch.event_time_end) }}  # Логируем время окончания пакета #
{% endif %}
```

В этом примере оператор `if model.batch` гарантирует, что код выполняется только во время выполнения пакета. `log()` используется для вывода свойств `batch` для отладки.

#### Пример логирования деталей пакета

Это практический пример того, как вы можете использовать `model.batch` в модели микропакета для логирования деталей пакета для `batch.id`:

```jinja
{% if model.batch %}
  {{ log("Обработка пакета с ID: " ~ model.batch.id, info=True) }}
  {{ log("Диапазон времени события пакета: " ~ model.batch.event_time_start ~ " до " ~ model.batch.event_time_end, info=True) }}
{% endif %}
```
В этом примере оператор `if model.batch` гарантирует, что код выполняется только во время выполнения пакета. `log()` используется для вывода свойств `batch` для отладки.

## Структура модели и JSON-схема

Чтобы просмотреть структуру `models` и их определения:
- Обратитесь к [dbt JSON Schema](https://schemas.getdbt.com/) для описания и использования артефактов, сгенерированных dbt
- Выберите соответствующую версию манифеста в разделе **Manifest**. Например, если вы используете dbt v1.8, выберите Manifest v12
  * Номер версии `manifest.json` связан с (но не _равен_ ) вашей версии dbt, поэтому вы _должны_ использовать правильную версию `manifest.json` для вашей версии dbt. Чтобы найти правильную версию `manifest.json`, обратитесь к [Manifest](/reference/artifacts/manifest-json) и выберите версию dbt в верхней навигации (например, `v1.5`). Это поможет вам выяснить, какие теги связаны с вашей моделью.
- Затем перейдите в `nodes` --> Выберите Дополнительные свойства --> `CompiledModelNode` или просмотрите другие определения/объекты.

Используйте следующую таблицу, чтобы понять, как работает схема версий и сопоставить версию манифеста с версией dbt:

import ManifestVersions from '/snippets/_manifest-versions.md';

<ManifestVersions />

## Связанные документы

- [dbt JSON Schema](https://schemas.getdbt.com/)