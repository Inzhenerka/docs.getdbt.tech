---
title: "Конфигурации DWH Microsoft Fabric"
id: "fabric-configs"
---

## Материализации

Эфемерная материализация не поддерживается из-за того, что T-SQL не поддерживает вложенные CTE. Она может работать в некоторых случаях, когда вы работаете с очень простыми эфемерными моделями.

### Таблицы

Таблицы являются материализацией по умолчанию.

<Tabs
defaultValue="model"
values={[
{label: 'Конфигурация модели', value: 'model'},
{label: 'Конфигурация проекта', value: 'project'}
]}
>

<TabItem value="model">

<File name="models/example.sql">

```sql
{{
    config(
        materialized='table'
        )
}}

select *
from ...
```

</File>

</TabItem>

<TabItem value="project">

<File name="dbt_project.yml">

```yaml
models:
  your_project_name:
    materialized: view
    staging:
      materialized: table
```

</File>

</TabItem>

</Tabs>

## Семена

По умолчанию `dbt-fabric` будет пытаться вставить файлы семян партиями по 400 строк. Если это превышает лимит параметра 2100 в Microsoft Fabric Synapse Data Warehouse, адаптер автоматически ограничит значение до максимально безопасного.

Чтобы установить другое значение по умолчанию для семян, вы можете задать переменную `max_batch_size` в конфигурации вашего проекта.

<File name="dbt_project.yml">

```yaml
vars:
  max_batch_size: 200 # Любое целое число, меньшее или равное 2100, подойдет.
```

</File>

## Снимки

Столбцы в исходных таблицах не могут иметь никаких ограничений. Если, например, какой-либо столбец имеет ограничение `NOT NULL`, будет выдана ошибка.

## Индексы

Индексы не поддерживаются Microsoft Fabric Synapse Data Warehouse. Любые индексы, указанные в конфигурации, игнорируются адаптером.

## Предоставление прав с автоматическимProvisioning

Предоставление прав с автоматическим provisioning в настоящее время не поддерживается Microsoft Fabric Synapse Data Warehouse.

## Инкрементальные загрузки

Fabric поддерживает как стратегию `delete+insert`, так и стратегию `append`.

Если уникальный ключ не предоставлен, будет использоваться стратегия `append` по умолчанию.

## Разрешения

Идентичность Microsoft Entra (пользователь или сервисный принципал) должна быть администратором рабочей области Fabric, чтобы работать на уровне базы данных в настоящее время. Тонкая настройка контроля доступа будет внедрена в будущем.

## Макросы между базами данных

В настоящее время не поддерживаются.

## dbt-utils

В настоящее время не поддерживаются. Однако dbt-fabric предлагает некоторые утилиты макросов. Пожалуйста, ознакомьтесь с [utils macros](https://github.com/microsoft/dbt-fabric/tree/main/dbt/include/fabric/macros/utils).