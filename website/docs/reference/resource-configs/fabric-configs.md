---
title: "Конфигурации Microsoft Fabric DWH"
id: "fabric-configs"
---

## Материализации

Эфемерная материализация не поддерживается, так как T-SQL не поддерживает вложенные CTE. Она может работать в некоторых случаях, когда вы работаете с очень простыми эфемерными моделями.

### Таблицы

Таблицы являются материализацией по умолчанию.

<Tabs
defaultValue="model"
values={[
{label: 'Конфигурация модели', value: 'model'},
{label: 'Конфигурация проекта', value: 'project'}
]}
>

<TabItem value="model">

<File name="models/example.sql">

```sql
{{
    config(
        materialized='table'
        )
}}

select *
from ...
```

</File>

</TabItem>

<TabItem value="project">

<File name="dbt_project.yml">

```yaml
models:
  your_project_name:
    materialized: view
    staging:
      materialized: table
```

</File>

</TabItem>

</Tabs>

## Seeds

По умолчанию `dbt-fabric` будет пытаться вставлять файлы seed пакетами по 400 строк. Если это превышает лимит параметров Microsoft Fabric Synapse Data Warehouse в 2100, адаптер автоматически ограничит до максимально безопасного значения.

Чтобы установить другое значение по умолчанию для seed, вы можете задать переменную `max_batch_size` в конфигурации вашего проекта.

<File name="dbt_project.yml">

```yaml
vars:
  max_batch_size: 200 # Любое целое число, меньшее или равное 2100, подойдет.
```

</File>

## Снимки

Столбцы в исходных таблицах не могут иметь никаких ограничений. Если, например, любой столбец имеет ограничение `NOT NULL`, будет выдана ошибка.

## Индексы

Индексы не поддерживаются Microsoft Fabric Synapse Data Warehouse. Любые индексы, указанные в конфигурации, игнорируются адаптером.

## Права с автоматическим предоставлением

Права с автоматическим предоставлением в настоящее время не поддерживаются Microsoft Fabric Synapse Data Warehouse.

## Инкрементальные обновления

Fabric поддерживает как стратегию `delete+insert`, так и `append`.

Если уникальный ключ не предоставлен, по умолчанию будет использоваться стратегия `append`.

## Разрешения

Идентификатор Microsoft Entra (пользователь или служебный принципал) должен быть администратором рабочей области Fabric, чтобы работать на уровне базы данных в настоящее время. В будущем будет внедрен более детальный контроль доступа.

## Макросы для работы с несколькими базами данных

В настоящее время не поддерживается.

## dbt-utils

В настоящее время не поддерживается. Однако dbt-fabric предлагает некоторые утилиты макросов. Пожалуйста, ознакомьтесь с [утилитами макросов](https://github.com/microsoft/dbt-fabric/tree/main/dbt/include/fabric/macros/utils).