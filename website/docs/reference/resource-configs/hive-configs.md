---
title: "Конфигурации Apache Hive"
description: "Конфигурации Apache Hive - Прочитайте это подробное руководство, чтобы узнать о конфигурациях в dbt."
id: "hive-configs"
---

## Конфигурирование таблиц

При материализации модели как `table` вы можете включить несколько дополнительных конфигураций, специфичных для плагина dbt-hive, помимо стандартных [конфигураций модели](/reference/model-configs).

| Опция         | Описание                                                                 | Обязательно?            | Пример                   |
|---------------|--------------------------------------------------------------------------|------------------------|--------------------------|
| partition_by  | Разделение по столбцу, обычно создается директория для каждого раздела  | Нет                    | partition_by=['name']    |
| clustered_by  | Вторичное деление разделенного столбца                                   | Нет                    | clustered_by=['age']     |
| file_format   | Формат хранения таблицы, см. https://cwiki.apache.org/confluence/display/Hive/FileFormats для поддерживаемых форматов | Нет                    | file_format='PARQUET'    |
| location      | Место хранения, обычно путь hdfs                                         | Нет                    | LOCATION='/user/etl/destination' |
| comment       | Комментарий для таблицы                                                  | Нет                    | comment='это самая чистая модель' |

## Инкрементальные модели

Поддерживаемые режимы для инкрементальной модели:
 - **`append`** (по умолчанию): Вставка новых записей без обновления или перезаписи существующих данных.
 - **`insert_overwrite`**: Для новых записей вставка данных. При использовании вместе с клаузой раздела обновление данных для измененных записей и вставка данных для новых записей.

## Пример: Использование опции конфигурации partition_by

<File name='hive_partition_by.sql'>

```sql
{{
    config(
        materialized='table',
        unique_key='id',
        partition_by=['city'],
    )
}}

with source_data as (
     select 1 as id, "Name 1" as name, "City 1" as city,
     union all
     select 2 as id, "Name 2" as name, "City 2" as city,
     union all
     select 3 as id, "Name 3" as name, "City 2" as city,
     union all
     select 4 as id, "Name 4" as name, "City 1" as city,
)

select * from source_data
```

</File>

В приведенном выше примере создается образец таблицы с использованием partition_by и других опций конфигурации. Важно отметить, что при использовании опции partition_by запрос select всегда должен иметь имя столбца, использованного в опции partition_by, в качестве последнего, как видно по имени столбца ```city``` в приведенном выше запросе. Если клаузу partition_by не совпадает с последним столбцом в операторе select, Hive выдаст ошибку при попытке создать модель.