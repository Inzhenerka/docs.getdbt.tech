---
title: "О состоянии в dbt"
description: "Операции dbt являются stateless и идемпотентными, но артефакты позволяют реализовывать возможности, основанные на состоянии, такие как slim CI и deferral."
pagination_next: "reference/node-selection/configure-state"
---

Одно из ключевых базовых предположений dbt заключается в том, что его операции должны быть **stateless** и **<Term id="idempotent" />**. Иными словами, не имеет значения, сколько раз модель запускалась ранее или запускалась ли она вообще. Неважно, запустите вы её один раз или тысячу раз. При одних и тех же исходных данных вы можете ожидать одинаковый результат трансформации. Отдельному запуску dbt не нужно «знать» о _каких-либо других_ запусках; ему достаточно информации о коде проекта и об объектах в вашей базе данных в том виде, в каком они существуют _прямо сейчас_.

При этом dbt всё же хранит «состояние» — детализированное представление ресурсов проекта (также называемых узлами), объектов базы данных и результатов выполнения в конкретный момент времени — в виде своих [артефактов](/docs/deploy/artifacts). При желании dbt может использовать эти артефакты для выполнения некоторых операций. Важно, что сами операции при этом остаются stateless и <Term id="idempotent" />: при одном и том же manifest и одних и тех же исходных данных dbt всегда будет производить одинаковый результат трансформации.

dbt может использовать артефакты от предыдущего запуска, если путь к ним передан через флаг `--state`. Это является обязательным условием для:
- [Селектора `state`](/reference/node-selection/methods#state), с помощью которого dbt может определять новые или изменённые ресурсы, сравнивая код текущего проекта с manifest состояния.
- [Deferring](/reference/node-selection/defer) в другое окружение, когда dbt может определить вышестоящие, невыбранные ресурсы, отсутствующие в текущем окружении, и «отложить» ссылки на них, указывая на окружение, заданное manifest состояния.
- [Команды `dbt clone`](/reference/commands/clone), с помощью которой dbt может клонировать узлы на основе их расположения в manifest, переданном через флаг `--state`.

В совокупности селектор [`state`](/reference/node-selection/methods#state) и механизм deferral позволяют реализовать подход ["slim CI"](/best-practices/best-practice-workflows#run-only-modified-models-to-test-changes-slim-ci). В будущих релизах мы планируем добавить больше возможностей, которые смогут использовать артефакты, переданные через флаг `--state`.

## Связанные материалы
- [Настройка выбора по состоянию](/reference/node-selection/configure-state)
- [Ограничения сравнения состояний](/reference/node-selection/state-comparison-caveats)
