---
title: "Плитка состояния данных"
id: "data-tile"
sidebar_label: "Плитка состояния данных"
description: "Встраивайте плитки состояния данных в свои панели управления, чтобы выделить сигналы доверия для потребителей данных."
image: /img/docs/collaborate/dbt-explorer/data-tile-pass.jpg
---

С помощью плиток состояния данных заинтересованные стороны получат мгновенное подтверждение того, являются ли данные, которые они просматривают, устаревшими или ухудшенными. Этот сигнал доверия позволяет командам немедленно вернуться в Explorer, чтобы увидеть больше деталей и исследовать проблемы.

Плитка состояния данных:

- Выделяет сигналы доверия для потребителей данных.
- Глубоко связывает вас с dbt Explorer, где вы можете подробнее изучить проблемы с данными на предыдущих этапах.
- Предоставляет более полную информацию и упрощает отладку.
- Обновляет существующие [плитки на основе заданий](#job-based-data-health).

Плитки состояния данных полагаются на [экспозиции](/docs/build/exposures), чтобы отображать сигналы доверия в ваших панелях управления. Когда вы настраиваете экспозиции в своем проекте dbt, вы явно определяете, как конкретные выходные данные — такие как панели управления или отчеты — зависят от ваших моделей данных.

<DocCarousel slidesPerView={1}>
<Lightbox src="/img/docs/collaborate/dbt-explorer/data-tile-pass.jpg" width="60%" title="Пример успешной плитки состояния данных в вашей панели управления." />
<Lightbox src="/img/docs/collaborate/dbt-explorer/data-tiles.png" width="60%" title="Встраивайте плитки состояния данных в свои панели управления, чтобы выделить сигналы доверия для потребителей данных." />
</DocCarousel>

## Предварительные требования

- У вас должен быть аккаунт dbt Cloud на [Командном или Корпоративном плане](https://www.getdbt.com/pricing/).
- Вы должны быть администратором аккаунта, чтобы настроить [токены службы](/docs/dbt-cloud-apis/service-tokens#permissions-for-service-account-tokens).
- У вас должны быть [права на разработку](/docs/cloud/manage-access/seats-and-users).
- Настройте [экспозиции](/docs/build/exposures) в вашем проекте и включите [свежесть источников](/docs/deploy/source-freshness) в задании, которое генерирует эту экспозицию.

## Просмотр экспозиции в dbt Explorer

Сначала убедитесь, что вы включили [свежесть источников](/docs/deploy/source-freshness) в задании, которое генерирует эту экспозицию.

1. Перейдите в dbt Explorer, нажав на ссылку **Исследовать** в навигации.
2. На главной странице **Обзор** перейдите в левую навигацию.
3. Вкладка **Ресурсы**, нажмите на **Экспозиции**, чтобы просмотреть список [экспозиций](/docs/build/exposures).
4. Выберите экспозицию панели управления и перейдите на вкладку **Общие**, чтобы просмотреть информацию о состоянии данных.
5. На этой вкладке вы увидите:   
   - Название экспозиции. 
   - Статус состояния данных: Свежесть данных прошла, Качество данных прошло, Данные могут быть устаревшими, Качество данных ухудшено.
   - Тип ресурса (модель, источник и т.д.).
   - Статус панели управления: Ошибка, Успех, Устаревшие.
   - Вы также можете увидеть время последней проверки, время последней проверки и продолжительность последней проверки.
6. Вы можете нажать кнопку **Открыть панель управления** в правом верхнем углу, чтобы немедленно просмотреть это в вашем аналитическом инструменте.

<Lightbox src="/img/docs/collaborate/dbt-explorer/data-tile-exposures.jpg" width="95%" title="Просмотр экспозиции в dbt Explorer." />

## Встраивание в вашу панель управления

После того как вы перешли к экспозиции в dbt Explorer, вам нужно будет настроить свою плитку состояния данных и [токен службы](/docs/dbt-cloud-apis/service-tokens). Вы можете встроить плитку состояния данных в любой аналитический инструмент, который поддерживает встраивание URL или iFrame.

Следуйте этим шагам, чтобы настроить свою плитку состояния данных:

1. Перейдите в **Настройки аккаунта** в dbt Cloud.
2. Выберите **API токены** в левой боковой панели, а затем **Токены службы**.
3. Нажмите на **Создать токен службы** и дайте ему имя.
4. Выберите разрешение [**Только метаданные**](/docs/dbt-cloud-apis/service-tokens). Этот токен будет использоваться для встраивания плитки в вашу панель управления на следующих этапах.
<Lightbox src="/img/docs/collaborate/dbt-explorer/data-tile-setup.jpg" width="95%" title="Настройте свою плитку состояния панели и токен службы для встраивания плитки состояния данных" />

5. Скопируйте токен **Только метаданные** и сохраните его в безопасном месте. Вам понадобится этот токен на следующих этапах.
6. Вернитесь в dbt Explorer и выберите экспозицию.
7. В разделе **Состояние данных** разверните переключатель для получения инструкций по встраиванию плитки экспозиции (если вы администратор аккаунта с правами на разработку). 
8. В развернутом переключателе вы увидите текстовое поле, куда вы можете вставить свой **Токен только метаданных**.
<Lightbox src="/img/docs/collaborate/dbt-explorer/data-tile-example.jpg" width="85%" title="Разверните переключатель, чтобы встроить плитку состояния данных в вашу панель управления." />

9. После того как вы вставили свой токен, вы можете выбрать либо **URL**, либо **iFrame**, в зависимости от того, что вам нужно добавить в вашу панель управления.

Если ваш аналитический инструмент поддерживает iFrames, вы можете встроить плитку панели управления в него. 

### Примеры
Следующие примеры показывают, как встроить плитку состояния данных в Tableau и PowerBI.

<Tabs>

<TabItem value="powerbi" label="Пример PowerBI">

Вы можете встроить плитку состояния данных iFrame в PowerBI, используя PowerBI Pro Online, Fabric PowerBI или PowerBI Desktop. 

<Lightbox src="/img/docs/collaborate/dbt-explorer/power-bi.png" width="80%" title="Встраивание iFrame плитки состояния данных в PowerBI"/>

Следуйте этим шагам, чтобы встроить плитку состояния данных в PowerBI:

1. Создайте панель управления в PowerBI и подключитесь к своей базе данных, чтобы получить данные.
2. Создайте новую меру PowerBI, щелкнув правой кнопкой мыши на вашем **Данных**, **Дополнительные параметры**, а затем **Новая мера**.
<Lightbox src="/img/docs/collaborate/dbt-explorer/power-bi-measure.png" width="80%" title="Создание новой меры PowerBI."/>

3. Перейдите в dbt Explorer, выберите экспозицию и разверните переключатель [**Встроить состояние данных в вашу панель управления**](/docs/collaborate/data-tile#embed-in-your-dashboard). 
4. Перейдите на вкладку **iFrame** и скопируйте код iFrame. Убедитесь, что токен только метаданных уже настроен.
5. В PowerBI вставьте скопированный код iFrame в окно расчета вашей меры. Код iFrame должен выглядеть так:

    ```html
        Website =
        "<iframe src='https://1234.metadata.ACCESS_URL/exposure-tile?uniqueId=exposure.EXPOSURE_NAME&environmentType=staging&environmentId=123456789&token=YOUR_METADATA_TOKEN' title='Плитка состояния экспозиции' height='400'></iframe>"
    ```

    <Lightbox src="/img/docs/collaborate/dbt-explorer/power-bi-measure-tools.png" width="90%" title="Вкладка 'Инструменты мер' замените ваши значения на код iFrame."/>

6. PowerBI Desktop по умолчанию не поддерживает рендеринг HTML, поэтому вам нужно установить компонент HTML из магазина визуализаций PowerBI.
7. Для этого перейдите в **Создание визуализаций**, а затем **Получить больше визуализаций**.
8. Войдите в свою учетную запись PowerBI.
9. Существует несколько сторонних HTML визуализаций. Тот, который был протестирован для этого руководства, — [HTML content](https://appsource.microsoft.com/en-us/product/power-bi-visuals/WA200001930?tab=Overview). Установите его, но имейте в виду, что это сторонний плагин, не созданный и не поддерживаемый dbt Labs.
10. Перетащите метрику с кодом iFrame в виджет HTML-контента в PowerBI. Теперь должна отображаться ваша плитка состояния данных.

<Lightbox src="/img/docs/collaborate/dbt-explorer/power-bi-final.png" width="80%" title="Перетащите метрику с кодом iFrame в виджет HTML-контента в PowerBI. Теперь должна отображаться ваша плитка состояния данных."/>

*Смотрите [это руководство](https://www.youtube.com/watch?v=SUm9Hnq8Th8) для получения дополнительной информации о встраивании веб-сайта в ваш отчет Power BI.*

</TabItem>

<TabItem value="tableau" label="Пример Tableau">

Следуйте этим шагам, чтобы встроить плитку состояния данных в Tableau:

<Lightbox src="/img/docs/collaborate/dbt-explorer/tableau-example.png" width="80%" title="Встраивание iFrame плитки состояния данных в Tableau"/>

1. Создайте панель управления в Tableau и подключитесь к своей базе данных, чтобы получить данные.
2. Убедитесь, что вы скопировали URL или фрагмент iFrame, доступный в разделе **Состояние данных** dbt Explorer, под переключателем **Встроить состояние данных в вашу панель управления**.
3. Вставьте объект **Веб-страница**.
4. Вставьте URL и нажмите **Ок**.

    ```html
    https://metadata.ACCESS_URL/exposure-tile?uniqueId=exposure.EXPOSURE_NAME&environmentType=production&environmentId=220370&token=<YOUR_METADATA_TOKEN>
    ```

    *Примечание: замените заполнители на ваши реальные значения.*
5. Теперь вы должны увидеть плитку состояния данных, встроенную в вашу панель управления Tableau.

</TabItem>

<TabItem value="sigma" label="Пример Sigma">

Следуйте этим шагам, чтобы встроить плитку состояния данных в Sigma:

<Lightbox src="/img/docs/collaborate/dbt-explorer/sigma-example.jpg" width="90%" title="Встраивание плитки состояния данных в Sigma"/>

1. Создайте панель управления в Sigma и подключитесь к своей базе данных, чтобы получить данные.
2. Убедитесь, что вы скопировали URL или фрагмент iFrame, доступный в разделе **Состояние данных** dbt Explorer, под переключателем **Встроить состояние данных в вашу панель управления**.
3. Добавьте новый встроенный элемент пользовательского интерфейса в вашу рабочую книгу Sigma в следующем формате:

    ```html
    https://metadata.ACCESS_URL/exposure-tile?uniqueId=exposure.EXPOSURE_NAME&environmentType=production&environmentId=ENV_ID_NUMBER&token=<YOUR_METADATA_TOKEN>
    ```

    *Примечание: замените заполнители на ваши реальные значения.*
4. Теперь вы должны увидеть плитку состояния данных, встроенную в вашу панель управления Sigma.

</TabItem>

</Tabs>

## Плитка состояния данных на основе заданий <Lifecycle status="Legacy"/>

Стандартный опыт — это [плитка состояния данных на основе окружения](#view-exposure-in-dbt-explorer) с dbt Explorer.

Этот раздел предназначен для устаревших плиток состояния данных на основе заданий. Если вы используете обновленную плитку экспозиции на основе окружения, обратитесь к предыдущему разделу. Разверните следующее, чтобы узнать больше о старой плитке состояния данных на основе заданий.

<Expandable alt_header="Плитка состояния данных на основе заданий">  
В dbt Cloud [Discovery API](/docs/dbt-cloud-apis/discovery-api) может управлять плитками состояния панелей, которые основаны на заданиях. Плитка состояния панели размещается на панели (в частности: в любом месте, где вы можете встроить iFrame), чтобы дать представление о качестве и свежести данных, поступающих в эту панель. Это делается в dbt [экспозициях](/docs/build/exposures).

#### Функциональность
Плитка состояния панели выглядит следующим образом:

<Lightbox src="/img/docs/dbt-cloud/using-dbt-cloud/dashboard-status-tiles/passing-tile.jpeg"/>

Проверка свежести данных не проходит, если какие-либо источники, поступающие в экспозицию, устарели. Проверка качества данных не проходит, если какие-либо тесты dbt не прошли. Состояние ошибки может выглядеть так:

<Lightbox src="/img/docs/dbt-cloud/using-dbt-cloud/dashboard-status-tiles/failing-tile.jpeg"/>

Нажатие на **посмотреть детали** из плитки состояния панели перенаправляет вас на целевую страницу, где вы можете узнать больше о конкретных источниках, моделях и тестах, поступающих в эту экспозицию.

#### Настройка
Сначала убедитесь, что вы включили [свежесть источников](/docs/deploy/source-freshness) в задании, которое генерирует эту экспозицию.

Чтобы настроить свою плитку состояния панели, вам нужно:

1. **Токен только метаданных.** Вы можете узнать, как настроить токен только метаданных [здесь](/docs/dbt-cloud-apis/service-tokens).

2. **Название экспозиции.** Вы можете узнать больше о том, как настроить экспозиции [здесь](/docs/build/exposures).

3. **ID задания.** Помните, что вы можете выбрать свой ID задания непосредственно из URL, когда смотрите на соответствующее задание в dbt Cloud.

Вы можете вставить эти три поля в следующий iFrame, а затем встроить его **в любом месте, где вы можете встроить iFrame**:

```
<iframe src='https://metadata.YOUR_ACCESS_URL/exposure-tile?name=<exposure_name>&jobId=<job_id>&token=<metadata_only_token>' title='Плитка состояния экспозиции'></iframe>
```

:::tip Замените `YOUR_ACCESS_URL` на URL доступа вашего региона и плана

dbt Cloud размещен в нескольких регионах мира, и у каждого региона есть свой URL доступа. Замените `YOUR_ACCESS_URL` на соответствующий [URL доступа](/docs/cloud/about-cloud/access-regions-ip-addresses) для вашего региона и плана. Например, если ваш аккаунт размещен в регионе EMEA, вы должны использовать следующий код iFrame:

```
<iframe src='https://metadata.emea.dbt.com/exposure-tile?name=<exposure_name>&jobId=<job_id>&token=<metadata_only_token>' title='Плитка состояния экспозиции'></iframe>
```

:::

#### Встраивание с BI инструментами
Плитка состояния панели должна работать везде, где вы можете встроить iFrame. Но ниже приведены некоторые тактические советы о том, как интегрироваться с общими BI инструментами.

<Tabs>
<TabItem value="mode" label="Mode">

#### Mode
Mode позволяет вам напрямую [редактировать HTML](https://mode.com/help/articles/report-layout-and-presentation/#html-editor) любого данного отчета, где вы можете встроить iFrame.

Обратите внимание, что Mode также создал свою собственную [интеграцию](https://mode.com/get-dbt/) с API Discovery dbt Cloud!
</TabItem>

<TabItem value="looker" label="Looker">

#### Looker
Looker не позволяет вам напрямую встраивать HTML и вместо этого требует создания [пользовательской визуализации](https://docs.looker.com/admin-options/platform/visualizations). Один из способов сделать это для администраторов:
- Добавьте [новую визуализацию](https://fishtown.looker.com/admin/visualizations) на странице визуализаций для администраторов Looker. Вы можете использовать [этот URL](https://metadata.cloud.getdbt.com/static/looker-viz.js) для настройки визуализации Looker, управляемой iFrame. Она будет выглядеть так:

<Lightbox src="/img/docs/dbt-cloud/using-dbt-cloud/dashboard-status-tiles/looker-visualization.jpeg" title="Настройка визуализации Looker, управляемой iFrame" />

- После того как вы настроите свою пользовательскую визуализацию, вы можете использовать ее на любой панели управления! Вы можете настроить ее с именем экспозиции, ID задания и токеном, относящимися к этой панели.

<Lightbox src="/img/docs/dbt-cloud/using-dbt-cloud/dashboard-status-tiles/custom-looker.jpeg " width="60%"/>
</TabItem>

<TabItem value="tableau" label="Tableau">

#### Tableau
Tableau не требует от вас встраивания iFrame. Вам нужно только использовать объект веб-страницы на вашей панели управления Tableau и URL в следующем формате:

```
https://metadata.YOUR_ACCESS_URL/exposure-tile?name=<exposure_name>&jobId=<job_id>&token=<metadata_only_token>
```

:::tip Замените `YOUR_ACCESS_URL` на URL доступа вашего региона и плана

dbt Cloud размещен в нескольких регионах мира, и у каждого региона есть свой URL доступа. Замените `YOUR_ACCESS_URL` на соответствующий [URL доступа](/docs/cloud/about-cloud/access-regions-ip-addresses) для вашего региона и плана. Например, если ваш аккаунт размещен в регионе Северной Америки, вы должны использовать следующий код:

```
https://metadata.cloud.getdbt.com/exposure-tile?name=<exposure_name>&jobId=<job_id>&token=<metadata_only_token>

```
:::

<Lightbox src="/img/docs/dbt-cloud/using-dbt-cloud/dashboard-status-tiles/tableau-object.png" width="60%" title="Настройка Tableau с использованием объекта веб-страницы." />
</TabItem>

<TabItem value="sigma" label="Sigma">

#### Sigma

Sigma не требует от вас встраивания iFrame. Добавьте новый встроенный элемент пользовательского интерфейса в вашу рабочую книгу Sigma в следующем формате:

```
https://metadata.YOUR_ACCESS_URL/exposure-tile?name=<exposure_name>&jobId=<job_id>&token=<metadata_only_token>
```

:::tip Замените `YOUR_ACCESS_URL` на URL доступа вашего региона и плана

dbt Cloud размещен в нескольких регионах мира, и у каждого региона есть свой URL доступа. Замените `YOUR_ACCESS_URL` на соответствующий [URL доступа](/docs/cloud/about-cloud/access-regions-ip-addresses) для вашего региона и плана. Например, если ваш аккаунт размещен в регионе APAC, вы должны использовать следующий код:

```
https://metadata.au.dbt.com/exposure-tile?name=<exposure_name>&jobId=<job_id>&token=<metadata_only_token>

```
:::

<Lightbox src="/img/docs/dbt-cloud/using-dbt-cloud/dashboard-status-tiles/sigma-embed.gif" width="60%" title="Настройка Sigma с использованием встроенного элемента пользовательского интерфейса." />
</TabItem>
</Tabs>

</Expandable>