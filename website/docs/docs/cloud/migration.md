---
title: "Контрольный список миграции в многосекционную архитектуру"
id: migration
sidebar_label: "Контрольный список миграции в многосекционную архитектуру"
description: "Подготовка к миграции аккаунта на архитектуру AWS с использованием секций."
pagination_next: null
pagination_prev: null
---

dbt Labs находится в процессе внедрения новой ячеечной (cell-based) архитектуры для <Constant name="cloud" />. Эта архитектура закладывает основу развития <Constant name="cloud" /> на годы вперёд и обеспечивает повышенную надёжность, производительность и согласованность для пользователей <Constant name="cloud" />.

Мы планируем миграции по аккаунтам. Когда мы будем готовы мигрировать ваш аккаунт, вы получите уведомление в виде баннера или электронного письма с датой миграции. Если вы не получили это уведомление, то на данный момент вам не нужно предпринимать никаких действий. dbt Labs предоставит вам информацию о вашей миграции с соответствующим предварительным уведомлением, если это будет применимо к вашему аккаунту.

Ваш аккаунт будет автоматически мигрирован в назначенную дату или после нее. Однако, если вы используете определенные функции, вам необходимо предпринять действия до этой даты, чтобы избежать сбоев в работе сервиса.

## Рекомендуемые действия

:::info Перенос вашей миграции

Если вы используете тариф <Constant name="cloud" /> Enterprise, вы можете отложить миграцию аккаунта на срок до 45 дней. Чтобы перенести дату миграции, перейдите в **Account Settings** → **Migration guide**.

Для получения помощи свяжитесь с командой поддержки dbt по адресу [support@getdbt.com](mailto:support@getdbt.com).
:::

Мы настоятельно рекомендуем вам выполнить следующие действия:

- Убедитесь, что все ожидающие приглашения пользователей приняты, либо зафиксируйте список непринятых приглашений. Ожидающие приглашения пользователей могут быть аннулированы в процессе миграции. После завершения миграции вы сможете повторно отправить приглашения пользователям.
- Зафиксируйте (commit) все несохранённые изменения в [<Constant name="cloud_ide" />](/docs/cloud/studio-ide/develop-in-studio). Несохранённые изменения могут быть потеряны во время миграции.
- Экспортируйте и скачайте [audit logs](/docs/cloud/manage-access/audit-log) старше 90 дней, так как после завершения миграции они будут недоступны в <Constant name="cloud" />. Логи старше 90 дней, которые всё ещё находятся в пределах срока хранения данных, не удаляются, однако для их восстановления вам потребуется обратиться в службу поддержки клиентов dbt Labs.

## Обязательные действия

Эти действия необходимы, чтобы предотвратить потерю пользователями доступа к <Constant name="cloud" />:

- Если вы ещё не сделали этого, завершите [миграцию Auth0 для SSO](/docs/cloud/manage-access/auth0-migration) до запланированной даты миграции, чтобы избежать перебоев в работе сервиса. Если вы уже завершили миграцию Auth0, конфигурации SSO вашего аккаунта будут перенесены автоматически.  
- Обновите списки разрешённых IP-адресов. После миграции <Constant name="cloud" /> будет использовать новые IP-адреса для доступа к вашему хранилищу данных. Разрешите входящий трафик со всех следующих новых IP-адресов в вашем файрволе и включите их во все необходимые права доступа в базе данных:

    - `52.3.77.232`
    - `3.214.191.130`
    - `34.233.79.135`

Сохраняйте старые IP-адреса <Constant name="cloud" /> в списке до завершения миграции.

## Хранение данных, связанных с запусками

Все запуски, доступные в <Constant name="cloud"/>, будут перенесены вместе с вашей учетной записью. Это включает метаданные о запуске, такие как его статус, время начала выполнения и продолжительность. Однако отдельные шаги, связанные с запуском, перенесены не будут. Поэтому команды <Constant name="dbt"/>, выполнявшиеся в рамках запуска, а также их логи и файлы артефактов, не будут доступны в <Constant name="cloud"/> после миграции.

[Discovery API](/docs/dbt-cloud-apis/discovery-api) будет содержать подмножество данных после миграции вашей учетной записи. Метаданные, созданные за последние 7 дней, будут перенесены вместе с учетной записью. При запросе [объекта job](/docs/dbt-cloud-apis/discovery-schema-job) после миграции будет доступно не более 20 запусков.

## После миграции

Выполните все эти действия, чтобы ваши ресурсы и задания <Constant name="cloud" /> продолжили работать без перебоев.

Используйте один из следующих двух вариантов URL для входа:

- `us1.dbt.com.` Если раньше вы входили в систему, используя имя пользователя и пароль на `cloud.getdbt.com`, теперь вместо этого следует планировать вход через `us1.dbt.com`. Исходный URL по‑прежнему будет работать, но при входе вам потребуется перейти по ссылке для перенаправления. Если у вас настроен единый вход (single sign-on, SSO), вы будете использовать уникальный URL, указанный в настройках SSO‑аккаунта (например, `ACCOUNT_PREFIX.us1.dbt.com`).
- `ACCOUNT_PREFIX.us1.dbt.com`: Уникальный URL, предназначенный именно для вашего аккаунта. Если вы состоите в нескольких аккаунтах, у каждого из них будет свой уникальный URL, при условии что они были перенесены в многоячеечную (multi-cell) архитектуру.

Подробнее см. в разделе [access, regions, and IP addresses](/docs/cloud/about-cloud/access-regions-ip-addresses).

Удалите следующие старые IP-адреса из вашего файрвола и предоставлений доступа к базе данных:

- `52.45.144.63`
- `54.81.134.249`
- `52.22.161.231`