---
title: "Импорт проекта по URL git"
id: "import-a-project-by-git-url"
pagination_next: "docs/cloud/git/connect-github"
pagination_prev: null
---

В dbt Cloud вы можете импортировать git-репозиторий из любого действительного URL git, который указывает на проект dbt. При этом есть несколько важных моментов, которые следует учитывать.

## Протоколы Git
Вы должны использовать версию вашего git URL в формате `git@...` или `ssh:..`, а не в формате `https://...`. dbt Cloud использует протокол SSH для клонирования репозиториев, поэтому dbt Cloud не сможет клонировать репозитории, предоставленные с использованием протокола HTTP.

## Управление ключами развертывания

После импорта проекта по URL Git dbt Cloud сгенерирует ключ развертывания для вашего репозитория. Чтобы найти ключ развертывания в dbt Cloud:

1. В dbt Cloud нажмите на имя вашей учетной записи в левом меню и выберите **Настройки учетной записи**.
2. Перейдите в **Проекты** и выберите проект.
3. Нажмите на ссылку **Репозиторий**, чтобы перейти на страницу деталей репозитория.
4. Скопируйте ключ в разделе **Ключ развертывания**.

Вы должны предоставить этот ключ развертывания в конфигурации репозитория вашего Git-хоста. Настройте этот ключ развертывания, чтобы разрешить *доступ на чтение и запись* к указанным репозиториям.

**Примечание**: Каждый проект dbt Cloud будет генерировать уникальный ключ развертывания при подключении к репозиторию, даже если два проекта подключены к одному и тому же репозиторию. Вам нужно будет предоставить оба ключа развертывания вашему Git-поставщику.

## GitHub

:::info Используете GitHub?

Если вы используете GitHub, вы можете импортировать свой репозиторий напрямую с помощью [GitHub приложения dbt Cloud](/docs/cloud/git/connect-github). Подключение вашего репозитория через GitHub приложение [включает непрерывную интеграцию](/docs/deploy/continuous-integration).

:::

- Чтобы добавить ключ развертывания в учетную запись GitHub, перейдите на вкладку Ключи развертывания на странице настроек вашего репозитория GitHub.
- После того как вы введете имя для ключа развертывания и вставите сгенерированный dbt Cloud ключ, обязательно отметьте флажок **Разрешить доступ на запись**.
- После добавления этого ключа dbt Cloud сможет читать и записывать файлы в вашем проекте dbt.
- Смотрите [Добавление ключа развертывания в GitHub](https://github.blog/2015-06-16-read-only-deploy-keys/)

<Lightbox src="/img/docs/dbt-cloud/cloud-configuring-dbt-cloud/cd7351c-Screen_Shot_2019-10-16_at_1.09.41_PM.png" title="Настройка ключа развертывания GitHub"/>

## GitLab

:::info Используете GitLab?

Если вы используете GitLab, вы можете импортировать свой репозиторий напрямую с помощью [GitLab приложения dbt Cloud](/docs/cloud/git/connect-gitlab). Подключение вашего репозитория через GitLab приложение [включает непрерывную интеграцию](/docs/deploy/continuous-integration).

:::

- Чтобы добавить ключ развертывания в учетную запись GitLab, перейдите на вкладку [SSH ключи](https://gitlab.com/profile/keys) на странице настроек пользователя вашей учетной записи GitLab.
- Затем вставьте ключ развертывания, сгенерированный dbt Cloud для вашего репозитория.
- После сохранения этого SSH ключа dbt Cloud сможет читать и записывать файлы в вашем репозитории GitLab.
- Смотрите [Добавление ключа развертывания только для чтения в GitLab](https://docs.gitlab.com/ee/user/project/deploy_keys/)

<Lightbox src="/img/docs/dbt-cloud/cloud-configuring-dbt-cloud/f3ea88d-Screen_Shot_2019-10-16_at_4.45.50_PM.png" title="Настройка SSH ключа GitLab"/>

## BitBucket

Используйте ключ развертывания, чтобы импортировать ваш репозиторий BitBucket в dbt Cloud. Для обеспечения безопасности учетной записи используйте сервисную учетную запись для добавления ключа развертывания BitBucket и поддержания соединения между вашим репозиторием BitBucket и dbt Cloud.

BitBucket связывает каждое изменение в репозитории и другие действия Git (такие как открытие запроса на слияние) с электронной почтой, связанной с учетной записью пользователя Bitbucket.

Чтобы добавить ключ развертывания в учетную запись BitBucket:

- Перейдите на вкладку **SSH ключи** на странице Личных настроек вашей учетной записи BitBucket.
- Затем нажмите кнопку **Добавить ключ** и вставьте ключ развертывания, сгенерированный dbt Cloud для вашего репозитория.
- После сохранения этого SSH ключа dbt Cloud сможет читать и записывать файлы в вашем репозитории BitBucket.

<Lightbox src="/img/docs/dbt-cloud/cloud-configuring-dbt-cloud/bitbucket-ssh-key.png" title="Настройка SSH ключа BitBucket"/>

## AWS CodeCommit

dbt Cloud может работать с проектами dbt, размещенными на AWS CodeCommit, но для этого потребуется выполнить несколько дополнительных шагов по сравнению с GitHub или другими поставщиками git. Этот гид поможет вам подключить ваш проект dbt, размещенный на CodeCommit, к dbt Cloud.

#### Шаг 1: Создайте пользователя AWS для dbt Cloud
- Чтобы предоставить dbt Cloud доступ к вашему репозиторию, сначала вам нужно создать пользователя AWS IAM для dbt Cloud.
- Войдите в консоль AWS и перейдите в раздел IAM.
- Нажмите **Добавить пользователя** и создайте нового пользователя, введя уникальное и значимое имя пользователя.
- Пользователю потребуется доступ на клонирование вашего репозитория. Вы можете сделать это, добавив разрешение **AWSCodeCommitPowerUser** во время настройки.

#### Шаг 2: Импортируйте ваш репозиторий по имени
- Откройте консоль AWS CodeCommit и выберите ваш репозиторий.
- Скопируйте SSH URL с этой страницы.
- Затем перейдите на страницу **Новый репозиторий** в dbt Cloud.
- Выберите вкладку **Git Clone** и вставьте SSH URL, который вы скопировали из консоли.
- На вновь созданной странице деталей репозитория вы увидите поле **Ключ развертывания**.
- Скопируйте содержимое этого поля, так как оно вам понадобится для [Шага 3](#step-3-grant-dbt-cloud-aws-user-access).

**Примечание:** Сгенерированный dbt Cloud открытый ключ — это единственный ключ, который будет работать на следующем шаге. Любой другой ключ, сгенерированный вне dbt Cloud, не будет работать.

#### Шаг 3: Предоставьте доступ пользователю dbt Cloud AWS
- Откройте вновь созданного пользователя dbt Cloud в консоли AWS IAM.
- Выберите вкладку **Учетные данные безопасности**, затем нажмите **Загрузить SSH открытый ключ**.
- Вставьте содержимое поля **Открытый ключ** со страницы репозитория dbt Cloud.
- После создания ключа вы увидите его **ID SSH ключа**.
- **[Свяжитесь с поддержкой dbt](mailto:support@getdbt.com)** и поделитесь этим полем, чтобы команда поддержки dbt могла завершить процесс настройки для вас.

#### Шаг 4: Укажите пользовательскую ветку в dbt Cloud

CodeCommit использует `master` в качестве своей ветки по умолчанию, и для инициализации вашего проекта вам нужно будет указать ветку `master` как [пользовательскую ветку](/faqs/Environments/custom-branch-settings#development) в dbt Cloud.

- Перейдите в **Развертывание** -> **Среды** -> **Разработка**.
- Выберите **Настройки** -> **Редактировать** и в разделе **Общие настройки** отметьте флажок **По умолчанию использовать пользовательскую ветку**.
- Укажите пользовательскую ветку как `master` и нажмите **Сохранить**.

#### Шаг 5: Настройте URL шаблона запроса на слияние (по желанию)

Чтобы предотвратить прямое слияние изменений кода в ветку по умолчанию, настройте [URL шаблона PR](/docs/collaborate/git/pr-template) на странице **Детали репозитория** для вашего проекта. После настройки dbt Cloud предложит пользователям открыть новый PR после коммита и синхронизации изменений кода в ветке в IDE, прежде чем сливать какие-либо изменения в ветку по умолчанию.

- Перейдите в **Настройки учетной записи** -> **Проекты** -> Выберите проект.
- Нажмите на ссылку репозитория в разделе **Репозиторий**.
- На странице **Детали репозитория** нажмите **Редактировать** в правом нижнем углу.
  <Lightbox src="/img/docs/collaborate/repo-details.jpg" width="80%" title="Настройка шаблона PR на странице 'Детали репозитория'." />
- В поле **URL запроса на слияние** укажите URL в соответствии с предложенным [форматом шаблона PR](/docs/collaborate/git/pr-template#aws-codecommit).
- Замените `<repo>` на имя вашего репозитория (обратите внимание, что оно чувствительно к регистру). В следующем примере имя репозитория — `New_Repo`.
  <Lightbox src="/img/docs/collaborate/pr-template-example.jpg" width="60%" title="В поле URL запроса на слияние пример, имя репозитория — 'New_Repo'." />
- После заполнения поля **URL запроса на слияние** нажмите **Сохранить**.

🎉 **Вы готовы!** Как только поддержка dbt обработает ваш запрос и вы установите свою пользовательскую ветку, ваш проект будет готов к выполнению dbt запусков в dbt Cloud.

## Azure DevOps
:::info Используете Azure DevOps?

Если вы используете Azure DevOps и находитесь на корпоративном плане dbt Cloud, вы можете импортировать свой репозиторий напрямую с помощью [Интеграции Azure DevOps dbt Cloud](/docs/cloud/git/connect-azure-devops). Подключение вашего репозитория через приложение Azure DevOps [включает непрерывную интеграцию](/docs/deploy/continuous-integration).

:::

1. Чтобы добавить ключ развертывания в учетную запись Azure DevOps, перейдите на страницу **SSH открытых ключей** в настройках пользователя вашей учетной записи Azure DevOps или учетной записи сервисного пользователя.

2. Мы рекомендуем использовать выделенного сервисного пользователя для интеграции, чтобы гарантировать, что соединение dbt Cloud с Azure DevOps не будет прервано изменениями в разрешениях пользователя.

<Lightbox src="/img/docs/dbt-cloud/cloud-configuring-dbt-cloud/52bfdaa-Screen_Shot_2020-03-09_at_4.13.20_PM.png" title="Перейдите на страницу настроек 'SSH открытых ключей'" />

3. Затем нажмите кнопку **+ Новый ключ**, чтобы создать новый SSH ключ для репозитория.

<Lightbox src="/img/docs/dbt-cloud/cloud-configuring-dbt-cloud/6d8e980-Screen_Shot_2020-03-09_at_4.13.27_PM.png" title="Нажмите кнопку '+ Новый ключ', чтобы создать новый SSH ключ для репозитория." />

4. Выберите описательное имя для ключа, а затем вставьте ключ развертывания, сгенерированный dbt Cloud для вашего репозитория.

5. После сохранения этого SSH ключа dbt Cloud сможет читать и записывать файлы в вашем репозитории Azure DevOps.

<Lightbox src="/img/docs/dbt-cloud/cloud-configuring-dbt-cloud/d19f199-Screen_Shot_2020-03-09_at_4.13.50_PM.png" title="Введите и сохраните открытый ключ, сгенерированный для вашего репозитория dbt Cloud" />

## Другие поставщики git

Не видите своего поставщика git здесь? Пожалуйста, [свяжитесь с поддержкой dbt](mailto:support@getdbt.com) - мы рады помочь вам настроить dbt Cloud с любым поддерживаемым поставщиком git.

## Ограниченная интеграция
Некоторые функции dbt Cloud требуют тесной интеграции с вашим git-хостом, например, обновление запросов на слияние GitHub с состояниями выполнения dbt Cloud. Импорт вашего проекта по URL предотвращает использование этих функций. Как только вы предоставите dbt Cloud доступ к вашему репозиторию, вы сможете продолжить настройку вашего проекта, добавив соединение и создав и запустив свою первую задачу dbt Cloud.

## Часто задаваемые вопросы
<FAQ path="Git/gitignore"/>
<FAQ path="Git/git-migration"/>