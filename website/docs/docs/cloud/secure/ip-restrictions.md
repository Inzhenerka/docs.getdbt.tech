---
title: "Настройка ограничений по IP"
id: ip-restrictions
description: "Настройка ограничений по IP для предотвращения доступа внешнего трафика к вашей среде dbt Cloud"
sidebar_label: "Ограничения по IP"
pagination_next: "docs/cloud/secure/about-privatelink"
pagination_prev: null
---

import SetUpPages from '/snippets/_available-tiers-iprestrictions.md';

<SetUpPages features={'/snippets/_available-tiers-iprestrictions.md'}/>

Ограничения по IP помогают контролировать, какие IP-адреса могут подключаться к dbt Cloud. Ограничения по IP позволяют клиентам dbt Cloud соответствовать требованиям безопасности и соблюдения, разрешая подключение только одобренным IP-адресам к их среде dbt Cloud. Эта функция поддерживается во всех регионах Северной Америки, Европы и Азиатско-Тихоокеанского региона, но если у вас есть вопросы о доступности, свяжитесь с нами.

## Настройка ограничений по IP

Чтобы настроить ограничения по IP, перейдите в **Настройки аккаунта** → **Ограничения по IP**. Ограничения по IP предоставляют два метода для определения, какие IP могут получить доступ к dbt Cloud: список разрешенных и список заблокированных. IP-адреса в списке разрешенных могут получить доступ к dbt Cloud, а IP-адреса в списке заблокированных будут заблокированы. Ограничения по IP могут использоваться для различных случаев, включая:

- Разрешение только трафика корпоративного VPN и блокировка всего остального трафика
- Блокировка IP-адресов, отмеченных службой безопасности
- Разрешение только VPN-трафика, но с исключением для IP-адресов подрядчиков

Ограничения по IP будут блокировать все сервисные токены, пользовательские запросы, выполненные через API (с использованием личного пользовательского токена), и интерфейс, если они поступают с заблокированных IP-адресов.

Для любых интеграций с системами контроля версий (Github, Gitlab, ADO и т.д.), входящих в dbt Cloud, убедитесь, что их IP-адреса добавлены в список разрешенных.

### Разрешение IP

Чтобы добавить IP в список разрешенных, на странице **Ограничения по IP**:

1. Нажмите **Изменить**
2. Нажмите **Добавить правило**
3. Добавьте имя и описание для правила
    - Например, Диапазон CIDR корпоративного VPN
4. Выберите **Разрешить**
5. Добавьте диапазоны в нотации CIDR
	- Например, 1.1.1.1/8
	- Вы можете добавить несколько диапазонов в одно правило.
6. Нажмите **Сохранить**

Добавьте несколько диапазонов IP, нажав кнопку **Добавить диапазон IP**, чтобы создать новое текстовое поле.

Обратите внимание, что простое добавление диапазонов IP не будет применять ограничения по IP. Для получения дополнительной информации см. раздел [Включение ограничений](#enabling-restrictions).

Если вы хотите разрешить только IP-диапазоны, добавленные в этот список, и отклонить все остальные запросы, добавление списка заблокированных не требуется. По умолчанию, если добавлен только список разрешенных, dbt Cloud будет разрешать только IP-адреса в допустимом диапазоне и отклонять все остальные IP. Однако вы можете добавить список заблокированных, если хотите отклонить определенные IP-адреса в пределах вашего диапазона CIDR списка разрешенных.

### Блокировка IP (запрет)

Если у вас есть IP-адрес(а), определенные в списке разрешенных, которые необходимо заблокировать, вы можете добавить эти диапазоны IP в список заблокированных, выполнив следующие действия:

1. Нажмите **Изменить**
2. Нажмите **Добавить правило**
3. Добавьте имя и описание для правила
	- Например, "Диапазон запрета корпоративного VPN"
4. Выберите **Запретить**
5. Добавьте диапазоны или отдельные IP-адреса в нотации CIDR
6. Нажмите **Сохранить**

:::note Дублирование IP-адресов

Если идентичные IP-адреса находятся как в конфигурациях разрешения, так и блокировки, то тот, который введен вторым, не будет сохранен.

Возможно поместить диапазон IP в один список, а затем поддиапазон или IP-адрес, который является его частью, в другой. Используя США (диапазон) и Нью-Йорк (поддиапазон) в качестве примера, ожидаемое поведение следующее:
- США в списке заблокированных, а Нью-Йорк в списке разрешенных - Трафик из США будет заблокирован, но IP из Нью-Йорка будут разрешены.
- США в списке разрешенных, а Нью-Йорк в списке заблокированных - Трафик из США будет разрешен, но IP из Нью-Йорка будут заблокированы.

:::

## Включение ограничений

После того как вы добавили все свои диапазоны, ограничения по IP могут быть включены, нажав кнопку **Включить ограничения по IP** и нажав **Сохранить**. Если ваш IP-адрес находится в любом из диапазонов списка заблокированных, вы не сможете сохранить или включить ограничения по IP - это сделано для предотвращения случайной блокировки аккаунта. Если вы все же оказались заблокированы из-за изменений IP с вашей стороны, пожалуйста, свяжитесь с support@getdbt.com

После включения, когда кто-то попытается получить доступ к dbt Cloud с ограниченного IP, он столкнется с одним из следующих сообщений в зависимости от того, использует ли он вход по электронной почте и паролю или SSO.

<Lightbox src="/img/docs/dbt-cloud/ip-restricted-email.png" title="Сообщение об отказе в доступе по IP для входа по электронной почте"/>

<Lightbox src="/img/docs/dbt-cloud/ip-restricted-sso.png" title="Сообщение об отказе в доступе по IP для входа через SSO"/>
