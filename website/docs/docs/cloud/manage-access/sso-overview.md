---
title: "Обзор единого входа (SSO)"
id: "sso-overview"
pagination_next: "docs/cloud/manage-access/set-up-sso-saml-2.0"
pagination_prev: null
---

# Обзор единого входа (SSO) <Lifecycle status="managed, managed_plus" /> {#single-sign-on-sso-overview}

В этом обзоре объясняется, как пользователи создаются (provisioning) в <Constant name="cloud" /> с использованием единого входа (Single Sign-On, SSO).
<Constant name="cloud" /> поддерживает JIT‑провижининг (Just-in-Time) и вход, инициированный провайдером идентификации (IdP). Подробнее о поддерживаемых вариантах можно узнать [здесь](https://www.getdbt.com/pricing/).

## Предварительные требования {#prerequisites}

- У вас должен быть тариф <Constant name="cloud" /> Enterprise или Enterprise+. Чтобы узнать больше, заказать демо или подключиться, [свяжитесь с нами](mailto:sales@getdbt.com).

## Auth0 URI {#auth0-uris}

<Snippet path="auth0-uri" />

## Процесс SSO {#sso-process}

На схеме ниже показан базовый процесс, с помощью которого пользователи создаются в <Constant name="cloud" /> при входе через SSO.

<Lightbox src="/img/sso_overview.png" title="Диаграмма SSO" />

#### Пояснение к диаграмме {#diagram-explanation}

- **Login Page**: Пользователь открывает страницу входа <Constant name="cloud" />, инициируя процесс SSO.
- **IdP-Initiated Login**: Пользователь открывает страницу входа <Constant name="cloud" /> внутри провайдера идентификации, выбирая приложение <Constant name="cloud" />. Это запускает процесс входа через IdP.
- **IdP Login Page**: Пользователю предлагается войти в провайдер идентификации. В результате приложение <Constant name="cloud" /> получает доступ к данным его учетной записи.
- **Login?**: Пользователь может выбрать — продолжить или прервать процесс входа.
  - **Yes**: Пользователь входит, предоставляет доступ приложению <Constant name="cloud" /> и продолжает.
  - **No**: Пользователь не входит и возвращается на страницу входа IdP.
- **User Exists?**: На этом шаге проверяется, существует ли пользователь в базе данных пользователей <Constant name="cloud" />.
  - **Yes**: Если да, этап создания пользователя пропускается.
  - **No**: Если нет, создается новая запись пользователя в базе данных <Constant name="cloud" />.
- **Create <Constant name="cloud" /> User**: Создается новая запись пользователя в базе данных <Constant name="cloud" />. Эта запись содержит адрес электронной почты пользователя, имя и фамилию, а также любые атрибуты IdP (например, группы), переданные провайдером идентификации. <Constant name="cloud" /> отправит письмо для подтверждения, и пользователь должен выполнить шаги, описанные в разделе [User experience](/docs/cloud/manage-access/invite-users#user-experience), чтобы использовать SSO в <Constant name="cloud" />.
- **Attach Matching Accounts**: <Constant name="cloud" /> находит все аккаунты, настроенные в соответствии с конфигурацией SSO, с которой пользователь вошел, и создает запись лицензии пользователя, связывающую пользователя с аккаунтом. На этом шаге также удаляются любые лицензии, которые пользователю не должны быть выданы в соответствии с текущей конфигурацией SSO.
- **Attach Matching Permissions (Groups)**: <Constant name="cloud" /> проходит по группам в соответствующих аккаунтах и находит все группы, которые подпадают под одну из следующих категорий:
  - имеют SSO‑группу сопоставления, назначенную пользователю;
  - имеют включенную опцию **Assign by Default**.
  
  Затем все эти группы (и только они) назначаются лицензии пользователя. На этом шаге также удаляются любые разрешения, которые пользователь не должен иметь в соответствии с текущими сопоставлениями SSO‑групп.
- **<Constant name="cloud" /> Application**: После выполнения этих шагов пользователь перенаправляется в приложение <Constant name="cloud" /> и может начать использовать его в обычном режиме.

## Принудительное использование SSO {#sso-enforcement}

* **SSO Enforcement:** Если в вашей организации включен SSO, <Constant name="cloud" /> будет принудительно требовать вход только через SSO для всех пользователей, кроме администраторов. По умолчанию, если у Account Admin или Security Admin уже есть пароль, они могут продолжать входить с использованием пароля. Чтобы запретить администраторам вход по паролю, отключите опцию **Allow password logins for account administrators** в разделе **Single sign-on** настроек аккаунта вашей организации (**Account settings**).
* **SSO Re-Authentication:** <Constant name="cloud" /> будет запрашивать повторную аутентификацию через вашего SSO‑провайдера каждые 24 часа для обеспечения высокого уровня безопасности.

### Как должны входить неадминистративные пользователи? {#how-should-non-admin-users-log-in}

Неадминистративные пользователи, которые сейчас входят с использованием пароля, больше не смогут этого делать. Они должны входить с помощью корпоративного URL входа dbt Enterprise или через провайдер идентификации (IdP), например Okta, Microsoft Entra ID (ранее Azure AD) и т.д.

### Рекомендации по безопасности {#security-best-practices}

Существует несколько сценариев, в которых может потребоваться вход с использованием пароля. Мы рекомендуем следующие лучшие практики безопасности для двух наиболее распространенных случаев:
* **Онбординг партнеров и подрядчиков** — Мы настоятельно рекомендуем добавлять партнеров и подрядчиков в ваш провайдер идентификации. Такие IdP, как Okta и Microsoft Entra ID, предлагают возможности, специально предназначенные для временных сотрудников. Мы рекомендуем обратиться к вашей IT‑команде, чтобы предоставить SSO‑лицензию для таких ситуаций. Использование IdP обеспечивает высокий уровень безопасности, снижает риск утечек и значительно повышает уровень защищенности вашей среды <Constant name="cloud" />.
* **Недоступность провайдера идентификации** — Администраторы аккаунта по‑прежнему смогут входить с использованием пароля, что позволит им взаимодействовать с вашим провайдером идентификации для устранения проблемы.
* **Оффбординг администраторов** — При выводе администраторов из системы необходимо отозвать доступ к <Constant name="cloud" />, удалив пользователя из вашей среды; в противном случае они смогут продолжать входить с использованием учетных данных (username/password).

### Следующие шаги для неадминистративных пользователей, которые сейчас входят по паролю {#next-steps-for-non-admin-users-currently-logging-in-with-passwords}

Если у вас есть неадминистративные пользователи, которые сегодня входят в <Constant name="cloud" /> с использованием пароля:

1. Убедитесь, что у всех пользователей есть учетные записи в вашем провайдере идентификации и что им назначен доступ к <Constant name="cloud" />, чтобы они не потеряли доступ.
2. Предупредите всех пользователей <Constant name="cloud" />, что они больше не смогут использовать пароль для входа, если только они уже не являются администраторами с паролем.
3. Мы **НЕ РЕКОМЕНДУЕМ** повышать пользователей до администраторов только для сохранения входа по паролю, так как это снизит уровень безопасности вашей среды <Constant name="cloud" />.
