---
title: "Обзор Единого входа (SSO)"
id: "sso-overview"
pagination_next: "docs/cloud/manage-access/set-up-sso-saml-2.0"
pagination_prev: null
---

# Обзор единого входа (SSO) <Lifecycle status="managed, managed_plus" />

В этом обзоре описывается, как пользователи создаются и управляются в <Constant name="cloud" /> с помощью единого входа (Single Sign-On, SSO).
<Constant name="cloud" /> поддерживает JIT (Just-in-Time)‑провижининг и вход, инициируемый IdP. Подробнее о поддерживаемых вариантах вы можете узнать [здесь](https://www.getdbt.com/pricing/).

## Предварительные условия

- У вас есть план <Constant name="cloud" /> Enterprise или Enterprise+. [Свяжитесь с нами](mailto:sales@getdbt.com), чтобы узнать больше, заказать демо или оформить подключение.

## URI для Auth0

<Snippet path="auth0-uri" />

## Процесс SSO

Диаграмма ниже объясняет базовый процесс, с помощью которого пользователи создаются в <Constant name="cloud" /> при входе в систему с использованием SSO.

<Lightbox src="/img/sso_overview.png" title="Диаграмма SSO" />

#### Объяснение диаграммы

- **Страница входа**: Пользователь переходит на страницу входа <Constant name="cloud" />, инициируя процесс SSO.
- **Вход, инициированный IdP**: Пользователь переходит на страницу входа <Constant name="cloud" /> внутри провайдера удостоверений (Identity Provider), выбирая приложение <Constant name="cloud" />. Это запускает процесс входа, инициированный IdP.
- **Страница входа IdP**: Пользователю предлагается войти в провайдер удостоверений. Это предоставит приложению <Constant name="cloud" /> доступ к данным его учетной записи.
- **Войти?**: Пользователь может выбрать — продолжить или прервать процесс входа.
  - **Да**: Пользователь входит в систему, предоставляет доступ приложению <Constant name="cloud" /> и продолжает процесс.
  - **Нет**: Пользователь не входит в систему и возвращается на страницу входа IdP.
- **Пользователь существует?**: На этом этапе проверяется, существует ли пользователь в базе данных пользователей <Constant name="cloud" />.
  - **Да**: В этом случае процесс создания пользователя пропускается.
  - **Нет**: В этом случае в базе данных <Constant name="cloud" /> создается новая запись для пользователя.
- **Создание пользователя <Constant name="cloud" />**: Создается новая запись в базе данных <Constant name="cloud" /> для нового пользователя. Эта запись содержит адрес электронной почты пользователя, имя и фамилию, а также любые атрибуты IdP (например, группы), переданные провайдером удостоверений. <Constant name="cloud" /> отправит письмо для подтверждения, и пользователь должен выполнить шаги, описанные в разделе [Пользовательский опыт](/docs/cloud/manage-access/invite-users#user-experience), чтобы использовать SSO в <Constant name="cloud" />.
- **Привязка соответствующих аккаунтов**: <Constant name="cloud" /> находит все аккаунты, настроенные в соответствии с конфигурацией SSO, использованной пользователем для входа, и затем создает запись лицензии пользователя, связывая пользователя с аккаунтом. На этом этапе также удаляются все лицензии, которые пользователь не должен иметь в соответствии с текущей конфигурацией SSO.
- **Привязка соответствующих разрешений (групп)**: <Constant name="cloud" /> проходит по группам в соответствующих аккаунтах и находит все группы, которые подпадают под одну из следующих категорий:
  - имеют группу сопоставления SSO, назначенную пользователю;
  - имеют включенную опцию **Assign by Default**.
  
  После этого все такие группы (и только они) назначаются лицензии пользователя. На этом этапе также удаляются любые разрешения, которые пользователь не должен иметь в соответствии с текущими сопоставлениями групп SSO.
- **Приложение <Constant name="cloud" />**: После выполнения этих шагов пользователь перенаправляется в приложение <Constant name="cloud" /> и может начать использовать его в обычном режиме.

## Принудительное использование SSO

* **Принудительное использование SSO:** Если в вашей организации включён SSO, <Constant name="cloud" /> будет требовать вход **только через SSO** для всех пользователей, не являющихся администраторами. По умолчанию, если у администратора аккаунта (Account Admin) или администратора безопасности (Security Admin) уже задан пароль, он может продолжать входить с использованием пароля. Чтобы запретить администраторам вход по паролю, отключите параметр **Allow password logins for account administrators** в разделе **Single sign-on** в **Account settings** вашей организации.
* **Повторная аутентификация SSO:** <Constant name="cloud" /> будет запрашивать повторную аутентификацию через вашего SSO‑провайдера каждые 24 часа для обеспечения высокого уровня безопасности.

### Как должны входить пользователи, не являющиеся администраторами?

Пользователи, не являющиеся администраторами, которые в настоящее время входят с использованием пароля, больше не смогут этого делать. Они должны входить, используя URL для входа в dbt Enterprise или провайдера идентификации (IdP). Например, Okta, Microsoft Entra ID (ранее Azure AD) и т.д.

### Лучшие практики безопасности

Существует несколько сценариев, в которых может потребоваться вход с использованием пароля. Мы рекомендуем следующие лучшие практики безопасности для двух наиболее распространённых случаев:

* **Онбординг партнёров и подрядчиков** &mdash; Мы настоятельно рекомендуем добавлять партнёров и подрядчиков в ваш провайдер идентификации (Identity Provider). Такие IdP, как Okta и Microsoft Entra ID, предлагают возможности, специально предназначенные для временных сотрудников. Мы рекомендуем обратиться к вашей IT‑команде, чтобы выделить лицензию SSO для таких ситуаций. Использование IdP значительно повышает уровень безопасности, снижает риск компрометации и существенно улучшает общий уровень защищённости вашей среды <Constant name="cloud" />.
* **Провайдер идентификации недоступен** &mdash; Администраторы аккаунта по‑прежнему смогут входить в систему с использованием пароля, что позволит им совместно с командой, отвечающей за Identity Provider, устранять возникшие проблемы.
* **Оффбординг администраторов** &mdash; При выводе администраторов из системы обязательно отзывайте доступ к <Constant name="cloud" />, удаляя пользователя из вашей среды; в противном случае они смогут продолжать входить в систему, используя учётные данные username/password.

### Следующие шаги для неадминистративных пользователей, которые в настоящее время входят с использованием пароля

Если в данный момент у вас есть пользователи без прав администратора, которые входят в <Constant name="cloud" /> с использованием пароля:

1. Убедитесь, что у всех пользователей есть учётная запись в вашем провайдере идентификации и что им назначен доступ к <Constant name="cloud" />, чтобы они не потеряли доступ.
2. Уведомите всех пользователей <Constant name="cloud" />, что они больше не смогут использовать пароль для входа, если только они уже не являются администраторами с настроенным паролем.
3. Мы **НЕ** рекомендуем повышать пользователей до роли администратора исключительно для сохранения входа по паролю, так как это снижает уровень безопасности вашей среды <Constant name="cloud" />.

Если у вас есть пользователи, не являющиеся администраторами, которые в настоящее время входят в dbt Cloud с использованием пароля:

1. Убедитесь, что у всех пользователей есть учетная запись в вашем провайдере идентификации и они назначены в dbt Cloud, чтобы они не потеряли доступ.
2. Уведомите всех пользователей dbt Cloud, что они больше не смогут использовать пароль для входа, если они уже не являются администраторами с паролем.
3. Мы **НЕ РЕКОМЕНДУЕМ** повышать пользователей до администраторов только для сохранения входа на основе пароля, так как это снизит безопасность вашей среды dbt Cloud.