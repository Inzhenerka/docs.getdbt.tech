---
title: "О доступе пользователей в dbt"  
description: "Узнайте, как администраторы dbt могут использовать модель разграничения прав доступа dbt для управления доступом пользователей на уровне учетной записи dbt."
id: "about-user-access"
pagination_next: "docs/cloud/manage-access/seats-and-users"
pagination_prev: null
---

import LicenseTypes from '/snippets/_cloud-license-types.md';

:::info "Доступ пользователей" — это не то же самое, что "Доступ к моделям"

На этой странице рассматриваются группы пользователей и управление доступом, включая:
- Пользовательские лицензии, разрешения и членство в группах
- Контроль доступа на основе ролей (RBAC) для проектов и окружений
- Единый вход (Single sign-on) и безопасная аутентификация

Для управления доступом к конкретным моделям и их доступности в разных проектах см. раздел [Model access](/docs/mesh/govern/model-access).
:::

:::

# О доступе пользователей

Вы можете регулировать доступ к <Constant name="cloud" /> различными способами, включая лицензии, группы, разрешения и управление доступом на основе ролей (RBAC). Чтобы понять возможные подходы к управлению доступом пользователей к возможностям и функциональности <Constant name="cloud" />, сначала нужно разобраться, как мы работаем с пользователями и группами.

## Пользователи

Отдельные пользователи в <Constant name="cloud" /> могут быть реальными людьми, которых вы [приглашаете вручную](/docs/cloud/manage-access/invite-users), или пользователями, которым предоставляется доступ через внешний провайдер удостоверений (IdP), такой как Microsoft Entra ID, Okta или Google Workspace.

В любом из этих сценариев, когда вы добавляете пользователя в <Constant name="cloud" />, ему назначается [лицензия](#licenses). Вы можете назначать лицензии как на уровне отдельных пользователей, так и на уровне групп. При ручном приглашении пользователя вы назначаете лицензию в окне приглашения.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/license-dropdown.png" width="40%" title="Пример выпадающего списка лицензий в окне приглашения пользователя." />

Вы можете изменить лицензию существующего пользователя, перейдя в раздел **Пользователи** в **Настройках аккаунта**, нажав на пользователя и выбрав **Редактировать** в панели пользователя. Удалите пользователей из этого же окна, чтобы освободить лицензии для новых пользователей.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/edit-user.png" width="40%" title="Пример окна информации о пользователе в каталоге пользователей" />

### Пароли пользователей

По умолчанию новым пользователям предлагается установить пароль для своей учетной записи. Все тарифные планы поддерживают и требуют использование [многофакторной аутентификации](/docs/cloud/manage-access/mfa) для пользователей, входящих по паролю. Однако перед настройкой MFA пользователю все равно необходимо сначала задать пароль. Учетные записи уровня Enterprise могут настраивать [SSO](#sso-mappings) и расширенные меры аутентификации. Планы Developer и Starter поддерживают только пароли пользователей с MFA.

Пароли пользователей должны соответствовать следующим требованиям:

- Содержать не менее девяти символов
- Содержать как минимум одну заглавную и одну строчную букву
- Содержать как минимум одну цифру от 0 до 9
- Содержать как минимум один специальный символ

## Группы

Группы в <Constant name="cloud" /> выполняют во многом ту же роль, что и в традиционных инструментах каталогов &mdash; они объединяют отдельных пользователей, упрощая массовое назначение разрешений.

Доступные разрешения зависят от того, используете ли вы [план уровня Enterprise](/docs/cloud/manage-access/enterprise-permissions) или [самообслуживаемый план Starter](/docs/cloud/manage-access/self-service-permissions).

- Администраторы используют группы в <Constant name="cloud" /> для назначения [лицензий](#licenses) и [разрешений](#permissions).
- Разрешения более детализированы, чем лицензии, и назначаются только на уровне группы; _назначать разрешения на уровне отдельного пользователя нельзя._
- Каждый пользователь в <Constant name="cloud" /> должен быть включен как минимум в одну группу.

Сразу после создания учетной записи <Constant name="cloud" /> доступны три группы по умолчанию (пользователь, создавший учетную запись, автоматически добавляется во все три):

- **Owner:** Эта группа предназначена для лиц, отвечающих за всю учетную запись, и предоставляет им расширенные привилегии администратора аккаунта. Изменять разрешения нельзя.
- **Member:** Эта группа предназначена для обычных участников вашей организации. Разрешения по умолчанию достаточно широкие и ограничивают только доступ к функциям, которые могут влиять на биллинг или безопасность. По умолчанию <Constant name="cloud" /> добавляет новых пользователей в эту группу.
- **Everyone:** Общая группа для всех участников вашей организации. Вы можете настроить разрешения в соответствии с потребностями вашей организации. По умолчанию <Constant name="cloud" /> добавляет новых пользователей в эту группу.

Группы по умолчанию автоматически создаются для всех учетных записей, чтобы упростить первоначальную настройку. Мы рекомендуем создавать собственные организационные группы, чтобы вы могли гибко настраивать разрешения. После создания собственных групп вы можете удалить группы по умолчанию.

### Создание новых групп <Lifecycle status="managed,managed_plus" />

- Создавайте новые группы в разделе **Groups & Licenses** в **Account settings**.
- Если вы используете внешний IdP для SSO, вы можете синхронизировать эти SSO‑группы с <Constant name="cloud" /> из панели **Group details** при создании новой группы или редактировании существующей.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/new-group.png" width="60%" title="Пример панели новой группы в настройках учетной записи." />

:::important

Если пользователю назначены лицензии и разрешения из нескольких групп, группа, предоставляющая наибольший доступ, будет иметь приоритет. Вы должны назначить набор разрешений для любых групп, созданных сверх трех по умолчанию, иначе пользователи, назначенные в них, не будут иметь доступа к функциям, кроме их пользовательского профиля.

:::

### Доступ и разрешения группы

Раздел **Access & Permissions** в настройках группы — это место, где вы можете назначить пользователям соответствующий уровень доступа в зависимости от их роли или обязанностей. Здесь вы определяете:

* к каким проектам группа имеет доступ;
* какие роли назначаются участникам группы для каждого проекта;
* в каких окружениях группа может вносить изменения.

Такая настройка дает гибкость в определении уровня доступа для пользователей в любой группе. Например, вы можете разрешить одной группе аналитиков редактировать задания (jobs) в своем проекте, но предоставить им только просмотр связанных проектов. Или же вы можете выдать доступ уровня администратора команде, которая владеет конкретным проектом, оставив для остальных пользователей доступ только для чтения.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/sample-access-policy.png" width="60%" title="Назначайте различные роли и права доступа группам пользователей." />

#### Права на запись в окружения (Environment write access)

Некоторые наборы разрешений предоставляют пользователям доступ к настройкам окружений только для чтения. Это ограничение можно переопределить, если назначить пользователей в группу с включенным **Environment write access**. В этом случае они смогут создавать, редактировать и удалять настройки окружений, такие как jobs и runs, обходя режим «только чтение». При этом расширенный доступ **не** дает права создавать или удалять сами окружения.

В следующем примере набор разрешений `analyst`, который по умолчанию имеет доступ к jobs только для чтения, назначен группе во всех проектах. Однако параметр **Environment write access** установлен в значение `All Environments`. Это дает всем пользователям в данной группе возможность создавать, редактировать и удалять jobs во всех окружениях и проектах.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/environment-write.png" width="60%" title="Пользователи, которым назначен доступ на запись к среде, смогут редактировать настройки среды." />

Используйте настройки **Environment write access** только в том случае, если вы действительно хотите предоставить пользователям возможность редактировать окружения. Если необходимо выдать пользователям только те права, которые заложены в их наборе разрешений, оставьте эту настройку пустой (все флажки сняты).

### Сопоставления SSO <Lifecycle status="managed,managed_plus" />

SSO mappings связывают членство в группе поставщика удостоверений (Identity Provider, IdP) с группой в <Constant name="cloud" />. Когда пользователи входят в <Constant name="cloud" /> через поддерживаемого поставщика удостоверений, их членство в группах IdP синхронизируется с <Constant name="cloud" />. После успешного входа членство пользователя в группах (а вместе с ним и разрешения) автоматически обновляется внутри <Constant name="cloud" />.

:::tip Создание SSO сопоставлений

Хотя <Constant name="cloud" /> поддерживает сопоставление нескольких групп IdP с одной группой <Constant name="cloud" />, мы рекомендуем использовать сопоставление 1:1, чтобы упростить администрирование. Используйте одинаковые имена для групп <Constant name="cloud" /> и групп в вашем IdP.

:::

Создайте SSO сопоставление в представлении группы:

1. Откройте существующую группу для редактирования или создайте новую группу.
2. В разделе **SSO** на экране группы введите название группы SSO точно так, как оно указано в IdP. Если название не совпадает, пользователи не будут правильно размещены в группе.
3. В разделе **Пользователи** убедитесь, что опция **Добавить всех пользователей по умолчанию** отключена.
4. Сохраните конфигурацию группы. Новые пользователи SSO будут добавлены в группу при входе, а существующие пользователи будут добавлены в группу при следующем входе.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/sso-mapping.png" width="60%" title="Пример группы SSO, сопоставленной с группой dbt." />

Дополнительную информацию о сопоставлении групп SSO для назначения пользователей в группы <Constant name="cloud" /> см. в разделе [role-based access control](#role-based-access-control).

## Предоставление доступа

Пользователи <Constant name="cloud" /> имеют как лицензию (назначенную конкретному пользователю или через членство в группе), так и разрешения (только через членство в группе), которые определяют, какие действия они могут выполнять. Лицензии действуют на уровне всего аккаунта, а разрешения обеспечивают более детализированный доступ или ограничения для отдельных функций.

### Лицензии

Каждому пользователю в <Constant name="cloud" /> будет назначена лицензия. Лицензии потребляют «места» (seats), которые влияют на то, как выставляется [счёт](/docs/cloud/billing) для вашей учётной записи, в зависимости от вашего [тарифного плана](https://www.getdbt.com/pricing).

<LicenseTypes/>

Лицензии разработчиков составляют большинство пользователей в вашей среде и оказывают наибольшее влияние на выставление счетов, поэтому важно следить за их количеством в любой момент времени.

Для получения дополнительной информации о этих типах лицензий см. [Места и пользователи](/docs/cloud/manage-access/seats-and-users)

import LicenseOverrideNote from '/snippets/_license-override-note.md';

<LicenseOverrideNote />

### Разрешения

Права доступа определяют, что пользователь с лицензией Developer может делать в вашем аккаунте <Constant name="cloud" />. По умолчанию участники групп `Owner` и `Member` имеют полный доступ ко всем разделам и возможностям. Если вам нужно ограничить доступ к отдельным функциям, назначайте пользователей в группы с более строгими наборами прав. Обратите внимание: если пользователь состоит в нескольких группах, приоритет имеет группа с наиболее широкими правами.

Доступные права зависят от того, используете ли вы план [Enterprise, Enterprise+](/docs/cloud/manage-access/enterprise-permissions) или [self-service Starter](/docs/cloud/manage-access/self-service-permissions). В аккаунтах Developer есть только один пользователь, поэтому права доступа в них не применяются.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/assign-group-permissions.png" width="60%" title="Пример выпадающего списка разрешений при редактировании существующей группы." />

Некоторые разрешения (те, которые не предоставляют полный доступ, как администраторы) позволяют группам быть "назначенными" только для конкретных проектов и сред. Прочтите о [разрешениях на уровне среды](/docs/cloud/manage-access/environment-permissions-setup) для получения дополнительной информации об ограничении доступа к средам.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/environment-access-control.png" width="60%" title="Пример управления доступом к среде для группы с назначенным администратором Git." />

## Управление доступом на основе ролей <Lifecycle status="managed,managed_plus" />

Управление доступом на основе ролей (Role-based access control, RBAC) позволяет предоставлять пользователям доступ к возможностям и функциональности на основе их принадлежности к группам. С помощью этого подхода вы можете назначать пользователям разные уровни доступа к различным проектам и окружениям. Вы можете вывести управление доступом и безопасность на новый уровень, интегрировав <Constant name="cloud" /> со сторонним провайдером идентификации (IdP), чтобы предоставлять пользователям доступ после аутентификации через ваш SSO- или OAuth‑сервис.

Перед тем как настраивать RBAC для пользователей SSO, важно знать несколько моментов:
- Новые пользователи SSO автоматически добавляются во все группы, в которых включена опция **Add all new users by default**. По умолчанию эта опция включена для групп `Everyone` и `Member`. Для наилучшего опыта работы с RBAC рекомендуется отключить эту опцию во всех группах.
- У вас должны быть корректно настроены группы SSO в разделе сведений о группе (Group details) в секции SSO. Если имя группы SSO не совпадает _точно_, пользователи не будут корректно добавляться в группу.  
  <Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/sso-window-details.png" width="60%" title="The Group details SSO section with a group configured." />
- dbt Labs рекомендует, чтобы имена групп в <Constant name="cloud" /> совпадали с именами групп в IdP.

Предположим, что в вашу организацию принимают нового сотрудника с использованием [Okta](/docs/cloud/manage-access/set-up-sso-okta) в качестве IdP и групп <Constant name="cloud" /> с настроенными сопоставлениями SSO. В этом сценарии пользователи работают над проектом `The Big Project`, и к команде присоединяется новый аналитик по имени `Euclid Ean`.

Ознакомьтесь с следующими примерами конфигураций, чтобы получить представление о том, как вы можете реализовать RBAC для вашей организации (эти примеры предполагают, что вы уже настроили [SSO](/docs/cloud/manage-access/sso-overview)):

<Expandable alt_header="Конфигурация Okta"> 

Вы и ваша команда IdP добавляете `Euclid Ean` в свою среду Okta и назначаете его в SSO‑приложение `dbt` через группу с названием `The Big Project`.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/okta-group-config.png" width="60%" title="Пользователь в группе в Okta." />

Настройте выражения атрибутов групп в приложении `dbt` в Okta. В примере ниже выражения групп настроены на точное совпадение с именем группы (`The Big Project`), однако в вашем случае конфигурация, скорее всего, будет гораздо более широкой. Компании часто используют один и тот же префикс для всех групп dbt в своём IdP. Например, `DBT_GROUP_`.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/group-attributes.png" width="60%" title="Атрибуты групп, настроенные в SAML 2.0 приложении dbt в Okta." />

</Expandable>

<Expandable alt_header="dbt configuration"> 

Вы и ваша команда администраторов <Constant name="cloud" /> настраиваете группы в настройках аккаунта:  
1. Перейдите в **Account settings** и в меню слева выберите **Groups & Licenses**.  
2. Нажмите **Create group** или выберите существующую группу и нажмите **Edit**.  
3. Введите имя группы в поле **SSO**.  
4. Настройте поля **Access and permissions** в соответствии с вашими требованиями. Выберите [набор разрешений](/docs/cloud/manage-access/enterprise-permissions), проекты, к которым группа может иметь доступ, и [уровень доступа на уровне окружений](/docs/cloud/manage-access/environment-permissions).

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/dbt-cloud-group-config.png" width="60%" title="Конфигурация группы в dbt с заполненным полем SSO." />

Эвклид ограничен ролью `Аналитик`, проектом `Jaffle Shop` и средами `Разработка`, `Тестирование` и `Общая` этого проекта. Эвклид не имеет доступа к среде `Производство` в своей роли. 

</Expandable>

<Expandable alt_header="Путь пользователя">

Эвклид выполняет следующие шаги для входа в систему: 

1. Перейдите по URL-адресу SSO или откройте приложение <Constant name="cloud" /> в своей учетной записи Okta. Этот URL можно найти на странице конфигурации **Single sign-on** в разделе **Account settings**.

  <Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/sso-login-url.png" width="60%" title="URL для входа через SSO в настройках аккаунта." />

2. Войдите в систему, используя свои учетные данные Okta.

  <Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/sso-login.png" width="60%" title="Экран входа через SSO при использовании Okta в качестве поставщика удостоверений." />

3. Поскольку это его первый вход через SSO, Эвклид Иан получает сообщение и не может продолжить, пока не проверит адрес электронной почты, связанный с его учетной записью Okta. 

  <Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/post-login-screen.png" width="60%" title="Экран, который видят пользователи после первого входа через SSO." />

4. Затем они открывают свою электронную почту и переходят по ссылке, чтобы присоединиться к dbt Labs.

  <Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/sample-email.png" width="60%" title="Электронное письмо, которое пользователь получает при первом входе через SSO." />

5. Их адрес электронной почты теперь подтверждён. Они нажимают **Authenticate with your enterprise login**, после чего процесс завершается.

    <Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/email-verified.png" width="60%" title="Подтверждение того, что адрес электронной почты проверен." />

Теперь Euclid вошёл в свою учётную запись. У него есть доступ только к проекту `Jaffle Shop`. В разделе **Orchestration** он может настроить учётные данные для разработки.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/orchestration-environments.png" width="60%" title="Страница оркестрации со средами." />

Окружение `Production` отображается, но доступ к нему ограничен режимом `read-only`, тогда как в окружении `Staging` у него есть полный доступ.

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/production-restricted.png" width="60%" title="Страница среды Производство с доступом только для чтения." />

<Lightbox src="/img/docs/dbt-cloud/dbt-cloud-enterprise/access-control/staging-access.png" width="60%" title="Страница среды Тестирование с полным доступом." />

</Expandable>

После настройки RBAC у вас появляется детальный контроль доступа пользователей к функциям по всему <Constant name="cloud" />.

### Управление лицензиями SCIM

В рамках настройки SSO для поддерживаемых IdP вы также можете настроить параметры [System for Cross-Domain Identity Management (SCIM)](/docs/cloud/manage-access/scim), чтобы добавить дополнительный уровень безопасности в управление жизненным циклом пользователей. В рамках этого процесса вы можете интегрировать распределение пользовательских лицензий в процесс их провижининга через ваш IdP. Подробнее см. в [инструкции по управлению лицензиями SCIM](/docs/cloud/manage-access/scim#manage-user-licenses-with-scim).

## Часто задаваемые вопросы

<Expandable alt_header="Когда обновляются членства в группах IdP для групп, сопоставленных с SSO?">

Членство в группах обновляется каждый раз, когда пользователь входит в <Constant name="cloud" /> через поддерживаемого провайдера SSO. Если вы изменили членство в группах в вашем провайдере удостоверений или в <Constant name="cloud" />, попросите пользователей снова войти в <Constant name="cloud" />, чтобы синхронизировать эти групповые принадлежности.

</Expandable>

<Expandable alt_header="Могу ли я настроить SSO без RBAC?">

Да, см. документацию по [Ручному назначению](#manual-assignment) выше для получения дополнительной информации о использовании SSO без RBAC.

</Expandable>

<Expandable alt_header="Могу ли я настроить тип лицензии пользователя на основе атрибутов IdP?">

Да, см. документацию по [управлению типами лицензий](/docs/cloud/manage-access/seats-and-users#managing-license-types) для получения дополнительной информации.

</Expandable>

<Expandable alt_header="Почему я не могу редактировать членство пользователя в группе?">

Не пытайтесь редактировать своего собственного пользователя, так как это не разрешено по соображениям безопасности. Вам потребуется другой пользователь, чтобы внести изменения в членство вашего собственного пользователя в группе.

</Expandable>

<Expandable alt_header="Как добавить или удалить пользователей?">

Каждый план <Constant name="cloud" /> включает базовое количество лицензий **Developer** и **Read-Only**. Вы можете добавлять или удалять лицензии, изменяя количество пользователей в настройках вашей учетной записи.  
  - Если вы используете план **Enterprise** или **Enterprise+** и у вас есть соответствующие [permissions](/docs/cloud/manage-access/enterprise-permissions), вы можете добавлять или удалять разработчиков, изменяя количество мест для пользователей‑разработчиков (developer user seat count) в **Account settings** -> **Users**.
  - Если вы используете план **Starter** и у вас есть соответствующие [permissions](/docs/cloud/manage-access/self-service-permissions), для добавления или удаления разработчиков необходимо внести два изменения: скорректировать количество мест для пользователей‑разработчиков (developer user seat count) **и** количество оплачиваемых мест для разработчиков (developer billing seat count) в **Account settings** -> **Users**, а затем в **Account settings** -> **Billing**.

Для получения подробных шагов обратитесь к [Пользователи и лицензии](/docs/cloud/manage-access/seats-and-users#licenses).

</Expandable>

## Узнать больше

<WistiaVideo id="al3w450mcn" paddingTweak="62.25%" />
