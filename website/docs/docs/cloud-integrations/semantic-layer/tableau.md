---
title: "Tableau"
description: "Используйте рабочие листы Tableau для выполнения запросов к dbt Semantic Layer и создания панелей с доверенными данными."
tags: [Semantic Layer]
sidebar_label: "Tableau"
---

Интеграция с Tableau позволяет использовать рабочие листы для выполнения запросов к dbt Semantic Layer напрямую и создавать панели с доверенными данными. Она обеспечивает живое подключение к dbt Semantic Layer через Tableau Desktop или Tableau Server.

## Предварительные требования

- Вы настроили [dbt Semantic Layer](/docs/use-dbt-semantic-layer/setup-sl) и используете dbt версии 1.6 или выше.
- У вас должна быть [Tableau Desktop](https://www.tableau.com/en-gb/products/desktop) версии 2021.1 и выше или Tableau Server.
  - Обратите внимание, что Tableau Online в настоящее время не поддерживает собственные коннекторы. Если вы используете Tableau Online, вы сможете получить доступ к коннектору только в Tableau Desktop.
- Войдите в Tableau Desktop (с учетными данными Online или Server) или используйте лицензию на Tableau Server.
- Вам понадобятся ваш хост dbt Cloud, [ID окружения](/docs/use-dbt-semantic-layer/setup-sl#set-up-dbt-semantic-layer) и [токен сервиса](/docs/dbt-cloud-apis/service-tokens) для входа. Эта учетная запись должна быть настроена с dbt Semantic Layer.
- У вас должна быть учетная запись dbt Cloud Team или Enterprise [account](https://www.getdbt.com/pricing). Подходит как для многопользовательского, так и для однопользовательского развертывания.
  - Владельцы однопользовательских учетных записей должны связаться со своим представителем для необходимой настройки и активации.

import SLCourses from '/snippets/_sl-course.md';

<SLCourses/>

## Установка коннектора

Коннектор dbt Semantic Layer для Tableau доступен для загрузки напрямую на [Tableau Exchange](https://exchange.tableau.com/products/1020).

В качестве альтернативы, вы можете следовать этим шагам для установки коннектора:

1. Загрузите [файл коннектора](https://github.com/dbt-labs/semantic-layer-tableau-connector/releases/latest/download/dbt_semantic_layer.taco) с GitHub локально и добавьте его в вашу папку по умолчанию:

| Операционная система | Tableau Desktop | Tableau Server |
| -------------------- | --------------- | -------------- |
| Windows | `C:\Users\\[Windows User]\Documents\My Tableau Repository\Connectors` | `C:\Program Files\Tableau\Connectors` |
| Mac | `/Users/[user]/Documents/My Tableau Repository/Connectors` | Не применимо |
| Linux | `/opt/tableau/connectors` | `/opt/tableau/connectors` |
 
2. Установите [JDBC драйвер](/docs/dbt-cloud-apis/sl-jdbc) в папку в зависимости от вашей операционной системы:
   - Windows: `C:\Program Files\Tableau\Drivers`
   - Mac: `~/Library/Tableau/Drivers` или `/Library/JDBC` или `~/Library/JDBC`
   - Linux: `/opt/tableau/tableau_driver/jdbc`
3. Откройте Tableau Desktop или Tableau Server и найдите коннектор **dbt Semantic Layer by dbt Labs** на левой стороне. Возможно, вам потребуется перезапустить эти приложения, чтобы коннектор стал доступен.
4. Подключитесь, используя информацию о хосте, ID окружения и токене сервиса, предоставленную dbt Cloud во время [настройки Semantic Layer](/docs/use-dbt-semantic-layer/setup-sl#:~:text=After%20saving%20it%2C%20you%27ll%20be%20provided%20with%20the%20connection%20information%20that%20allows%20you%20to%20connect%20to%20downstream%20tools).
   - В Tableau Server экран аутентификации может отображать "User" и "Password", в этом случае User — это ID окружения, а пароль — это токен сервиса.

## Использование интеграции

1. **Аутентификация** &mdash; После аутентификации система перенаправит вас на страницу источника данных.
2. **Доступ ко всем объектам Semantic Layer** &mdash; Используйте источник данных "ALL" для доступа ко всем метрикам, измерениям и сущностям, настроенным в вашем dbt Semantic Layer. Обратите внимание, что источник данных "METRICS_AND_DIMENSIONS" устарел и заменен на "ALL". Обязательно используйте живое подключение, так как извлечения в настоящее время не поддерживаются.
3. **Доступ к сохраненным запросам** &mdash; Вы можете дополнительно получить доступ к отдельным [сохраненным запросам](/docs/build/saved-queries), которые вы определили. Они также будут отображаться как уникальные источники данных при входе в систему.
4. **Доступ к рабочему листу** &mdash; Из вашего выбора источника данных перейдите непосредственно к рабочему листу в нижнем левом углу.
5. **Запрос метрик и измерений** &mdash; Затем вы найдете все метрики, измерения и сущности, доступные для запроса, на левой стороне вашего окна в зависимости от вашего выбора.

Посетите [документацию Tableau](https://help.tableau.com/current/pro/desktop/en-us/gettingstarted_overview.htm), чтобы узнать больше о том, как использовать рабочие листы и панели Tableau.

### Публикация из Tableau Desktop в Tableau Server

- **Из Desktop в Server** &mdash; Как и в любом рабочем процессе Tableau, вы можете опубликовать свою рабочую книгу из Tableau Desktop в Tableau Server. Для пошаговых инструкций посетите [руководство по публикации](https://help.tableau.com/current/pro/desktop/en-us/publish_workbooks_share.htm) от Tableau.

## Важные замечания

**Агрегация**<br />
- Все метрики отображаются с использованием типа агрегации "SUM" в интерфейсе Tableau, и это нельзя изменить с помощью интерфейса Tableau.
- dbt Semantic Layer управляет типом агрегации в коде, и он намеренно фиксирован. Имейте в виду, что базовая агрегация в dbt Semantic Layer может не быть "SUM" ("SUM" является значением по умолчанию в Tableau).

**Источники данных и отображение**<br />
- В источнике данных "ALL" Tableau отображает все метрики и измерения из dbt Semantic Layer на левой стороне. Обратите внимание, что не все метрики и измерения могут быть объединены. Вы получите сообщение об ошибке, если определенное измерение не может быть объединено с метрикой (или наоборот). Вы можете использовать сохраненные запросы для меньших частей данных, которые вы хотите объединить.
- Для отображения доступных метрик и измерений dbt Semantic Layer возвращает метаданные для фиктивной таблицы с измерениями и метриками в качестве 'столбцов' в этой таблице. Из-за этого вы не можете фактически выполнять запросы к этой таблице для предварительного просмотра или извлечений.

**Вычисления и запросы**<br />
- Некоторые вычисления таблицы, такие как "Итоги" и "Процент от", могут быть неточными при использовании метрик, агрегированных неаддитивным способом (например, count distinct).
- В любом из наших интерфейсов Semantic Layer (не только в Tableau) вы должны включать [временное измерение](/docs/build/cumulative#limitations) при работе с любой кумулятивной метрикой, имеющей временное окно или гранулярность.
- Мы можем поддерживать вычисляемые поля для создания фильтров параметров или динамического выбора метрик и измерений. Однако другие использования вычисляемых полей не поддерживаются.
  - _Примечание: Для случаев использования вычисляемых полей, которые в настоящее время не охвачены, пожалуйста, свяжитесь с <a href="mailto:support@getdbt.com?subject=dbt Semantic Layer feedback">поддержкой dbt</a> и поделитесь ими, чтобы мы могли лучше понять._
- При использовании сохраненных запросов, включающих фильтры, мы автоматически применим любые фильтры, которые есть в запросе.

## Неподдерживаемая функциональность

Следующие функции Tableau в настоящее время не поддерживаются, однако dbt Semantic Layer может поддерживать некоторые из них в будущих выпусках:
- Обновление страницы источника данных
- Использование режима "Extract" для просмотра ваших данных
- Объединение таблиц
- Написание пользовательского SQL / начального SQL
- Расширения таблиц
- Кросс-базовые соединения
- Некоторые функции в Analysis --> Create Calculated Field
- Фильтрация по временной части для кумулятивного типа метрики
- Изменение вашего временного измерения на использование "Номера недели"
- Выполнение соединений между таблицами, которые создает dbt Semantic Layer. Он обрабатывает соединения за вас, поэтому нет необходимости соединять компоненты в dbt Semantic Layer. Обратите внимание, что вы _можете_ соединять таблицы из dbt Semantic Layer с таблицами за пределами вашей платформы данных.
- Интеграция с Tableau в настоящее время не отображает описательные метки, определенные в вашей конфигурации `metrics`, что означает, что пользовательские метки не будут видны при импорте/запросе этих метрик в Tableau.

## Часто задаваемые вопросы
<FAQ path="Troubleshooting/sl-alpn-error" />