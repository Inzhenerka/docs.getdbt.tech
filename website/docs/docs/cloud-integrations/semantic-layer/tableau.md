---
title: "Tableau"
description: "Используйте листы Tableau для запроса к семантическому слою dbt и создания панелей управления с надежными данными."
tags: [Семантический слой]
sidebar_label: "Tableau"
---

Интеграция Tableau позволяет вам использовать листы для прямого запроса к семантическому слою dbt и создания панелей управления с надежными данными. Она обеспечивает живое соединение с семантическим слоем dbt через Tableau Desktop или Tableau Server.

## Предварительные требования

- Вы [настроили семантический слой dbt](/docs/use-dbt-semantic-layer/setup-sl) и используете dbt версии 1.6 или выше.
- У вас должна быть версия [Tableau Desktop](https://www.tableau.com/en-gb/products/desktop) 2021.1 или выше или Tableau Server.
  - Обратите внимание, что Tableau Online в настоящее время не поддерживает пользовательские коннекторы. Если вы используете Tableau Online, вы сможете получить доступ к коннектору только в Tableau Desktop.
- Войдите в Tableau Desktop (с учетными данными Online или Server) или получите лицензию на Tableau Server.
- Вам нужны ваш хост dbt Cloud, [ID окружения](/docs/use-dbt-semantic-layer/setup-sl#set-up-dbt-semantic-layer) и [токен службы](/docs/dbt-cloud-apis/service-tokens) для входа. Эта учетная запись должна быть настроена с семантическим слоем dbt.
- У вас должна быть команда или корпоративная [учетная запись dbt Cloud](https://www.getdbt.com/pricing). Подходит как для многопользовательского, так и для однопользовательского развертывания.
  - Однопользовательские учетные записи должны связаться со своим представителем для необходимой настройки и активации.

import SLCourses from '/snippets/_sl-course.md';

<SLCourses/>

## Установка коннектора

Коннектор семантического слоя dbt для Tableau доступен для загрузки непосредственно на [Tableau Exchange](https://exchange.tableau.com/products/1020).

В качестве альтернативы вы можете следовать этим шагам для установки коннектора:

1. Скачайте файл [коннектора](https://github.com/dbt-labs/semantic-layer-tableau-connector/releases/latest/download/dbt_semantic_layer.taco) с GitHub на свой компьютер и добавьте его в свою папку по умолчанию:

| Операционная система | Tableau Desktop | Tableau Server |
| -------------------- | --------------- | -------------- |
| Windows              | `C:\Users\\[Windows User]\Documents\My Tableau Repository\Connectors` | `C:\Program Files\Tableau\Connectors` |
| Mac                  | `/Users/[user]/Documents/My Tableau Repository/Connectors` | Не применимо |
| Linux                | `/opt/tableau/connectors` | `/opt/tableau/connectors` |

2. Установите [JDBC драйвер](/docs/dbt-cloud-apis/sl-jdbc) в папку в зависимости от вашей операционной системы:
   - Windows: `C:\Program Files\Tableau\Drivers`
   - Mac: `~/Library/Tableau/Drivers` или `/Library/JDBC` или `~/Library/JDBC`
   - Linux: `/opt/tableau/tableau_driver/jdbc`
3. Откройте Tableau Desktop или Tableau Server и найдите коннектор **dbt Semantic Layer by dbt Labs** на левой стороне. Возможно, вам потребуется перезапустить эти приложения, чтобы коннектор стал доступен.
4. Подключитесь с информацией о вашем хосте, ID окружения и токене службы, которые предоставляет dbt Cloud во время [настройки семантического слоя](/docs/use-dbt-semantic-layer/setup-sl#:~:text=After%20saving%20it%2C%20you%27ll%20be%20provided%20with%20the%20connection%20information%20that%20allows%20you%20to%20connect%20to%20downstream%20tools).
   - В Tableau Server экран аутентификации может отображать "Пользователь" и "Пароль", в этом случае Пользователь — это ID окружения, а пароль — это токен службы.

## Использование интеграции

1. **Аутентификация** &mdash; После аутентификации система перенаправит вас на страницу источника данных.
2. **Доступ ко всем объектам семантического слоя** &mdash; Используйте источник данных "ALL" для доступа ко всем метрикам, измерениям и сущностям, настроенным в вашем семантическом слое dbt. Обратите внимание, что источник данных "METRICS_AND_DIMENSIONS" устарел и был заменен на "ALL". Обязательно используйте живое соединение, так как извлечения в настоящее время не поддерживаются.
3. **Доступ к сохраненным запросам** &mdash; Вы можете дополнительно получить доступ к отдельным [сохраненным запросам](/docs/build/saved-queries), которые вы определили. Они также будут отображаться как уникальные источники данных при входе.
4. **Доступ к листу** &mdash; Из вашего выбора источника данных перейдите непосредственно к листу в нижнем левом углу.
5. **Запрос метрик и измерений** &mdash; Затем вы найдете все метрики, измерения и сущности, доступные для запроса, на левой стороне вашего окна в зависимости от вашего выбора.

Посетите [документацию Tableau](https://help.tableau.com/current/pro/desktop/en-us/gettingstarted_overview.htm), чтобы узнать больше о том, как использовать листы и панели управления Tableau.

### Публикация из Tableau Desktop в Tableau Server

- **Из Desktop в Server** &mdash; Как и в любом рабочем процессе Tableau, вы можете опубликовать свою книгу из Tableau Desktop в Tableau Server. Для пошаговых инструкций посетите [руководство по публикации](https://help.tableau.com/current/pro/desktop/en-us/publish_workbooks_share.htm).

## Важные моменты

**Агрегация**<br />
- Все метрики отображаются с использованием типа агрегации "SUM" в интерфейсе Tableau, и это нельзя изменить с помощью интерфейса Tableau.
- Семантический слой dbt управляет типом агрегации в коде, и он намеренно фиксирован. Имейте в виду, что базовая агрегация в семантическом слое dbt может не быть "SUM" (по умолчанию Tableau).

**Источники данных и отображение**<br />
- В источнике данных "ALL" Tableau отображает все метрики и измерения из семантического слоя dbt на левой стороне. Обратите внимание, что не все метрики и измерения могут быть объединены. Вы получите сообщение об ошибке, если конкретное измерение не может быть совместимо с метрикой (или наоборот). Вы можете использовать сохраненные запросы для меньших объемов данных, которые хотите объединить.
- Для отображения доступных метрик и измерений семантический слой dbt возвращает метаданные для фиктивной таблицы с измерениями и метриками в качестве 'столбцов' этой таблицы. Из-за этого вы не можете фактически запрашивать эту таблицу для предварительного просмотра или извлечений.

**Расчеты и запросы**<br />
- Некоторые вычисления Tableau, такие как "Итого" и "Процент от", могут быть неточными при использовании метрик, агрегированных неаддитивным способом (например, count distinct).
- В любом из наших интерфейсов семантического слоя (не только Tableau) вы должны включать [временное измерение](/docs/build/cumulative#limitations) при работе с любой кумулятивной метрикой, имеющей временной интервал или гранулярность.
- Мы можем поддерживать вычисляемые поля для создания фильтров параметров или динамического выбора метрик и измерений. Однако другие применения вычисляемых полей не поддерживаются.
  - _Примечание: Для случаев использования вычисляемых полей, которые в настоящее время не охвачены, пожалуйста, свяжитесь с <a href="mailto:support@getdbt.com?subject=dbt Semantic Layer feedback">поддержкой dbt</a> и поделитесь ими, чтобы мы могли лучше понять._
- При использовании сохраненных запросов, которые включают фильтры, мы автоматически применим любые фильтры, которые есть в запросе.

## Неподдерживаемая функциональность

Следующие функции Tableau в настоящее время не поддерживаются, однако семантический слой dbt может поддерживать некоторые из этих функций в будущих релизах:
- Обновление страницы источника данных
- Использование режима "Извлечение" для просмотра ваших данных
- Объединение таблиц
- Написание пользовательского SQL / начального SQL
- Расширения таблиц
- Соединения между базами данных
- Некоторые функции в Анализ --> Создать вычисляемое поле
- Фильтрация по временной размерности части даты для кумулятивного типа метрики
- Изменение вашего временного измерения на "Номер недели"
- Выполнение соединений между таблицами, которые создает семантический слой dbt. Он обрабатывает соединения за вас, поэтому нет необходимости соединять компоненты в семантическом слое dbt. Обратите внимание, что вы _можете_ соединять таблицы из семантического слоя dbt с таблицами вне вашей платформы данных.
- Интеграция Tableau в настоящее время не отображает описательные метки, определенные в вашей конфигурации `metrics`, что означает, что пользовательские метки не будут видны, когда эти метрики импортируются/запрашиваются в Tableau.

## Часто задаваемые вопросы
<FAQ path="Troubleshooting/sl-alpn-error" />