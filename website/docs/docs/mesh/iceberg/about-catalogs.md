---
title: "О каталогах Iceberg"
id: about-catalogs
sidebar_label: "О каталогах Iceberg"
description: Узнайте, как каталоги Iceberg вписываются в конфигурации dbt Mesh.
---

Каталоги данных в последнее время оказались в центре внимания индустрии данных — особенно на фоне ажиотажа вокруг Iceberg и управления данными для AI. Этот термин стал чрезмерно употребляемым и теперь охватывает очень широкий набор инструментов. Поэтому прежде чем погружаться в Iceberg catalogs, начнём с основ.

## О каталогах данных

Короткий ответ — это **данные о ваших данных**.

Каталог данных — это централизованный слой управления метаданными, который позволяет пользователям и инструментам находить, понимать и эффективно управлять данными. В своей основе он организует метаданные о наборах данных, включая информацию о схемах, lineage, контроле доступа и бизнес-контексте, помогая как техническим, так и нетехническим пользователям работать с данными более эффективно.

### История каталогов данных

Каталоги данных — не новая концепция.

Словари данных (data dictionaries) были самыми ранними формами каталогов и являлись частью реляционных баз данных. Эти словари хранили метаданные на уровне схем (например, имена таблиц). Они не предназначались для бизнес-пользователей и требовали значительного ручного сопровождения.

Перенесёмся в начало 2010‑х годов, когда индустрия начала активно осваивать [Hadoop](https://hadoop.apache.org/) и data lake‑архитектуры. [Hive Metastore](https://hive.apache.org/) стал стандартом для управления метаданными схем в экосистемах Hadoop. Однако он по‑прежнему был ограничен структурными метаданными, так как не поддерживал lineage, поиск и бизнес-контекст.

Затем появились open source технические каталоги, такие как [Iceberg](https://iceberg.apache.org/terms/), [Polaris](https://polaris.apache.org/) и [Unity Catalog](https://www.unitycatalog.io/), а также бизнес‑каталоги, например [Atlan](https://atlan.com/what-is-a-data-catalog/). В эпоху AI как никогда важно иметь каталоги, способные поддерживать как структурные метаданные, так и бизнес-логику.

Для команд по работе с данными каталоги обычно делятся на две категории:

- **Технические каталоги данных:**  
  Сфокусированы на структурных метаданных, включая информацию о таблицах и колонках, типах данных, местах хранения (что особенно важно для open table formats) и контроле доступа. Обычно они либо «встроенные» (не требуют настройки), либо управляются отдельно и интегрируются в вашу платформу данных. Такие каталоги используются вычислительными движками для поиска и работы с данными.

- **Бизнес‑каталоги данных:**  
  Ориентированы на более широкую аудиторию внутри организации (BI‑аналитики, product‑менеджеры и т.д.). Они дополняют технические метаданные бизнес-контекстом: метриками, бизнес‑определениями, индикаторами качества данных, паттернами использования и ответственными владельцами.

### Почему каталоги данных важны для dbt

Для пользователей dbt, работающих в lakehouse или multi‑engine архитектуре, понимание и использование каталогов данных критически важно по нескольким причинам:

- **Table Discovery:**  
  Модели dbt регистрируются в каталогах. Понимание структуры каталога необходимо для управления наборами данных и для того, чтобы dbt знал, что уже создано и где это находится.

- **Cross-Engine Interoperability:**  
  Iceberg catalogs позволяют наборам данных, созданным одним вычислительным движком, читаться другим. Именно на этом построена кросс‑платформенная функциональность dbt Mesh.

## О каталогах Iceberg

Apache Iceberg — это open table format, разработанный для аналитических наборов данных петабайтного масштаба. Он поддерживает эволюцию схем, time travel, partition pruning и транзакционные операции в распределённых вычислительных движках.

Iceberg catalogs — это критически важный абстрактный слой, который сопоставляет логические имена таблиц с местоположением их метаданных и предоставляет механизм пространств имён (namespace). Они отделяют вычислительные движки от физической организации данных, позволяя нескольким инструментам согласованно работать с одним и тем же набором данных.

Существует несколько типов Iceberg catalogs:
- Iceberg REST
- Iceberg REST compatible
- Delta/Iceberg Hybrid*

Гибридные каталоги поддерживают хранение дублирующихся метаданных таблиц в форматах Iceberg и Delta Lake, что позволяет реализовывать сценарии, при которых Iceberg‑движок читает данные из Delta Lake или наоборот. При этом существуют ограничения, зависящие от конкретной реализации на стороне платформы.

### Как dbt работает с каталогами Iceberg

dbt взаимодействует с Iceberg catalogs через адаптеры двумя способами:

- **Model Materialization:**  
  Когда dbt материализует модель в виде таблицы или представления, при объявленной интеграции с каталогом соответствующий адаптер (Spark, Trino, Snowflake и т.д.) создаёт запись Iceberg‑таблицы в указанном каталоге — как встроенном, так и внешнем.

- **Catalog Integration:**  
  В рамках первоначального релиза нового catalog framework пользователи могут указывать, в какой каталог записываются метаданные таблицы.

Почему это важно? dbt использует и создаёт значительный объём метаданных. Перед каждым запуском dbt необходимо знать, что уже существует, чтобы корректно компилировать код (например, разрешать `{{ref()}}` в фактическое имя таблицы) и понимать, где материализовать объект. Поддержка этих двух механизмов позволяет dbt гибко адаптироваться к окружению, логике кода и use case, определённым в вашем dbt‑проекте.

### Ограничения

Чтобы вычислительный движок имел доступ к каталогу, необходимо корректно настроить сетевое взаимодействие и права доступа. Это означает, что если вы используете warehouse X с каталогом Y, но хотите читать каталог Y из warehouse Z, необходимо убедиться, что warehouse Z может подключаться к каталогу Y. Если включены IP‑ограничения, их нужно снять через allowlisting (возможно только если warehouse поддерживает статические IP‑адреса) либо настроить такие механизмы, как Privatelink, для обеспечения доступа.
