---
title: "Актуальность источников"
id: "source-freshness"
description: "Проверка соответствия актуальности данных ожиданиям и оповещение в случае устаревания."
---

dbt Cloud предоставляет удобный интерфейс для расчетов [актуальности данных источников](/docs/build/sources#source-data-freshness) в dbt. Когда в dbt Cloud настроена задача для снимка актуальности данных источников, dbt Cloud отобразит интерфейс, показывающий состояние последнего снимка. Этот интерфейс предназначен для того, чтобы помочь вам определить, соответствует ли актуальность данных источников соглашению об уровне обслуживания (SLA), которое вы определили для своей организации.

<Lightbox src="/img/docs/dbt-cloud/using-dbt-cloud/data-sources-next.png" title="Источники данных в dbt Cloud"/>

### Включение снимков актуальности источников

[`dbt build`](/reference/commands/build) _не_ включает проверки актуальности источников при построении и тестировании ресурсов в вашем DAG. Вместо этого вы можете использовать один из следующих распространенных шаблонов для определения задач:
- Добавьте `dbt build` на этап выполнения для запуска моделей, тестов и т.д.
- Выберите флажок **Generate docs on run**, чтобы автоматически [генерировать документацию проекта](/docs/collaborate/build-and-view-your-docs).
- Выберите флажок **Run source freshness**, чтобы включить [актуальность источников](#checkbox) в качестве первого шага задачи.

<Lightbox src="/img/docs/dbt-cloud/select-source-freshness.png" title="Выбор актуальности источников"/>

Чтобы включить снимки актуальности источников, сначала убедитесь, что ваши источники настроены для [снимка информации об актуальности](/docs/build/sources#source-data-freshness). Вы можете добавить актуальность источников в список команд на этапах выполнения задачи или включить флажок. Однако вы можете ожидать разные результаты при настройке задачи, выбрав флажок **Run source freshness** по сравнению с добавлением команды в этапы выполнения.

Рассмотрите следующие варианты и результаты:

| Варианты | Результаты |
|--------| ------- |
|  **Выбор флажка <a id="checkbox"></a>** | Флажок **Run source freshness** в ваших **Execution Settings** запустит `dbt source freshness` как первый шаг в вашей задаче и не прервет последующие шаги, если он завершится неудачей. Если вы хотите, чтобы ваша задача была посвящена *исключительно* проверкам актуальности, вам все равно нужно включить хотя бы один фиктивный шаг, например, `dbt compile`. |
| **Добавить как этап выполнения** | Добавьте команду `dbt source freshness` в задачу в любом месте вашего списка этапов выполнения. Однако, если ваши исходные данные устарели &mdash; этот шаг "провалится", и последующие шаги не будут выполнены. dbt Cloud отправит уведомления по электронной почте (если настроено) на основе конечного состояния этого шага. <br /><br /> Вы можете создать новую задачу для снимка актуальности источников. <br /><br /> Если вы *не хотите*, чтобы ваши модели запускались, если ваши исходные данные устарели, то может быть хорошей идеей запустить `dbt source freshness` как первый шаг в вашей задаче. В противном случае мы рекомендуем добавлять `dbt source freshness` как последний шаг в задаче или создавать отдельную задачу только для этой задачи.  |

<Lightbox src="/img/docs/dbt-cloud/using-dbt-cloud/job-step-source-freshness.png" title="Добавление шага для снимка актуальности источников"/>

### Частота снимков актуальности источников
Важно, чтобы ваши задачи по проверке актуальности выполнялись достаточно часто, чтобы фиксировать задержку данных в соответствии с вашими SLA. Вы можете представить, что если у вас есть SLA в 1 час для определенного набора данных, то создание снимка актуальности этого <Term id="table" /> раз в день будет неуместным. Как хорошее практическое правило, вы должны запускать задачи по проверке актуальности источников с частотой как минимум вдвое превышающей ваш минимальный SLA. Вот пример таблицы с разумными частотами снимков, учитывая типичные SLA:

| SLA | Частота снимков |
| --- | ------------------ |
| 1 час | 30 минут |
| 1 день | 12 часов |
| 1 неделя | Около одного раза в день |

## Дополнительное чтение

- Обратитесь к [Артефактам](/docs/deploy/artifacts) для получения дополнительной информации о том, как создавать артефакты dbt Cloud, делиться ссылками на последнюю документацию и делиться отчетами об актуальности источников с вашей командой.
- Актуальность источников для Snowflake рассчитывается с использованием столбца `LAST_ALTERED`. Прочтите о ограничениях в [конфигурациях Snowflake](/reference/resource-configs/snowflake-configs#source-freshness-known-limitation).