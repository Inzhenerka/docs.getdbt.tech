---
title: "Актуальность источников"
id: "source-freshness"
description: "Проверка соответствия актуальности данных ожиданиям и оповещение в случае устаревания."
---

<Constant name="cloud" /> предоставляет удобный интерфейс для работы с расчетами [актуальности исходных данных](/docs/build/sources#source-data-freshness) в dbt. Когда задание <Constant name="cloud" /> настроено на создание snapshot’ов актуальности исходных данных, <Constant name="cloud" /> отображает пользовательский интерфейс, показывающий состояние самого последнего snapshot’а. Этот интерфейс предназначен для того, чтобы помочь вам определить, соответствует ли актуальность ваших исходных данных соглашению об уровне сервиса (SLA), которое вы определили для своей организации.

<Lightbox src="/img/docs/dbt-cloud/using-dbt-cloud/data-sources-next.png" title="Data Sources in dbt"/>

### Включение снимков актуальности источников

[`dbt build`](/reference/commands/build) _не_ включает проверки свежести источников (source freshness) при сборке и тестировании ресурсов в вашем DAG. Вместо этого вы можете использовать один из следующих распространённых шаблонов для определения jobs:

- Добавьте `dbt build` в шаг run, чтобы запускать модели, тесты и т.д.
- Установите флажок **Generate docs on run**, чтобы автоматически [генерировать документацию проекта](/docs/explore/build-and-view-your-docs).
- Установите флажок **Run source freshness**, чтобы включить [проверку свежести источников](#checkbox) в качестве первого шага job.

<Lightbox src="/img/docs/dbt-cloud/select-source-freshness.png" title="Выбор актуальности источников"/>

Чтобы включить снимки актуальности источников, сначала убедитесь, что ваши источники настроены для [снимка информации об актуальности](/docs/build/sources#source-data-freshness). Вы можете добавить актуальность источников в список команд на этапах выполнения задачи или включить флажок. Однако вы можете ожидать разные результаты при настройке задачи, выбрав флажок **Run source freshness** по сравнению с добавлением команды в этапы выполнения.

Рассмотрите следующие варианты и результаты:

| Варианты | Результаты |
|--------| ------- |
| **Выбрать чекбокс <a id="checkbox"></a>** | Чекбокс **Run source freshness** в разделе **Execution Settings** запускает команду `dbt source freshness` в качестве первого шага вашего job и не прерывает последующие шаги, даже если проверка завершится с ошибкой. Если вам нужен job, *исключительно* предназначенный для проверки freshness, всё равно необходимо добавить как минимум один шаг‑заглушку, например `dbt compile`. |
| **Добавить как шаг выполнения** | Добавьте команду `dbt source freshness` в job в любом месте списка шагов выполнения. Однако, если исходные данные устарели &mdash; этот шаг «упадёт», и последующие шаги выполняться не будут. <Constant name="cloud" /> отправит email‑уведомления (если они настроены) в зависимости от итогового состояния этого шага. <br /><br /> Вы можете создать отдельный job для снятия снапшотов freshness источников. <br /><br /> Если вы *не хотите*, чтобы модели запускались при устаревших исходных данных, хорошей идеей будет запускать `dbt source freshness` первым шагом в job. В противном случае мы рекомендуем добавлять `dbt source freshness` последним шагом в job или создавать отдельный job специально для этой задачи. |

<Lightbox src="/img/docs/dbt-cloud/using-dbt-cloud/job-step-source-freshness.png" title="Добавление шага для снимка актуальности источников"/>

### Частота снимков актуальности источников
Важно, чтобы ваши задачи по проверке актуальности выполнялись достаточно часто, чтобы фиксировать задержку данных в соответствии с вашими SLA. Вы можете представить, что если у вас есть SLA в 1 час для определенного набора данных, то создание снимка актуальности этого <Term id="table" /> раз в день будет неуместным. Как хорошее практическое правило, вы должны запускать задачи по проверке актуальности источников с частотой как минимум вдвое превышающей ваш минимальный SLA. Вот пример таблицы с разумными частотами снимков, учитывая типичные SLA:

| SLA | Частота снимков |
| --- | ------------------ |
| 1 час | 30 минут |
| 1 день | 12 часов |
| 1 неделя | Около одного раза в день |

## Дополнительное чтение

- Обратитесь к разделу [Artifacts](/docs/deploy/artifacts), чтобы узнать больше о том, как создавать артефакты <Constant name="cloud" />, делиться ссылками на актуальную документацию и распространять отчёты о свежести источников внутри команды.
- Свежесть источников для Snowflake рассчитывается с использованием столбца `LAST_ALTERED`. Подробнее об ограничениях читайте в разделе [Snowflake configs](/reference/resource-configs/snowflake-configs#source-freshness-known-limitation).
