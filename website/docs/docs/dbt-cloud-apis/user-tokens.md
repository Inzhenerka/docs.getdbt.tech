---
title: "Пользовательские токены"
id: "user-tokens"
pagination_next: "docs/dbt-cloud-apis/service-tokens"
---

# Персональные токены доступа с привязкой к аккаунту <Lifecycle status="team,enterprise"/>

:::Warning

Пользовательские API токены устарели и больше не работают. [Перейдите](#migrate-deprecated-user-api-keys-to-personal-access-tokens) на персональные токены доступа, чтобы возобновить работу сервисов.

:::

Каждый пользователь dbt Cloud с [лицензией разработчика](https://docs.getdbt.com/docs/cloud/manage-access/seats-and-users) может создать новый персональный токен доступа (PAT) для доступа к API dbt Cloud и dbt Cloud CLI. Этот токен может выполнять запросы к API dbt Cloud от имени пользователя. Для доступа к API и ресурсам dbt Cloud от имени _аккаунта_ мы рекомендуем использовать сервисные токены. Узнайте больше о [том, какой тип токена вам следует использовать](/docs/dbt-cloud-apis/authentication#which-token-type-should-you-use), чтобы понять различия между токенами.

PAT наследуют разрешения пользователя, который их создал. Например, если пользователь с лицензией разработчика и ролью администратора проекта, имеющий доступ к определенным проектам, создает PAT, токен получит роль администратора проекта с доступом к тем же проектам, что и у пользователя. Эти токены также привязаны к аккаунту, поэтому, если пользователь имеет доступ к более чем одному аккаунту dbt Cloud с тем же адресом электронной почты, ему необходимо создать уникальный PAT для каждого из этих аккаунтов.

## Создание персонального токена доступа

Создание персонального токена доступа с привязкой к аккаунту (PAT) требует всего несколько шагов.
1. Перейдите в **Настройки аккаунта**, разверните **API токены** и нажмите **Персональные токены**.
2. Нажмите **Создать персональный токен доступа**.
3. Дайте токену описательное имя и нажмите **Сохранить**.

4. Скопируйте токен перед закрытием окна. _Он не будет доступен позже, и вам придется создать новый токен, если вы его потеряете._

Для поддержания лучших практик безопасности рекомендуется регулярно менять ваши PAT. Для этого создайте новый токен и удалите старый, как только он будет заменен.

## Удаление персонального токена доступа

Чтобы навсегда удалить PAT:

1. Перейдите в **Настройки аккаунта**, разверните **API токены** и нажмите **Персональные токены**.
2. Найдите токен, который хотите удалить, и нажмите "X" справа от полей описания токена.
3. **Подтвердите удаление**, и токен больше не будет действителен.

## Переход от устаревших пользовательских API ключей к персональным токенам доступа

Переход на PAT критически важен, если вы используете пользовательские API ключи. Текущий API ключ находится в **Личные настройки → API ключ**.

Есть несколько вещей, которые нужно понять, если вы используете пользовательский API ключ:

* Персональные токены доступа более безопасны.
    * Чтобы обеспечить минимальные привилегии и высокую безопасность для ваших аккаунтов dbt Cloud, мы настоятельно рекомендуем перейти на новые персональные токены доступа с привязкой к аккаунту.
* Вы должны создавать и использовать уникальные токены в каждом из ваших аккаунтов dbt Cloud, которые используют один и тот же адрес электронной почты.
    * Например, если paul.atreides@example.com принадлежит двум аккаунтам dbt Cloud: Spice Harvesting Account и Guild Navigator Account. До этого обновления использовался один и тот же API ключ для доступа к обоим аккаунтам.
    * После этого обновления Пол должен индивидуально зайти в эти аккаунты и создать уникальный PAT для каждого аккаунта, к которому он хочет получить доступ через API. Эти PAT привязаны к аккаунту, а не к пользователю.
* Поведение API конечных точек для кросс-аккаунтов изменится при использовании персональных токенов доступа.
    * Это, в частности, /v2/accounts и /v3/accounts. Поскольку все PAT теперь привязаны к аккаунту, получение всех аккаунтов, связанных с именем пользователя, невозможно. /v3/accounts будет возвращать только метаданные аккаунта, которые относятся к используемому PAT.
    * Метаданные пользовательского аккаунта будут содержать информацию только о конкретном аккаунте, в рамках которого выполняется запрос.
    * Любые другие аккаунты, принадлежащие этому пользовательскому аккаунту, должны быть запрошены через PAT, принадлежащий этому аккаунту.

:::warning Не документированные API

Если вы используете какие-либо не документированные и не поддерживаемые API конечные точки, обратите внимание, что они могут быть устаревшими без какого-либо уведомления. Если вы используете какие-либо не документированные конечные точки и у вас есть случаи использования, которые не удовлетворяются текущим API, пожалуйста, свяжитесь с [support@getdbt.com](mailto:support@getdbt.com).

:::

### Использование персональных токенов доступа

Вы используете пользовательский API ключ для доступа к API dbt Cloud в каких-либо ваших рабочих процессах? Если нет, то вам не нужно предпринимать никаких действий. Если вы используете пользовательский API ключ, пожалуйста, следуйте инструкциям ниже.

1. Составьте список всех мест, где вы делаете вызов к API dbt Cloud, используя пользовательский API ключ dbt Cloud.
2. Создайте новый персональный токен доступа в **Настройки аккаунта → API токены → Персональные токены.**
3. Создайте и скопируйте новый PAT, чтобы заменить старый пользовательский API ключ.
4. Убедитесь, что вы используете PAT только там, где это необходимо. Для потоков, требующих учетной записи сервиса, используйте сервисный токен.