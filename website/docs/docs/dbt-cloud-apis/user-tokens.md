---
title: "Токены пользователей"
id: "user-tokens"
pagination_next: "docs/dbt-cloud-apis/service-tokens"
---

# Личные токены доступа, привязанные к аккаунту <Lifecycle status="team,enterprise"/>

:::Warning

Токены API пользователей устарели и больше не будут работать. [Перейдите](#migrate-deprecated-user-api-keys-to-personal-access-tokens) на личные токены доступа, чтобы возобновить работу сервисов.

:::

Каждый пользователь dbt Cloud с [лицензией разработчика](https://docs.getdbt.com/docs/cloud/manage-access/seats-and-users) может создать новый личный токен доступа (PAT) для доступа к API dbt Cloud и CLI dbt Cloud. Этот токен может выполнять запросы к API dbt Cloud от имени пользователя. Для доступа к API и ресурсам dbt Cloud от имени _аккаунта_ мы рекомендуем использовать сервисные токены. Узнайте больше о [том, какой тип токена вам следует использовать](/docs/dbt-cloud-apis/authentication#which-token-type-should-you-use), чтобы понять различия между токенами.

PAT наследуют разрешения пользователя, который их создал. Например, если пользователь с лицензией разработчика и ролью администратора проекта создает PAT, токен получит роль администратора проекта с доступом к тем же проектам, что и у пользователя. Эти токены также специфичны для аккаунта, поэтому, если у пользователя есть доступ к нескольким аккаунтам dbt Cloud с одним и тем же адресом электронной почты, ему необходимо создать уникальный PAT для каждого из этих аккаунтов.

## Создание личного токена доступа

Создание личного токена доступа, привязанного к аккаунту (PAT), требует всего лишь нескольких шагов.
1. Перейдите в **Настройки аккаунта**, разверните **API токены** и нажмите **Личные токены**.
2. Нажмите **Создать личный токен доступа**.
3. Дайте токену описательное имя и нажмите **Сохранить**.

4. Скопируйте токен перед закрытием окна. _После этого он не будет доступен, и вам придется создать новый токен, если вы его потеряете._

Чтобы поддерживать лучшие практики безопасности, рекомендуется регулярно обновлять ваши PAT. Для этого создайте новый токен и удалите старый, как только новый будет готов.

## Удаление личного токена доступа

Чтобы навсегда удалить PAT:

1. Перейдите в **Настройки аккаунта**, разверните **API токены** и нажмите **Личные токены**.
2. Найдите токен, который вы хотите удалить, и нажмите "X" справа от полей описания токена.
3. **Подтвердите удаление**, и токен больше не будет действителен.

## Миграция устаревших пользовательских API ключей на личные токены доступа

Миграция на PAT критически важна, если вы сегодня используете пользовательские API ключи. Текущий API ключ находится в разделе **Личные настройки → API ключ**.

Есть несколько моментов, которые следует понимать, если вы сегодня используете пользовательский API ключ:

* Личные токены доступа более безопасны.
    * Чтобы обеспечить минимальные привилегии и высокий уровень безопасности для ваших аккаунтов dbt Cloud, мы настоятельно рекомендуем перейти на новые личные токены доступа, привязанные к аккаунту.
* Вы должны создавать и использовать уникальные токены в каждом из ваших аккаунтов dbt Cloud, которые используют один и тот же адрес электронной почты.
    * Например, если paul.atreides@example.com принадлежит двум аккаунтам dbt Cloud: Spice Harvesting Account и Guild Navigator Account. До этого релиза использовался один и тот же API ключ для доступа к обоим аккаунтам.
    * После этого релиза Полу необходимо будет индивидуально зайти в эти аккаунты и создать уникальный PAT для каждого аккаунта, к которому он хочет получить доступ через API. Эти PAT специфичны для аккаунта, а не для пользователя.
* API конечные точки для межаккаунтного доступа изменят свое поведение при использовании личных токенов доступа.
    * Это касается /v2/accounts и /v3/accounts. Поскольку все PAT теперь специфичны для аккаунта, получение всех аккаунтов, связанных с именем пользователя, не может работать. /v3/accounts будет возвращать только метаданные аккаунта, относящиеся к используемому PAT.
    * Метаданные пользовательского аккаунта будут содержать только информацию о конкретном аккаунте, в рамках которого был сделан запрос.
    * Любые другие аккаунты, принадлежащие этому пользовательскому аккаунту, необходимо будет запрашивать через PAT, который принадлежит этому аккаунту.

:::warning Не задокументированные API

Если вы используете какие-либо незадокументированные и неподдерживаемые конечные точки API, обратите внимание, что они могут быть устаревшими без предварительного уведомления. Если вы используете какие-либо незадокументированные конечные точки и у вас есть случаи использования, которые не удовлетворяются текущим API, пожалуйста, свяжитесь с [support@getdbt.com](mailto:support@getdbt.com).

:::

### Использование личных токенов доступа

Вы используете сегодня пользовательский API ключ для доступа к API dbt Cloud в каких-либо ваших рабочих процессах? Если нет, вам не нужно предпринимать никаких действий. Если вы используете пользовательский API ключ, пожалуйста, следуйте приведенным ниже инструкциям.

1. Составьте список всех мест, где вы вызываете API dbt Cloud, используя пользовательский API ключ dbt Cloud.
2. Создайте новый личный токен доступа в разделе **Настройки аккаунта → API токены → Личные токены**.
3. Создайте и скопируйте новый PAT, чтобы заменить старый пользовательский API ключ.
4. Убедитесь, что вы используете PAT только там, где это необходимо. Для потоков, которые требуют сервисного аккаунта, пожалуйста, используйте сервисный токен.