---
title: "2022 заметки о релизах dbt Cloud"
description: "Заметки о релизах dbt Cloud за 2022 год"
id: "2022-release-notes"
sidebar: "Заметки о релизах 2022 года"
pagination_next: null
pagination_prev: null
---

Архивированные заметки о релизах dbt Cloud за 2022 год

## Декабрь 2022

### Значение по умолчанию для потоков изменено на 4

Потоки помогают параллелизовать выполнение узлов в направленном ациклическом графе dbt [(DAG)](https://docs.getdbt.com/terms/dag).

Ранее значение потоков по умолчанию составляло 1, что могло увеличить время выполнения вашего проекта. Чтобы помочь сократить время выполнения вашего проекта, значение по умолчанию для потоков в пользовательских профилях теперь установлено на 4 потока.

Вы можете указать собственное количество потоков, если хотите больше или меньше параллелизации.

Для получения дополнительной информации прочитайте [Понимание потоков](/docs/running-a-dbt-project/using-threads).

### Создание новой задачи больше не запускает выполнение по умолчанию

Чтобы сэкономить вычислительное время, новые задачи больше не будут запускаться по умолчанию. Когда вы создаете новую задачу в dbt Cloud, вы можете запустить задачу, выбрав **Запуск по расписанию** и заполнив необходимую информацию о расписании и времени.

Для получения дополнительной информации обратитесь к [Развертыванию задач](/docs/deploy/deploy-jobs).

<Lightbox src="/img/docs/release-notes/new-jobs-default-as-off.png" title="По умолчанию для вновь созданных задач"/>

### Приватные пакеты должны быть клонированы с использованием токенов доступа, предоставленных переменными окружения

Поддерживаемый метод клонирования приватных пакетов GitHub — это [метод токена git](/docs/build/packages#git-token-method), при котором соответствующий токен доступа передается в URL-адрес репозитория пакета с помощью переменной окружения.

Небольшое количество людей смогли клонировать приватные пакеты, используя родное приложение GitHub dbt, не предоставляя явно токен доступа. Эта функциональность устаревает, так как она ограничена в гибкости.

Если вы использовали пакет, размещенный в приватном репозитории на GitHub, вам необходимо начать передавать токен доступа в URL.

Пример передачи токена доступа:

<File name='packages.yml'>

```yaml

packages:
- git: "https://{{env_var('DBT_ENV_SECRET_GIT_CREDENTIAL')}}@github.com/dbt-labs/awesome_repo.git"

```

</File>


## Ноябрь 2022

### Опыт работы dbt Cloud + Databricks становится еще лучше

dbt Cloud — это самый простой и надежный способ разработки и развертывания проекта dbt. Он помогает устранить сложность, одновременно предоставляя вам больше функций и лучшую производительность. Теперь доступен более простой опыт подключения к Databricks с поддержкой Unity Catalog и лучшими значениями по умолчанию для моделирования.

Для всех клиентов Databricks, уже использующих dbt Cloud с адаптером dbt-spark, теперь вы можете [мигрировать](/guides/migrate-from-spark-to-databricks) ваше подключение к [адаптеру dbt-databricks](/docs/core/connect-data-platform/databricks-setup), чтобы получить преимущества. [Databricks](https://www.databricks.com/blog/2022/11/17/introducing-native-high-performance-integration-dbt-cloud.html) стремится поддерживать и улучшать адаптер, поэтому этот интегрированный опыт продолжит предоставлять лучшее из dbt и Databricks.

Посмотрите наш [live blog post](https://www.getdbt.com/blog/dbt-cloud-databricks-experience/) для получения дополнительной информации.

### Дополнительные функции в новом и обновленном IDE

Обновленная версия IDE dbt Cloud запустила четыре совершенно новых дополнительных функции, что делает разработку в IDE проще и быстрее.

Новые функции:

- **Форматирование** &mdash; Форматируйте ваши SQL-файлы dbt в едином стиле кода одним нажатием кнопки. Это использует инструмент [sqlfmt](https://github.com/tconbeer/sqlfmt).
- **Просмотр различий Git** &mdash; Подсвечивает изменения в файле перед открытием запроса на слияние.
- **Автозаполнение dbt** &mdash; Четыре новых типа функций автозаполнения, чтобы помочь вам разрабатывать быстрее:
    - Используйте `ref` для автозаполнения имен ваших моделей
    - Используйте `source` для автозаполнения имени источника + имени таблицы
    - Используйте `macro` для автозаполнения ваших аргументов
    - Используйте `env var` для автозаполнения переменной окружения
- **Темный режим** &mdash; Используйте темный режим в IDE dbt Cloud для низкоосвещенных условий.

Читать больше о всех [функциях Cloud IDE](/docs/cloud/dbt-cloud-ide/develop-in-the-cloud#cloud-ide-features).

### Уведомление об устаревании классического IDE

В декабре 2022 года dbt Labs объявит об устаревании классического IDE. Новый и обновленный IDE (/docs/cloud/dbt-cloud-ide/develop-in-the-cloud) будет доступен для _всех_ пользователей dbt Cloud. Вы больше не сможете получить доступ к классическому IDE, и dbt Labs может внести изменения, которые нарушат работу классического IDE.

С устареванием dbt Labs будет поддерживать только обновленную версию IDE dbt Cloud.

Клиенты Virtual Private Cloud (VPC), у которых есть вопросы о том, когда это изменение повлияет на вашу учетную запись, могут обратиться к вашей команде по работе с клиентами или в службу поддержки за помощью.


## Октябрь 2022

### Объявление о нативной интеграции dbt Cloud с Azure DevOps

dbt Cloud теперь предлагает нативную интеграцию с Azure DevOps для клиентов dbt Cloud на корпоративном плане. Мы создали эту интеграцию, чтобы устранить трение, повысить безопасность и открыть новые возможности для наших клиентов. [Настройка интеграции Azure DevOps](/docs/cloud/git/connect-azure-devops) в dbt Cloud предоставляет:
  - простую настройку проекта dbt,
  - улучшенную безопасность,
  - соблюдение разрешений репозитория в IDE dbt Cloud, и
  - dbt Cloud Slim CI.

Посмотрите наш [live blog post](https://www.getdbt.com/blog/dbt-cloud-integration-azure-devops/) для получения дополнительной информации!

### Введение в более быстрый, улучшенный и мощный Cloud IDE

Новая версия Cloud IDE упрощает создание вами моделей данных, не задумываясь о настройке окружения и конфигурации.

Новый Cloud IDE включает в себя улучшения производительности, улучшения эргономики и некоторые приятные дополнения!

Некоторые из улучшений включают:

- Улучшенное время запуска Cloud IDE (запуск IDE), время взаимодействия (сохранение и коммит) и надежность.
- Лучшая организация и навигация с такими функциями, как перетаскивание файлов, хлебные крошки, выпадающее меню кнопки сборки и многое другое.
- Вы можете использовать новые функции, такие как автоформатирование вашего файла, автозаполнение имен моделей и просмотр различий Git, чтобы увидеть ваши изменения перед созданием запроса на слияние.

Читать больше о новых [функциях Cloud IDE](/docs/cloud/dbt-cloud-ide/develop-in-the-cloud#cloud-ide-features) и ознакомьтесь с [новым и улучшенным Cloud IDE](https://www.getdbt.com/blog/new-improved-cloud-ide/) для получения дополнительной информации!

## Сентябрь 2022

### Предупреждение об устаревании конечной точки API List Steps

14 октября 2022 года dbt Labs объявляет об устаревании конечной точки API List Steps. С 14 октября любые GET-запросы к этой конечной точке будут завершаться неудачей. Пожалуйста, подготовьтесь к прекращению использования конечной точки List Steps как можно скорее.

dbt Labs продолжит поддерживать конечную точку [Retrieve Run](https://docs.getdbt.com/dbt-cloud/api-v2#/operations/Retrieve%20Run), которая является жизнеспособной альтернативой в зависимости от случая использования.

Вы можете получить шаги выполнения для отдельного выполнения с помощью GET-запроса к следующему URL, заменив `YOUR_ACCESS_URL` на [соответствующий Access URL](/docs/cloud/about-cloud/access-regions-ip-addresses) для вашего региона и плана:

`https://YOUR_ACCESS_URL/api/v2/accounts/{accountId}/runs/{runId}/?include_related=["run_steps"]`

### Запрос данных за предыдущие три месяца с использованием API метаданных

Чтобы сделать API метаданных более масштабируемым и улучшить его задержку, мы внедрили ограничения на хранение данных. Теперь API метаданных может запрашивать данные за предыдущие три месяца. Например, если сегодня 1 марта, вы можете запрашивать данные с 1 января.

Для получения дополнительной информации смотрите [Metadata API](/docs/dbt-cloud-apis/discovery-api)

## Август 2022

### Поддержка кросс-базовых источников на экземплярах Redshift RA3

Кросс-базовые запросы для экземпляров RA3 теперь поддерживаются проектами dbt Cloud, использующими подключение Redshift.

С помощью кросс-базовых запросов вы можете бесшовно запрашивать данные из любой базы данных в кластере, независимо от того, к какой базе данных вы подключены с помощью dbt.

Конфигурация подключения [connection configuration](https://docs.getdbt.com/reference/warehouse-profiles/redshift-profile) `ra3_node` была установлена по умолчанию на `true`. Это позволяет пользователям:

- воспользоваться всеми возможностями узлов RA3,
- генерировать соответствующую документацию dbt.

## Июль 2022

### Функция больших DAG

Теперь вы можете выбрать **Отобразить наследие**, чтобы визуализировать большие DAG.

Большие DAG могут занимать много времени (10 секунд или более, если не минуты) для рендеринга и могут вызывать сбои браузеров.

Новая кнопка предотвращает автоматический рендеринг больших DAG. Вместо этого вы можете выбрать **Отобразить наследие**, чтобы загрузить визуализацию. Это должно затронуть около 15% DAG.

<Lightbox src="/img/docs/dbt-cloud/dag v1.1.56 release.png" title="Отобразить наследие"/>

## Май 2022

### Обновление истекших токенов доступа в IDE при использовании GitLab

22 мая GitLab изменил способ обработки [OAuth токенов доступа, которые не истекают](https://docs.gitlab.com/ee/update/deprecations.html#oauth-tokens-without-expiration). Мы обновили логику нашего IDE, чтобы более корректно обрабатывать истечение токенов OAuth. Теперь, в первый раз, когда ваш токен истекает после 2 часов непрерывного использования IDE, вам нужно будет повторно аутентифицироваться в GitLab, чтобы обновить истекший токен OAuth. Мы будем обрабатывать последующие обновления за вас, если вы предоставите авторизацию при повторной аутентификации.

Этот дополнительный уровень безопасности в IDE доступен только для корпоративного плана dbt Cloud.

## Апрель 2022

### Журнал аудита

Чтобы просмотреть действия, выполненные людьми в вашей организации, dbt предоставляет журналы аудируемых пользовательских и системных событий. Журнал аудита dbt Cloud перечисляет события, вызванные в вашей организации за последние 90 дней.

Журнал аудита включает в себя такие детали, как кто выполнил действие, что это было за действие и когда оно было выполнено. Для получения дополнительной информации ознакомьтесь с [журналом аудита для dbt Cloud Enterprise](/docs/cloud/manage-access/audit-log).

### Устранение случайного удаления учетных данных при редактировании окружения

Мы исправили ошибку, при которой обновление незашифрованных полей (например, потоков, имени схемы) в настройках окружения приводило к удалению секретных полей (например, пароля, ключа, деталей учетных данных) из этого окружения. Теперь пользователи могут свободно обновлять настройки окружения, не опасаясь случайного удаления учетных данных.

### Подтверждение электронной почты

Чтобы повысить безопасность создания пользователей, пользователи dbt Cloud, созданные с использованием SAML Just-in-Time (JIT), теперь будут подтверждать свою личность по электронной почте для активации своей учетной записи. Использование электронной почты для подтверждения личности гарантирует, что у пользователя по-прежнему есть доступ к тому же адресу электронной почты, который он использует для входа через SAML.

### Улучшение производительности планировщика

Мы развернули наш новый распределенный планировщик, который имеет гораздо более быстрое время подготовки, особенно в начале часа. Мы делимся дополнительной информацией о нашей работе и улучшениях в нашем [блог-посте о новостях продукта](https://www.getdbt.com/blog/a-good-problem-to-have/).

## Март 2022

### Проблемы с нестабильным интернетом больше не вызывают сообщение о тайм-ауте сессии

Мы исправили проблему, при которой нестабильное интернет-соединение могло неожиданно вызывать сообщение "Сессия IDE истекла". Люди, использующие VPN, чаще всего сталкивались с этой проблемой.

Мы обновили логику проверки состояния, чтобы теперь она исключала проблемы с подключением на стороне клиента из проверки состояния сессии IDE. Если вы потеряете интернет-соединение, мы больше не будем обновлять состояние проверки состояния. Теперь потеря интернет-соединения больше не вызовет это неожиданное сообщение.

<Lightbox src="/img/docs/dbt-cloud/Fix Session Timeout.png" title="Исправление тайм-аута сессии"/>

### Разделение времени ожидания на время ожидания и время подготовки

Теперь dbt Cloud показывает "время ожидания" и "время подготовки" для выполнения, которое ранее выражалось в совокупности как "время в очереди". Время ожидания фиксирует время, которое dbt Cloud ждет, чтобы запустить вашу задачу, если нет доступного слота для выполнения или если предыдущее выполнение той же задачи все еще выполняется. Время подготовки представляет собой время, необходимое dbt Cloud для подготовки вашей задачи к выполнению в вашем облачном хранилище данных.

<Lightbox src="/img/docs/dbt-cloud/v1.1.46releasenotes_img1.png" title="Новое время подготовки и время ожидания"/>

## Февраль 2022

### Обновления DAG и улучшения производительности

Любите DAG в IDE так же, как и мы? Теперь, когда вы нажимаете на узел в DAG, файл модели или конфигурации откроется в новой вкладке в IDE, чтобы вы могли напрямую просмотреть или отредактировать код. Мы продолжим внедрять лучшие функции для разработчиков в течение года.

#### Улучшения производительности и улучшения

* Обновлены рекомендуемые команды dbt в IDE, чтобы включить команды dbt Core v1.0, такие как "build" и аргумент "--select".

### Сервисные токены и исправления ошибок

Сервисные токены теперь могут быть назначены с детализированными разрешениями для обеспечения минимально необходимого доступа. Если вы находитесь на корпоративном плане, вы можете назначить любой набор разрешений для предприятия вновь выданным сервисным токенам. Если вы находитесь на командном плане, вы можете назначить набор разрешений администратора задач вновь выданным сервисным токенам. Мы настоятельно рекомендуем вам переиздать сервисные токены с этими новыми разрешениями, чтобы повысить вашу безопасность! Смотрите документацию [здесь](https://docs.getdbt.com/docs/dbt-cloud-apis/service-tokens#permissions-for-service-account-tokens).

#### Новые продукты и функции

- Мы присоединяемся к [программе партнеров по сканированию секретов GitHub](https://docs.github.com/en/developers/overview/secret-scanning-partner-program), чтобы лучше защитить ваш токен от случайного публичного раскрытия и потенциального мошеннического использования.

#### Исправления ошибок

- Учетные данные больше не удаляются случайно, когда пользователь обновляет настройки окружения.

## Январь 2022

### Автозаполнение фрагментов для SQL и YAML файлов в IDE

Некоторые примечательные улучшения включают автозаполнение фрагментов для SQL и YAML файлов в IDE, которые теперь доступны для использования! Мы также добавили [новую страницу уровня метрик](https://docs.getdbt.com/docs/dbt-cloud/using-dbt-cloud/cloud-metrics-layer) в docs.getdbt.com, чтобы помочь вам начать думать о слое метрик в dbt Cloud.

#### Улучшения производительности и улучшения

* Имена веток теперь по умолчанию устанавливаются на "main" вместо "master" в новых управляемых и неуправляемых Git репозиториях.
* Обновите фрагменты автозаполнения IDE.

### Время модели для многопользовательских команд и корпоративных учетных записей

Мы начали новый год с подарка! Многопользовательские командные и корпоративные учетные записи теперь могут использовать новую вкладку [Model timing](https://docs.getdbt.com/docs/dbt-cloud/using-dbt-cloud/cloud-model-timing-tab) в dbt Cloud. Вы можете использовать эту вкладку, чтобы более подробно изучить модели с длительным временем выполнения, чтобы увидеть, нуждаются ли они в рефакторинге или перенастройке.

#### Улучшения производительности и улучшения

* Мы добавили проверку имен на стороне клиента для создания файлов или папок.