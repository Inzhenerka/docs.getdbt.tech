---
title: "Примечания к выпускам dbt Cloud за 2022 год"
description: "Примечания к выпускам dbt Cloud за 2022 год"
id: "2022-release-notes"
sidebar: "2022 release notes"
pagination_next: null
pagination_prev: null
---

Архивные примечания к выпускам для <Constant name="cloud" /> за 2022 год

## Декабрь 2022

### Значение по умолчанию для потоков изменено на 4

Потоки помогают параллелизировать выполнение узлов в направленном ациклическом графе dbt [(DAG)](https://docs.getdbt.tech/terms/dag).

Ранее значение потоков по умолчанию было 1, что могло увеличивать время выполнения вашего проекта. Чтобы сократить время выполнения проекта, значение потоков в пользовательских профилях теперь по умолчанию установлено на 4 потока.

Вы можете задать пользовательское количество потоков, если предпочитаете больше или меньше параллелизации.

Для получения дополнительной информации прочитайте [Понимание потоков](/docs/running-a-dbt-project/using-threads).

### Создание новой задачи больше не запускает выполнение по умолчанию

Чтобы сократить время вычислений, новые задания по умолчанию больше не будут запускаться автоматически. При создании нового задания в <Constant name="cloud" /> вы можете настроить его запуск, выбрав **Run on schedule** и указав нужное расписание и параметры времени.

Для получения дополнительной информации обратитесь к [Развертывание задач](/docs/deploy/deploy-jobs).

<Lightbox src="/img/docs/release-notes/new-jobs-default-as-off.png" title="По умолчанию для вновь созданных задач"/>

### Приватные пакеты должны клонироваться с использованием токенов доступа, предоставленных переменными окружения

Поддерживаемый метод клонирования приватных пакетов GitHub — это [метод токена git](/docs/build/packages#git-token-method), где соответствующий токен доступа передается в URL репозитория пакета с помощью переменной окружения.

Небольшое количество людей могли клонировать приватные пакеты, используя собственное приложение GitHub dbt без явного предоставления токена доступа. Эта функциональность устаревает, так как она ограничена в гибкости.

Если вы использовали пакет, размещенный в приватном репозитории на GitHub, вы должны начать передавать токен доступа в URL.

Пример передачи токена доступа:

<File name='packages.yml'>

```yaml

packages:
- git: "https://{{env_var('DBT_ENV_SECRET_GIT_CREDENTIAL')}}@github.com/dbt-labs/awesome_repo.git"

```

</File>

## Ноябрь 2022

### Опыт работы с dbt Cloud + Databricks становится еще лучше

dbt Cloud — это самый простой и надежный способ разработки и развертывания проекта dbt. Он помогает устранить сложность, предоставляя больше функций и лучшую производительность. Теперь доступен более простой опыт подключения к Databricks с поддержкой Unity Catalog и улучшенными настройками моделирования.

<Constant name="cloud" /> — это самый простой и надёжный способ разрабатывать и развёртывать проект dbt. Он помогает убрать лишнюю сложность, одновременно предоставляя больше возможностей и более высокую производительность. Теперь для вас доступен более простой процесс подключения к Databricks с поддержкой Unity Catalog от Databricks и улучшенными настройками моделирования по умолчанию.

Для всех клиентов Databricks, которые уже используют <Constant name="cloud" /> с адаптером dbt-spark, теперь доступна возможность [мигрировать](/guides/migrate-from-spark-to-databricks) подключение на [адаптер dbt-databricks](/docs/core/connect-data-platform/databricks-setup), чтобы получить все преимущества. Компания [Databricks](https://www.databricks.com/blog/2022/11/17/introducing-native-high-performance-integration-dbt-cloud.html) стремится поддерживать и развивать этот адаптер, поэтому интегрированный опыт будет и дальше обеспечивать лучшее из dbt и Databricks.

### Дополнительные функции в новом и обновленном IDE

Обновленная версия dbt Cloud IDE запустила четыре совершенно новых дополнительных функции, которые облегчают и ускоряют разработку в IDE.

Обновлённая версия <Constant name="cloud_ide" /> получила четыре совершенно новые дополнительные функции, которые делают разработку в <Constant name="cloud_ide" /> проще и быстрее.

- **Форматирование** &mdash; Форматируйте ваши dbt SQL файлы в единый стиль кода нажатием кнопки. Это использует инструмент [sqlfmt](https://github.com/tconbeer/sqlfmt).
- **Просмотр различий Git** &mdash; Подсвечивает изменения в файле перед открытием pull-запроса.
- **Автозаполнение dbt** &mdash; Четыре новых типа функций автозаполнения, которые помогут вам разрабатывать быстрее:
    - Используйте `ref` для автозаполнения имен моделей
    - Используйте `source` для автозаполнения имени источника + имени таблицы
    - Используйте `macro` для автозаполнения аргументов
    - Используйте `env var` для автозаполнения переменных окружения
- **Темный режим** &mdash; Используйте темный режим в dbt Cloud IDE для условий с низкой освещенностью.

- **Форматирование** &mdash; Приводите ваши SQL‑файлы dbt к единому стилю кода одним нажатием кнопки. Для этого используется инструмент [sqlfmt](https://github.com/tconbeer/sqlfmt).
- **Режим сравнения (<Constant name="git" /> diff view)** &mdash; Подсвечивает изменения в файле перед открытием pull request.
- **Автодополнение dbt** &mdash; Доступны четыре новых типа автодополнения, которые помогают разрабатывать быстрее:
    - Используйте `ref` для автодополнения имён моделей
    - Используйте `source` для автодополнения имени источника и имени таблицы
    - Используйте `macro` для автодополнения аргументов
    - Используйте `env var` для автодополнения переменных окружения
- **Тёмная тема** &mdash; Используйте тёмный режим в <Constant name="cloud_ide" /> для работы в условиях низкой освещённости.

Подробнее обо всех возможностях [Cloud <Constant name="cloud_ide" />](/docs/cloud/studio-ide/develop-in-studio#cloud-ide-features).

В декабре 2022 года dbt Labs выведет из эксплуатации классический <Constant name="cloud_ide" />. [Новый и обновлённый <Constant name="cloud_ide" />](/docs/cloud/studio-ide/develop-in-studio) будет доступен _всем_ пользователям <Constant name="cloud" />. Вы больше не сможете получить доступ к классическому <Constant name="cloud_ide" />, а dbt Labs может вносить изменения, которые нарушат его работу.

После вывода из эксплуатации dbt Labs будет поддерживать только обновлённую версию <Constant name="cloud_ide" />.

## Октябрь 2022

### Анонс нативной интеграции dbt Cloud с Azure DevOps

## October 2022

### Анонс нативной интеграции dbt Cloud с Azure DevOps

<Constant name="cloud" /> теперь предлагает нативную интеграцию с Azure DevOps для клиентов <Constant name="cloud" /> на корпоративном тарифе (enterprise). Мы создали эту интеграцию, чтобы снизить трение при работе, повысить уровень безопасности и открыть принципиально новые продуктовые возможности для наших клиентов. Настройка интеграции с Azure DevOps в <Constant name="cloud" /> ([Setting up the Azure DevOps integration](/docs/cloud/git/connect-azure-devops)) предоставляет:

- простую настройку dbt‑проекта,
- улучшенную модель безопасности,
- контроль и применение прав доступа к репозиторию в <Constant name="cloud_ide" />,
- <Constant name="cloud" /> Slim CI.

Ознакомьтесь с нашим [живым постом в блоге](https://www.getdbt.com/blog/dbt-cloud-integration-azure-devops/), чтобы узнать больше!

### Представляем более быстрый, улучшенный и мощный Cloud IDE

Новая версия Cloud <Constant name="cloud_ide" /> упрощает создание моделей данных, избавляя вас от необходимости задумываться о настройке окружения и конфигурации.

Новый Cloud <Constant name="cloud_ide" /> включает улучшения производительности, доработки эргономики и несколько приятных улучшений!

Некоторые из улучшений включают:

- Улучшено время запуска Cloud <Constant name="cloud_ide" /> (запуск <Constant name="cloud_ide" />), время отклика при работе (сохранение и коммиты), а также общая надежность.
- Более удобная организация и навигация благодаря таким возможностям, как перетаскивание файлов (drag and drop), хлебные крошки (breadcrumb), выпадающее меню кнопки сборки (build button) и многое другое.
- Вы можете использовать новые функции, такие как автоматическое форматирование файлов, автодополнение имен моделей и просмотр git diff, чтобы увидеть свои изменения перед созданием pull request.

Подробнее о новых возможностях [Cloud <Constant name="cloud_ide" />](/docs/cloud/studio-ide/develop-in-studio#cloud-ide-features) читайте в документации, а также ознакомьтесь с блог-постом [New and improved Cloud <Constant name="cloud_ide" />](https://www.getdbt.com/blog/new-improved-cloud-ide/) для получения дополнительной информации!

## Сентябрь 2022

### Предупреждение об устаревании конечной точки List Steps API

14 октября 2022 года dbt Labs прекращает поддержку конечной точки List Steps API. С 14 октября любые GET-запросы к этой конечной точке будут завершаться с ошибкой. Пожалуйста, подготовьтесь к прекращению использования конечной точки List Steps как можно скорее.

dbt Labs продолжит поддерживать эндпоинт [Retrieve Run](/dbt-cloud/api-v2#/operations/Retrieve%20Run), который может быть подходящей альтернативой в зависимости от сценария использования.

Вы можете получить шаги выполнения для отдельного запуска с помощью GET-запроса по следующему URL, заменив `YOUR_ACCESS_URL` на [соответствующий URL доступа](/docs/cloud/about-cloud/access-regions-ip-addresses) для вашего региона и плана:

`https://YOUR_ACCESS_URL/api/v2/accounts/{accountId}/runs/{runId}/?include_related=["run_steps"]`

### Запрос данных за последние три месяца с использованием API метаданных

Чтобы сделать API метаданных более масштабируемым и улучшить его задержку, мы внедрили ограничения на хранение данных. Теперь API метаданных может запрашивать данные за последние три месяца. Например, если сегодня 1 марта, вы можете запросить данные до 1 января.

Для получения дополнительной информации см. [API метаданных](/docs/dbt-cloud-apis/discovery-api)

## Август 2022

### Поддержка источников из разных баз данных на экземплярах Redshift RA3

Кросс-базовые запросы для инстансов RA3 теперь поддерживаются в проектах <Constant name="cloud" />, использующих подключение к Redshift.

С помощью запросов между базами данных вы можете беспрепятственно запрашивать данные из любой базы данных в кластере, независимо от того, к какой базе данных вы подключены с помощью dbt.

Параметр [connection configuration](/docs/core/connect-data-platform/redshift-setup) `ra3_node` теперь по умолчанию установлен в значение `true`. Это позволяет пользователям:

- использовать все возможности узлов RA3,
- генерировать соответствующую документацию dbt.

## Июль 2022

### Функция большого DAG

Теперь вы можете выбрать **Отобразить родословную**, чтобы визуализировать большие DAG.

Большие DAG могут занимать много времени (10 или более секунд, если не минут) для отображения и могут вызывать сбои браузеров.

Новая кнопка предотвращает автоматическое отображение больших DAG. Вместо этого вы можете выбрать **Отобразить родословную**, чтобы загрузить визуализацию. Это должно повлиять примерно на 15% DAG.

<Lightbox src="/img/docs/dbt-cloud/dag v1.1.56 release.png" title="Отобразить родословную"/>

## Май 2022

### Обновление истекших токенов доступа в IDE при использовании GitLab

22 мая GitLab изменил правила работы с [OAuth access tokens without expiration](https://docs.gitlab.com/ee/update/deprecations.html#oauth-tokens-without-expiration). Мы обновили логику <Constant name="cloud_ide" />, чтобы более корректно обрабатывать истечение срока действия OAuth‑токенов. Теперь при первом истечении срока действия токена после 2 часов непрерывного использования <Constant name="cloud_ide" /> вам потребуется повторно пройти аутентификацию в GitLab, чтобы обновить истёкший OAuth access token. Все последующие обновления токена мы будем выполнять автоматически, если вы предоставите необходимое разрешение при повторной аутентификации.

Этот дополнительный уровень безопасности в <Constant name="cloud_ide" /> доступен только в рамках enterprise‑плана <Constant name="cloud" />.

## Апрель 2022

### Журнал аудита

Чтобы просматривать действия, выполненные людьми в вашей организации, dbt предоставляет логи аудита пользовательских и системных событий. Журнал аудита <Constant name="cloud" /> содержит список событий, инициированных в вашей организации за последние 90 дней.

Журнал аудита включает такие сведения, как кто выполнил действие, какое именно действие было выполнено и когда это произошло. Подробнее см. документацию [о журнале аудита <Constant name="cloud" /> Enterprise](/docs/cloud/manage-access/audit-log).

### Учетные данные больше не стираются случайно при редактировании окружения

Мы устранили ошибку, при которой обновление незашифрованных полей (например, потоков, имени схемы) в настройках окружения приводило к удалению секретных полей (например, пароля, ключевой пары, данных учетных данных) из этого окружения. Теперь пользователи могут свободно обновлять настройки окружения без опасения случайного стирания учетных данных.

Мы исправили ошибку, из-за которой при обновлении незашифрованных полей (например, `threads`, имя схемы) в настройках окружения происходило удаление секретных полей (например, пароля, keypair, данных учетных данных) из этого окружения. Теперь пользователи могут свободно обновлять настройки окружения, не опасаясь непреднамеренно стереть учетные данные.

Чтобы повысить безопасность создания пользователей, пользователи dbt Cloud, созданные с использованием SAML Just-in-Time (JIT), теперь будут подтверждать личность через электронную почту для активации своей учетной записи. Использование электронной почты для подтверждения личности гарантирует, что пользователь все еще имеет доступ к тому же адресу электронной почты, который он использует для входа через SAML.

Чтобы повысить безопасность создания пользователей, пользователи <Constant name="cloud" />, созданные с помощью SAML Just‑in‑Time (JIT), теперь должны подтверждать свою личность по электронной почте для активации учетной записи. Использование электронной почты для подтверждения личности гарантирует, что пользователь по‑прежнему имеет доступ к тому же адресу электронной почты, который используется для входа через SAML.

Мы внедрили наш новый распределенный планировщик, который имеет гораздо более быстрое время подготовки, особенно в начале часа. Мы делимся более подробной информацией о нашей работе и улучшениях в нашем [посте в блоге о новостях продукта](https://www.getdbt.com/blog/a-good-problem-to-have/).

## Март 2022

### Проблемы с нестабильным интернетом больше не вызывают сообщение о тайм-ауте сессии

Мы исправили проблему, при которой нестабильное интернет-соединение могло вызывать неожиданное появление сообщения "Сессия IDE завершена по тайм-ауту". Люди, использующие VPN, чаще всего сталкивались с этой проблемой.

Мы исправили проблему, при которой нестабильное интернет‑соединение могло приводить к неожиданному появлению сообщения «<Constant name="cloud_ide" /> session timed out». Чаще всего с этой проблемой сталкивались пользователи, работающие через VPN.

Мы обновили логику проверки состояния (health check), и теперь она исключает проблемы с подключением на стороне клиента из проверки сессии <Constant name="cloud_ide" />. Если вы потеряете интернет‑соединение, состояние health check больше не будет обновляться. Таким образом, потеря интернет‑соединения больше не будет вызывать появление этого неожиданного сообщения.

### Разделение времени в очереди на время ожидания и время подготовки

Теперь dbt Cloud показывает "время ожидания" и "время подготовки" для выполнения, которые ранее выражались в совокупности как "время в очереди". Время ожидания фиксирует время, которое dbt Cloud ждет для запуска вашей задачи, если нет доступного слота выполнения или если предыдущий запуск той же задачи все еще выполняется. Время подготовки представляет время, которое требуется dbt Cloud для подготовки вашей задачи к запуску в вашем облачном хранилище данных.

<Constant name="cloud" /> теперь показывает «waiting time» и «prep time» для запуска, которые раньше объединялись в один показатель — «queue time». Waiting time отражает время, в течение которого <Constant name="cloud" /> ожидает возможности запустить ваш job, если нет доступного слота для выполнения или если предыдущий запуск этого же job всё ещё выполняется. Prep time представляет собой время, необходимое <Constant name="cloud" /> для подготовки вашего job к запуску в вашем облачном хранилище данных.

## Февраль 2022

### Обновления DAG и улучшения производительности

Любите DAG в IDE так же, как и мы? Теперь, когда вы нажимаете на узел в DAG, модель или файл конфигурации откроется как новая вкладка в IDE, чтобы вы могли напрямую просматривать или редактировать код. Мы продолжим выпускать улучшения эргономики для разработчиков в течение года.

Любите DAG в <Constant name="cloud_ide" /> так же, как и мы? Теперь при клике на узел в DAG модель или файл конфигурации будет открываться в новой вкладке в <Constant name="cloud_ide" />, так что вы сможете напрямую просматривать или редактировать код. В течение года мы будем продолжать выпускать улучшения, повышающие удобство работы для разработчиков.

* Обновлены рекомендуемые команды dbt в IDE, чтобы включить команды dbt Core v1.0, такие как "build" и аргумент "--select".

* Обновлены рекомендуемые команды dbt в <Constant name="cloud_ide" />, чтобы включить команды <Constant name="core" /> v1.0, такие как `build` и аргумент `--select`.

Теперь токены сервиса могут быть назначены с детализированными разрешениями для обеспечения минимального доступа. Если вы находитесь на корпоративном плане, вы можете назначить любой набор разрешений предприятия для вновь выданных токенов сервиса. Если вы находитесь на плане Teams, вы можете назначить набор разрешений администратора задач для вновь выданных токенов сервиса. Мы настоятельно рекомендуем вам переиздать токены сервиса с этими новыми разрешениями, чтобы повысить вашу безопасность! См. документацию [здесь](https://docs.getdbt.tech/docs/dbt-cloud-apis/service-tokens#permissions-for-service-account-tokens).

Теперь сервисным токенам можно назначать детализированные права доступа, чтобы реализовать принцип наименьших привилегий. Если вы используете тариф Enterprise, вы можете назначать вновь выпущенным сервисным токенам любой набор прав уровня enterprise. Если вы используете тариф Teams, вы можете назначать вновь выпущенным сервисным токенам набор прав Job Admin. Мы настоятельно рекомендуем перевыпустить сервисные токены с этими новыми правами, чтобы повысить уровень безопасности. Подробнее см. в документации [здесь](/docs/dbt-cloud-apis/service-tokens#permissions-for-service-account-tokens).

- Мы присоединяемся к [программе партнеров по сканированию секретов GitHub](https://docs.github.com/en/developers/overview/secret-scanning-partner-program), чтобы лучше защитить ваш токен от случайного публичного раскрытия и потенциального мошеннического использования.

#### Исправления ошибок

- Учетные данные больше не удаляются случайно, когда пользователь обновляет настройку окружения.

## Январь 2022

### Сниппеты автозаполнения для SQL и YAML файлов в IDE

Некоторые примечательные улучшения включают сниппеты автозаполнения для sql и YAML файлов в IDE, которые теперь доступны для использования! Мы также добавили [новую страницу уровня метрик](https://docs.getdbt.tech/docs/dbt-cloud/using-dbt-cloud/cloud-metrics-layer) на docs.getdbt.com, чтобы помочь вам начать думать об уровне метрик в dbt Cloud.

Среди заметных улучшений — **snippets автодополнения** для файлов SQL и YAML в IDE, которые уже доступны для использования! Также мы добавили [новую страницу про metric layer](/docs/use-dbt-semantic-layer/dbt-sl) на docs.getdbt.com, чтобы помочь вам начать знакомство с metrics layer в dbt Cloud.

* Имена веток теперь по умолчанию устанавливаются как "main" вместо "master" в новых управляемых и неуправляемых Git-репозиториях.
* Обновление сниппетов автозаполнения в IDE.

* Имена веток по умолчанию теперь — **"main"** вместо **"master"** в новых управляемых и неуправляемых репозиториях <Constant name="git" />.
* Обновлены сниппеты автодополнения в IDE.

Мы начали новый год с подарка! Многопользовательские команды и корпоративные аккаунты теперь могут использовать новую вкладку [Время выполнения модели](https://docs.getdbt.tech/docs/dbt-cloud/using-dbt-cloud/cloud-model-timing-tab) в dbt Cloud. Вы можете использовать эту вкладку, чтобы более подробно изучить долго выполняющиеся модели и определить, нуждаются ли они в рефакторинге или изменении расписания.

Мы начали новый год с подарка! Аккаунты Multi-tenant Team и Enterprise теперь могут использовать новую вкладку [Model timing](https://docs.getdbt.tech/docs/dbt-cloud/using-dbt-cloud/cloud-model-timing-tab) в dbt Cloud. С помощью этой вкладки вы можете детально изучать длительно выполняющиеся модели, чтобы определить, нуждаются ли они в рефакторинге или изменении расписания.

Мы начали новый год с подарка! Многопользовательские аккаунты Team и Enterprise теперь могут использовать новую вкладку [Model timing](/docs/deploy/deploy-jobs#model-timing) в <Constant name="cloud" />. С помощью этой вкладки вы можете подробнее изучать долго выполняющиеся модели и понять, требуется ли им рефакторинг или изменение расписания.

* Мы добавили проверку имен на стороне клиента для создания файлов или папок.
