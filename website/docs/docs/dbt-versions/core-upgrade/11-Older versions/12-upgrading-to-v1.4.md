---
title: "Обновление до версии v1.4"
description: Новые функции и изменения в dbt Core v1.4
id: "upgrading-to-v1.4"
displayed_sidebar: "docs"
---

### Ресурсы

- [Список изменений](https://github.com/dbt-labs/dbt-core/blob/1.4.latest/CHANGELOG.md)
- [Руководство по установке dbt Core CLI](/docs/core/installation-overview)
- [Руководство по обновлению в облаке](/docs/dbt-versions/upgrade-dbt-version-in-cloud)

**Финальный релиз:** 25 января 2023

dbt Core v1.4 — это релиз "за кулисами". Мы усердно работали над перестройкой внутренних компонентов `dbt-core` на более надежных основах, чтобы обеспечить захватывающий год разработки новых функций. Ознакомьтесь с [вехой v1.5](https://github.com/dbt-labs/dbt-core/milestone/82) на GitHub, чтобы увидеть, что планируется на апрель.

## Что нужно знать перед обновлением

dbt Labs стремится обеспечить обратную совместимость для всех версий 1.x. Если вы столкнетесь с ошибкой при обновлении, пожалуйста, сообщите нам, [создав проблему](https://github.com/dbt-labs/dbt-core/issues/new).

### Для пользователей артефактов dbt (метаданные)

Версия схемы манифеста обновлена до `v8`. Эти изменения актуальны для тех, кто анализирует или обрабатывает содержимое файла `manifest.json`, или у кого есть собственный код, обращающийся к переменным [`model`](https://docs.getdbt.com/reference/dbt-jinja-functions/model) или [`graph`](https://docs.getdbt.com/reference/dbt-jinja-functions/graph), например, `{{ model.root_path }}`.

Актуальные изменения:
- Атрибут `root_path` был удален для узлов, не являющихся семенами, чтобы уменьшить дублирующую информацию.
- Неиспользуемые атрибуты были удалены из узлов семян (включая `depends_on.nodes`) и из `macros` (включая `tags`).
- `unique_id` блоков документации теперь начинается с `doc` для согласованности с другими типами ресурсов.

### Для разработчиков адаптеров

> **Кратко**: Не так много работы для этой минорной версии. Мы ожидаем больше работы для `1.5.0`. Мы планируем выпускать бета-версии рано и часто, а также предоставлять рекомендации по обновлению.

Основные изменения:
- Добавлена поддержка Python 3.11
- Переименованы/заменены устаревшие функции исключений
- Добавлена поддержка инкрементальных предикатов (если применимо)
- Использование новых тестов в зоне адаптера

Для более подробной информации и вопросов, пожалуйста, посетите [dbt-core/discussions/6624](https://github.com/dbt-labs/dbt-core/discussions/6624).

## Новая и измененная документация

- [**События и структурированное логирование**](/reference/events-logging): система событий dbt получила обновление. Ожидайте больше согласованности в доступности и структуре информации, поддерживаемой схемами событий с типобезопасностью.
- [**Поддержка Python**](/faqs/Core/install-python-compatibility): Python 3.11 был выпущен в октябре 2022 года. Он официально поддерживается в dbt-core v1.4, хотя полная поддержка также зависит от адаптера для вашей платформы данных. По словам разработчиков Python, "Python 3.11 на 10-60% быстрее, чем Python 3.10." Мы рекомендуем попробовать [`dbt parse`](/reference/commands/parse) с dbt Core v1.4 + Python 3.11 и сравнить время выполнения с dbt Core v1.3 + Python 3.10. Сообщите нам, что вы обнаружите!
- [**Метрики**](/docs/build/build-metrics-intro): `time_grain` является необязательным, чтобы обеспечить лучшую эргономику для метрик, не связанных со временем.
- **Контекст dbt-Jinja:** Метод контекста [local_md5](/reference/dbt-jinja-functions/local_md5) будет вычислять [MD5-хеш](https://en.wikipedia.org/wiki/MD5) для использования _внутри_ dbt. (Не путать с SQL md5!)
- [**Экспозиции**](/docs/build/exposures) теперь могут зависеть от `metrics`.
- [**Пакеты "Tarball"**](/docs/build/packages#internally-hosted-tarball-URL): Некоторые организации имеют требования безопасности, чтобы загружать ресурсы только из внутренних сервисов. Чтобы удовлетворить необходимость установки пакетов из размещенных сред (таких как Artifactory или облачные хранилища), теперь можно указать любой доступный URL, откуда можно скачать сжатый пакет dbt.
- [**Гранулярная конфигурация "warn error"**](/reference/global-configs/warnings): Благодаря полной очистке и консолидации классов предупреждений и исключений в `dbt-core`, теперь можно определить более детализированную конфигурацию `--warn-error-options`, которая указывает точные предупреждения, которые вы хотите (или не хотите), чтобы dbt рассматривал как ошибки.
- [**Отложение**](/reference/node-selection/defer#favor-state) поддерживает необязательную конфигурацию, `--favor-state`.

### Расширенные конфигурации для инкрементальных моделей

- [**Конфигурация `incremental_predicates`**](/docs/build/incremental-strategy#about-incremental_predicates) теперь поддерживается на самых популярных адаптерах, обеспечивая большую гибкость при настройке производительности в операциях `merge` и `delete` с большими наборами данных.
- **BigQuery:** Инкрементальная стратегия `insert_overwrite` поддерживает новый (старый) механизм, [`time_ingestion_partitioning`](/reference/resource-configs/bigquery-configs#partitioning-by-an-ingestion-date-or-timestamp) + [`copy_partitions`](#copying-ingestion-time-partitions), который может значительно сэкономить затраты и время для больших наборов данных.

### Обновления для Python моделей

- Python модели [настроены на материализацию](/docs/build/python-models) как `table` по умолчанию.
- Python модели [работающие на Snowpark](/docs/build/python-models) будут использовать "анонимные" хранимые процедуры по умолчанию, что обеспечивает небольшое ускорение и более чистую историю запросов.