---
title: "Обновление до v1.4"
description: Новые функции и изменения в dbt Core v1.4
id: "upgrading-to-v1.4"
displayed_sidebar: "docs"
---

### Ресурсы

- [Журнал изменений](https://github.com/dbt-labs/dbt-core/blob/1.4.latest/CHANGELOG.md)
- [Руководство по установке dbt Core CLI](/docs/core/installation-overview)
- [Руководство по обновлению в облаке](/docs/dbt-versions/upgrade-dbt-version-in-cloud)

**Окончательный релиз:** 25 января 2023 года

dbt Core v1.4 — это релиз, в котором много изменений, происходящих "за кулисами". Мы усердно работали над перестройкой внутренних механизмов `dbt-core` на более надежных основах, чтобы обеспечить захватывающий год разработки новых функций. Ознакомьтесь с [вехами v1.5](https://github.com/dbt-labs/dbt-core/milestone/82) на GitHub, чтобы получить предварительный просмотр запланированных изменений на апрель.

## Что нужно знать перед обновлением

dbt Labs стремится обеспечить обратную совместимость для всех версий 1.x. Если вы столкнетесь с ошибкой после обновления, пожалуйста, дайте нам знать, [открыв проблему](https://github.com/dbt-labs/dbt-core/issues/new).

### Для пользователей артефактов dbt (метаданных)

Версия схемы манифеста обновилась до `v8`. Эти изменения актуальны для тех, кто анализирует или обрабатывает содержимое файла `manifest.json`, или у кого есть пользовательский код, обращающийся к переменным [`model`](https://docs.getdbt.com/reference/dbt-jinja-functions/model) или [`graph`](https://docs.getdbt.com/reference/dbt-jinja-functions/graph), например, `{{ model.root_path }}`.

Актуальные изменения:
- Атрибут `root_path` был удален для не-сидовых узлов, чтобы уменьшить дублирование информации.
- Неиспользуемые атрибуты были удалены из сидовых узлов (включая `depends_on.nodes`) и из `macros` (включая `tags`).
- `unique_id` блоков документации теперь начинается с `doc` для согласованности с другими типами ресурсов.

### Для разработчиков адаптеров плагинов

> **Кратко:** Не требуется много усилий для этой минорной версии. Мы ожидаем больше работы для `1.5.0`. Мы планируем выпускать бета-версии рано и часто, а также предоставлять рекомендации по обновлению.

Основные изменения:
- Добавлена поддержка Python 3.11
- Переименованы/заменены устаревшие функции исключений
- Добавлена поддержка инкрементных предикатов (если применимо)
- Использование новых тестов адаптерной зоны

Для получения более подробной информации и для задавания вопросов, пожалуйста, посетите [dbt-core/discussions/6624](https://github.com/dbt-labs/dbt-core/discussions/6624).

## Новая и измененная документация

- [**События и структурированное логирование**](/reference/events-logging): Система событий dbt была обновлена. Ожидайте большей согласованности в доступности и структуре информации, поддерживаемой типобезопасными схемами событий.
- [**Поддержка Python**](/faqs/Core/install-python-compatibility): Python 3.11 был выпущен в октябре 2022 года. Он официально поддерживается в dbt-core v1.4, хотя полная поддержка также зависит от адаптера плагина для вашей платформы данных. Согласно данным разработчиков Python, "Python 3.11 работает на 10-60% быстрее, чем Python 3.10." Мы рекомендуем вам попробовать [`dbt parse`](/reference/commands/parse) с dbt Core v1.4 + Python 3.11 и сравнить время выполнения с dbt Core v1.3 + Python 3.10. Дайте нам знать, что вы обнаружите!
- [**Метрики**](/docs/build/build-metrics-intro): `time_grain` является необязательным, чтобы обеспечить лучшую эргономику для метрик, которые не привязаны ко времени.
- **Контекст dbt-Jinja:** Метод контекста [local_md5](/reference/dbt-jinja-functions/local_md5) будет вычислять [MD5 хеш](https://en.wikipedia.org/wiki/MD5) для использования _внутри_ dbt. (Не путать с SQL md5!)
- [**Экспозиции**](/docs/build/exposures) теперь могут зависеть от `metrics`.
- [**"Тарболл" пакеты**](/docs/build/packages#internally-hosted-tarball-URL): Некоторые организации имеют требования безопасности, которые требуют загружать ресурсы только из внутренних сервисов. Чтобы удовлетворить необходимость установки пакетов из хостинг-сред (таких как Artifactory или облачные хранилища), теперь можно указать любой доступный URL, откуда можно скачать сжатый пакет dbt.
- [**Гранулярная конфигурация "warn error"**](/reference/global-configs/warnings): Благодаря полной очистке и консолидации классов предупреждений и исключений в `dbt-core`, теперь возможно определить более гранулярную конфигурацию `--warn-error-options`, которая указывает точные предупреждения, которые вы хотите (или не хотите), чтобы dbt рассматривал как ошибки.
- [**Отложение**](/reference/node-selection/defer#favor-state) поддерживает необязательную конфигурацию `--favor-state`.

### Расширенные конфигурации для инкрементальных моделей

- Конфигурация [**`incremental_predicates`**](/docs/build/incremental-strategy#about-incremental_predicates) теперь поддерживается на самых популярных адаптерах, что обеспечивает большую гибкость при настройке производительности в операциях `merge` и `delete` с большими наборами данных.
- **BigQuery:** Инкрементальная стратегия `insert_overwrite` поддерживает новый (старый) механизм, [`time_ingestion_partitioning`](/reference/resource-configs/bigquery-configs#partitioning-by-an-ingestion-date-or-timestamp) + [`copy_partitions`](#copying-ingestion-time-partitions), который может значительно сократить затраты и время для больших наборов данных.

### Обновления для Python моделей

- Python модели [настраиваются для материализации](/docs/build/python-models) как `table` по умолчанию.
- Python модели [работающие на Snowpark](/docs/build/python-models) будут использовать "анонимные" хранимые процедуры по умолчанию, что обеспечит небольшое ускорение и более чистую историю запросов.