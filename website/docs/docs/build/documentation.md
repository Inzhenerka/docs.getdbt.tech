---
title: "Документация"
description: "Узнайте, как хорошая документация для ваших моделей dbt помогает заинтересованным сторонам находить и понимать ваши наборы данных."
id: "documentation"
---

Хорошая документация для ваших моделей dbt поможет конечным пользователям находить и понимать наборы данных, которые вы для них создаете. dbt предоставляет способ генерировать документацию для вашего проекта dbt и отображать ее в виде веб-сайта.

import CopilotBeta from '/snippets/_dbt-copilot-avail.md';

<CopilotBeta resource='documentation' />

## Связанная документация

* [Объявление свойств](/reference/configs-and-properties)
* [Команда `dbt docs`](/reference/commands/cmd-docs)
* [Функция Jinja `doc`](/reference/dbt-jinja-functions/doc)
* Если вы новичок в dbt, мы рекомендуем ознакомиться с нашим [руководством по быстрому старту](/guides), чтобы создать свой первый проект dbt, включая документацию.

## Предполагаемые знания

* [Тесты](/docs/build/data-tests)

## Обзор

dbt предоставляет способ генерировать документацию для вашего проекта dbt. Документация для вашего проекта включает:
* **Информацию о вашем проекте**: включая код модели, DAG вашего проекта, любые тесты, которые вы добавили к столбцу, и многое другое.
* **Информацию о вашем <Term id="data-warehouse" />**: включая типы данных столбцов и размеры <Term id="table" />. Эта информация генерируется путем выполнения запросов к информационной схеме.

Важно, что dbt также предоставляет способ добавления **описаний** к моделям, столбцам, источникам и многому другому, чтобы дополнительно улучшить вашу документацию.

## Добавление описаний в ваш проект
Чтобы добавить описания в ваш проект, используйте ключ `description:` в тех же файлах, где вы объявляете [тесты](/docs/build/data-tests), например:

<File name='models/<filename>.yml'>

```yaml
version: 2

models:
  - name: events
    description: Эта таблица содержит события кликов с маркетингового веб-сайта

    columns:
      - name: event_id
        description: Это уникальный идентификатор события
        tests:
          - unique
          - not_null

      - name: user-id
        quote: true
        description: Пользователь, который совершил событие
        tests:
          - not_null

```

</File>

## Генерация документации проекта

По умолчанию в dbt Cloud доступен [dbt Explorer](/docs/collaborate/explore-projects), доступный в [планах Team или Enterprise](https://www.getdbt.com/pricing/). Используйте dbt Explorer, чтобы просматривать ресурсы вашего проекта (такие как модели, тесты и метрики), его [метаданные](/docs/collaborate/explore-projects#generate-metadata) и их родословную, чтобы лучше понять его текущее состояние в производстве.

Разработчики dbt Cloud и пользователи dbt Core могут использовать [dbt Docs](/docs/collaborate/build-and-view-your-docs#dbt-docs), который генерирует базовую документацию, но не предлагает такую же скорость, метаданные или видимость, как dbt Explorer.

Сгенерируйте документацию для вашего проекта, следуя этим шагам:

1. Запустите `dbt docs generate` — эта команда сообщает dbt скомпилировать соответствующую информацию о вашем проекте dbt и хранилище в файлы `manifest.json` и `catalog.json` соответственно.
2. Убедитесь, что вы создали модели с помощью `dbt run`, чтобы просмотреть документацию для всех столбцов, а не только тех, которые описаны в вашем проекте.
3. Запустите `dbt docs serve`, если вы разрабатываете локально, чтобы использовать эти файлы `.json` для заполнения локального веб-сайта.

Чтобы просмотреть ресурс, его метаданные и какие команды необходимы в dbt Explorer, обратитесь к [генерации метаданных](/docs/collaborate/explore-projects#generate-metadata) для получения более подробной информации.

## Часто задаваемые вопросы
<FAQ path="Project/example-projects" alt_header="Есть ли примеры сайтов с документацией dbt?"/>
<FAQ path="Docs/document-all-columns" />
<FAQ path="Docs/long-descriptions" />
<FAQ path="Docs/sharing-documentation" />
<FAQ path="Docs/document-other-resources" />

## Использование блоков документации
### Синтаксис
Чтобы объявить блок документации, используйте тег jinja `docs`. Блоки документации могут содержать произвольный markdown, но они должны иметь уникальные имена. Их имена могут содержать заглавные и строчные буквы (A-Z, a-z), цифры (0-9) и подчеркивания (_), но не могут начинаться с цифры.

<File name='events.md'>

```markdown
{% docs table_events %}

Эта таблица содержит события кликов с маркетингового веб-сайта.

События в этой таблице записываются с помощью [Snowplow](http://github.com/snowplow/snowplow) и передаются в хранилище каждый час. Отслеживаются следующие страницы маркетингового сайта:
 - /
 - /about
 - /team
 - /contact-us

{% enddocs %}
```

</File>

В приведенном выше примере блок документации с именем `table_events` определен с некоторым описательным содержимым markdown. В имени `table_events` нет ничего значительного — блоки документации могут быть названы как угодно, если имя содержит только буквенно-цифровые символы и подчеркивания и не начинается с цифры.

### Размещение

<VersionBlock firstVersion="1.9">

Блоки документации должны быть размещены в файлах с расширением `.md`. По умолчанию dbt будет искать блоки документации во всех путях ресурсов (например, в объединенном списке [model-paths](/reference/project-configs/model-paths), [seed-paths](/reference/project-configs/seed-paths), [analysis-paths](/reference/project-configs/analysis-paths), [test-paths](/reference/project-configs/test-paths), [macro-paths](/reference/project-configs/macro-paths) и [snapshot-paths](/reference/project-configs/snapshot-paths)) &mdash; вы можете настроить это поведение с помощью конфигурации [docs-paths](/reference/project-configs/docs-paths).

</VersionBlock>

<VersionBlock lastVersion="1.8">

Блоки документации должны быть размещены в файлах с расширением `.md`. По умолчанию dbt будет искать блоки документации во всех путях ресурсов (например, в объединенном списке [model-paths](/reference/project-configs/model-paths), [seed-paths](/reference/project-configs/seed-paths), [analysis-paths](/reference/project-configs/analysis-paths), [macro-paths](/reference/project-configs/macro-paths) и [snapshot-paths](/reference/project-configs/snapshot-paths)) &mdash; вы можете настроить это поведение с помощью конфигурации [docs-paths](/reference/project-configs/docs-paths).

</VersionBlock>

### Использование
Чтобы использовать блок документации, ссылайтесь на него из вашего файла `schema.yml` с помощью функции [doc()](/reference/dbt-jinja-functions/doc) вместо строки markdown. Используя приведенные выше примеры, документация `table_events` может быть включена в файл `schema.yml`, как показано ниже:

<File name='schema.yml'>

```yaml
version: 2

models:
  - name: events
    description: '{{ doc("table_events") }}'

    columns:
      - name: event_id
        description: Это уникальный идентификатор события
        tests:
            - unique
            - not_null
```

</File>

В полученной документации `'{{ doc("table_events") }}'` будет расширено до markdown, определенного в блоке документации `table_events`.

## Установка пользовательского обзора
*Доступно только для dbt Docs.*

"Обзор", показанный на веб-сайте dbt Docs, можно переопределить, предоставив собственный блок документации с именем `__overview__`. По умолчанию dbt предоставляет обзор с полезной информацией о самом сайте документации. В зависимости от ваших потребностей, может быть хорошей идеей переопределить этот блок документации с конкретной информацией о вашем корпоративном стиле, ссылками на отчеты или информацией о том, к кому обратиться за помощью. Чтобы переопределить обзор по умолчанию, создайте блок документации, который выглядит следующим образом:

<File name='models/overview.md'>

```markdown
{% docs __overview__ %}
# Руководство по ежемесячной повторяющейся выручке (MRR).
Этот проект dbt является рабочим примером, демонстрирующим, как моделировать выручку от подписки. **Ознакомьтесь с полным описанием \[здесь](https://blog.getdbt.com/modeling-subscription-revenue/),
а также с репозиторием для этого проекта \[здесь](https://github.com/dbt-labs/mrr-playbook/).**
...

{% enddocs %}
```

</File>

### Пользовательские обзоры на уровне проекта
*Доступно только для dbt Docs.*

Вы можете установить разные обзоры для каждого проекта/пакета dbt, включенного в ваш сайт документации, создав блок документации с именем `__[project_name]__`. Например, чтобы определить пользовательские страницы обзора, которые появляются, когда пользователь переходит в пакет `dbt_utils` или `snowplow`:

<File name='models/overview.md'>

```markdown
{% docs __dbt_utils__ %}
# Утилитарные макросы
Наш проект dbt активно использует этот набор утилитарных макросов, особенно:
- `surrogate_key`
- `test_equality`
- `pivot`
{% enddocs %}

{% docs __snowplow__ %}
# Сессии Snowplow
Наша организация использует этот пакет преобразований для объединения событий Snowplow в просмотры страниц и сессии.
{% enddocs %}
```

</File>

## Навигация по сайту документации

Используйте [dbt Explorer](/docs/collaborate/explore-projects) для более богатого и интерактивного опыта понимания ресурсов и родословной вашего проекта. Доступно в [планах Team или Enterprise](https://www.getdbt.com/pricing/).

Для получения дополнительных сведений о том, как исследовать вашу родословную и навигировать по вашим ресурсам, обратитесь к [dbt Explorer](/docs/collaborate/explore-projects).

<Lightbox src="/img/docs/collaborate/dbt-explorer/example-model-details.png" width="100%" title="Пример деталей ресурса" />

<Expandable alt_header="Для пользователей dbt Docs">
Если вы используете интерфейс dbt Docs, вы можете перейти к документации для конкретной модели. Это может выглядеть примерно так:

<Lightbox src="/img/docs/building-a-dbt-project/testing-and-documentation/f2221dc-Screen_Shot_2018-08-14_at_6.29.55_PM.png" title="Автоматически сгенерированная документация для модели dbt"/>

Здесь вы можете увидеть представление структуры проекта, описание модели в формате markdown и список всех столбцов (с документацией) в модели.

На странице dbt Docs вы можете нажать зеленую кнопку в нижнем правом углу веб-страницы, чтобы развернуть "мини-карту" вашего DAG. Эта панель (показана ниже) отобразит непосредственных родителей и детей модели, которую вы исследуете.

<Lightbox src="/img/docs/building-a-dbt-project/testing-and-documentation/ec77c45-Screen_Shot_2018-08-14_at_6.31.56_PM.png" title="Открытие мини-карты DAG"/>

В этом примере модель `fct_subscription_transactions` имеет только одного прямого родителя. Нажав кнопку "Развернуть" в правом верхнем углу окна, мы можем повернуть график горизонтально и просмотреть полную <Term id="data-lineage">родословную</Term> для нашей модели. Эта родословная может быть отфильтрована с использованием флагов `--select` и `--exclude`, которые соответствуют семантике [синтаксиса выбора модели](/reference/node-selection/syntax). Кроме того, вы можете щелкнуть правой кнопкой мыши, чтобы взаимодействовать с DAG, перейти к документации или поделиться ссылками на вашу визуализацию графа с вашими коллегами.

<Lightbox src="/img/docs/building-a-dbt-project/testing-and-documentation/ac97fba-Screen_Shot_2018-08-14_at_6.35.14_PM.png" title="Полная родословная для модели dbt"/>

</Expandable>

## Развертывание сайта документации

С помощью dbt Cloud используйте [dbt Explorer](/docs/collaborate/explore-projects), который автоматически получает обновления метаданных после каждого выполнения задания в производственной или промежуточной среде развертывания, чтобы всегда иметь последние результаты для вашего проекта &mdash; это означает, что он всегда автоматически обновляется после каждого выполнения задания.

:::caution Безопасность

Команда `dbt docs serve` предназначена только для локального/разработческого хостинга сайта документации. Пожалуйста, используйте один из перечисленных ниже методов (или аналогичный), чтобы убедиться, что ваш сайт документации размещен безопасно!

:::

#### Для пользователей dbt Docs

Веб-сайт документации dbt был создан, чтобы его было легко разместить в интернете. Сайт является "статическим", что означает, что вам не нужны "динамические" серверы для обслуживания документации. Вы можете разместить вашу документацию несколькими способами:

* Используйте [dbt Cloud's](/docs/collaborate/build-and-view-your-docs) стандартный опыт работы с документацией с [dbt Explorer](/docs/collaborate/explore-projects).
* Разместите на [Amazon S3](https://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html) (опционально [с ограничениями доступа по IP](https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-3))
* Опубликуйте с помощью [Netlify](https://discourse.getdbt.com/t/publishing-dbt-docs-to-netlify/121)
* Используйте ваш собственный веб-сервер, такой как Apache/Nginx