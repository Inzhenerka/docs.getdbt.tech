---
title: Как настроить правильные разрешения в BigQuery?
description: "Используйте сервисный аккаунт для настройки разрешений в BigQuery"
sidebar_label: 'Настройка разрешений в BigQuery'
id: bq-impersonate-service-account-setup

---

Чтобы использовать эту функциональность, сначала создайте сервисный аккаунт, который вы хотите имитировать. Затем предоставьте пользователям, которым вы хотите разрешить имитацию этого сервисного аккаунта, роль `roles/iam.serviceAccountTokenCreator` на ресурсе сервисного аккаунта. Также необходимо предоставить этому сервисному аккаунту ту же роль на самом себе. Это позволяет ему создавать краткосрочные токены, идентифицирующие его, и позволяет вашим пользователям (или другим сервисным аккаунтам) делать то же самое. Более подробную информацию об этом сценарии можно найти [здесь](https://cloud.google.com/iam/docs/understanding-service-accounts#directly_impersonating_a_service_account).

После того как вы предоставили соответствующие разрешения, вам нужно будет включить [API учетных данных сервисного аккаунта IAM](https://console.cloud.google.com/apis/library/iamcredentials.googleapis.com). Включение API и предоставление роли являются операциями с конечной согласованностью, которые могут занять до 7 минут для полного завершения, но обычно полностью распространяются в течение 60 секунд. Подождите несколько минут, затем добавьте опцию `impersonate_service_account` в конфигурацию вашего профиля BigQuery.