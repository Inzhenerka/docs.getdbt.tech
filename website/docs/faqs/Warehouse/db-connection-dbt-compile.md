---
title: Почему dbt compile требует подключения к платформе данных
description: "`dbt compile` требует подключения к платформе данных, потому что работа, которую он выполняет, зависит от текущего состояния вашего хранилища"
sidebar_label: "Почему dbt compile требует подключения к платформе данных"
id: db-connection-dbt-compile
---

`dbt compile` требует подключения к платформе данных для сбора необходимой информации (включая данные из интроспективных запросов), чтобы подготовить SQL для каждой модели в вашем проекте.

### dbt compile

Команда [`dbt compile`](/reference/commands/compile) генерирует исполняемый SQL из файлов `source`, `model`, `test` и `analysis`. `dbt compile` похож на `dbt run`, за исключением того, что он не материализует скомпилированный SQL модели в существующей таблице. Таким образом, до момента материализации `dbt compile` и `dbt run` схожи, поскольку оба требуют подключения к платформе данных, выполняют запросы и имеют переменную [`execute`](/reference/dbt-jinja-functions/execute), установленную в `True`.

Однако есть несколько моментов, которые стоит учитывать:

- Вам не нужно выполнять `dbt compile` перед `dbt run`.
- В dbt `compile` не означает `parse`. Это связано с тем, что `parse` проверяет ваш написанный `YAML`, настроенные теги и так далее.

### Интроспективные запросы

Чтобы сгенерировать скомпилированный SQL для многих моделей, dbt необходимо выполнять интроспективные запросы (это когда dbt нужно выполнить SQL, чтобы получить данные и что-то с ними сделать) к платформе данных.

Эти интроспективные запросы включают:

- Заполнение кэша отношений. Для получения дополнительной информации обратитесь к руководству [Создание новых материализаций](/guides/create-new-materializations). Кэширование ускоряет проверки метаданных, включая проверку существования [инкрементальной модели](/docs/build/incremental-models) в платформе данных.
- Разрешение [макросов](/docs/build/jinja-macros#macros), таких как `run_query` или `dbt_utils.get_column_values`, которые вы используете для шаблонирования вашего SQL. Это необходимо, потому что dbt должен выполнить эти запросы во время компиляции SQL модели.

Без подключения к платформе данных dbt не сможет выполнить эти интроспективные запросы и не сможет сгенерировать скомпилированный SQL, необходимый для следующих шагов в рабочем процессе dbt. Вы можете [`parse`](/reference/commands/parse) проект и использовать [`list`](/reference/commands/list) ресурсы в проекте без подключения к интернету или платформе данных. Парсинг проекта достаточно для создания [манифеста](/reference/artifacts/manifest-json), однако имейте в виду, что записанный манифест не будет включать скомпилированный SQL.

Для настройки проекта вам необходимо иметь [профиль подключения](/docs/core/connect-data-platform/connection-profiles) (`profiles.yml`, если вы используете CLI). Этот файл необходим, потому что конфигурация проекта зависит от его содержимого. Например, вам может понадобиться использовать [`{{target}}`](/reference/dbt-jinja-functions/target) для условных конфигураций или знать, на какой платформе вы работаете, чтобы выбрать правильный вариант SQL.