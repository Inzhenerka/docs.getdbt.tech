---
title: Как использовать настройки «Custom Branch» в окружении dbt?
description: "Использование пользовательского кода из вашего репозитория"
sidebar_label: 'Настройки custom branch'
id: custom-branch-settings
---

В окружениях <Constant name="cloud" /> вы можете изменить настройки Git так, чтобы использовать в репозиториях проектов dbt ветку, отличную от ветки по умолчанию. После внесения этого изменения вы запускаете dbt на пользовательской ветке. Если настройка указана, <Constant name="cloud" /> выполняет модели, используя пользовательскую ветку, заданную для данного окружения. Для окружений разработки и развертывания это имеет немного разные последствия.

Чтобы указать пользовательскую ветку:
1. Отредактируйте существующую среду или создайте новую
2. Выберите **Запускать только на пользовательской ветке** в разделе Общие настройки
3. Укажите **имя ветки или тег**

## Разработка {#development}

В среде разработки основной веткой (обычно с именем `main`) считается защищённая ветка в подключённых репозиториях. Вы можете напрямую редактировать, форматировать или линтить файлы, а также выполнять команды dbt в защищённой ветке git по умолчанию. Поскольку <Constant name="cloud_ide" /> не позволяет делать коммиты в защищённую ветку, вы сможете закоммитить эти изменения в новую ветку, когда будете готовы.

Указание **Custom branch** переопределяет поведение по умолчанию. Пользовательская ветка становится защищённой и позволяет создавать от неё новые ветки для разработки. Вы можете напрямую редактировать, форматировать или линтить файлы и выполнять команды dbt в пользовательской ветке, однако делать коммиты в неё нельзя. <Constant name="cloud" /> предложит вам закоммитить эти изменения в новую ветку.

Только одна ветка может быть защищенной. Если вы указываете пользовательскую ветку, основная ветка больше не защищена. Если вы хотите защитить основную ветку и предотвратить любые коммиты в нее, вам нужно настроить правила защиты веток в настройках вашего git-провайдера. Это гарантирует, что ваша основная ветка останется защищенной и в нее не будут вноситься новые коммиты.

Например, если вы хотите использовать ветку `develop` подключенного репозитория:

1. Перейдите в нужную среду и нажмите **Settings** > **Edit**, чтобы отредактировать среду.
2. В разделе **General settings** выберите **Only run on a custom branch**.
3. Введите **develop** в качестве имени вашей пользовательской ветки.
4. Нажмите **Save**.

<Lightbox src="/img/docs/dbt-cloud/cloud-configuring-dbt-cloud/dev-environment-custom-branch.png" width="100%" title="Настройка пользовательской базовой ветки репозитория"/>

## Развертывание {#deployment}

При запуске заданий в среде развертывания dbt клонирует ваш проект из подключенного репозитория перед выполнением ваших моделей. По умолчанию dbt использует ветку по умолчанию вашего репозитория (обычно это ветка `main`). Чтобы указать другую версию вашего проекта для выполнения dbt во время выполнения заданий в конкретной среде, вы можете отредактировать настройку Custom Branch, как показано в предыдущих шагах.