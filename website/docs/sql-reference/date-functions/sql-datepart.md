---
id: datepart
title: SQL DATE_PART
description: Функция DATE_PART позволяет извлекать указанную часть даты из даты/времени. Как и большинство других SQL-функций, вам нужно передать аргументы; для функции DATE_PART вы передадите дату/метку времени/поле даты, из которого хотите извлечь часть даты, и укажете часть, которую хотите удалить.
slug: /sql-reference/datepart
---

<head>
    <title>Работа с SQL DATEPART</title>
</head>

В этом посте мы подробно рассмотрим функцию DATE_PART, как она работает и почему мы ее используем.

Функция DATE_PART позволяет извлекать указанную часть даты из даты/времени. Например, если вы хотите извлечь месяц из даты 14 февраля 2022 года, она вернет 2, так как февраль — это второй месяц в году.

## Как использовать функцию DATE_PART

Как и большинство других SQL-функций, вам нужно передать аргументы; для функции DATE_PART вы передадите дату/метку времени/поле даты, из которого хотите извлечь часть даты, и укажете часть, которую хотите удалить. Вы можете извлечь числовой месяц, дату, год, час, секунды и т.д. из метки времени или поля даты, используя функцию DATE_PART с помощью следующего синтаксиса:

`date_part(<часть даты/времени>, <поле даты/даты>)`

Давайте рассмотрим практический пример ниже.

### Пример функции DATE_PART

```sql
select
	date_part('month', order_date) as order_month,
	round(avg(amount)) as avg_order_amount
from {{ ref('orders') }}
group by 1
```

Этот запрос, использующий таблицу `orders` [Jaffle Shop](https://github.com/dbt-labs/jaffle_shop), вернет округленную сумму заказов за каждый месяц заказа (представленную в виде числового значения):

| order_month | avg_order_amount |
|:---:|:---:|
| 1 | 17 |
| 2 | 15 |
| 3 | 18 |
| 4 | 17 |

В отличие от функции DATE_TRUNC, которая фактически обрезает дату до ее первого экземпляра данной части даты (так что она сохраняет структуру даты), функция DATE_PART возвращает числовое значение из поля даты.

Вы можете часто видеть, что функцию DATE_PART заменяют на функцию EXTRACT, которая выполняет ту же функциональность.

## Синтаксис функции DATE_PART в Snowflake, Databricks, BigQuery и Redshift

| Хранилище данных | Поддержка DATE_PART? | Примечания |
|:---:|:---:|:---:|
| Snowflake | ✅ |  |
| Databricks | ✅ |  |
| Amazon Redshift | ✅ |  |
| Google BigQuery | ❌ | BigQuery поддерживает функцию EXTRACT, которая выполняет ту же функциональность, что и функция DATE_PART |
| Postgres | ✅ | Это излишне педантично, и вы, вероятно, никогда не столкнетесь с проблемой, когда DATE_PART и EXTRACT будут давать разные значения, которые действительно имеют значение, но стоит отметить. Функции DATE_PART и EXTRACT в Postgres ранее давали одинаковый результат. Однако с Postgres 14 функция EXTRACT теперь возвращает числовой тип вместо 8-байтового числа с плавающей запятой. |

## Сценарии использования функции DATE_PART

Чаще всего мы видим, что функции DATE_PART или EXTRACT используются в аналитической работе для анализа:

- Финансовых календарей: Если ваш бизнес использует финансовые годы или календари, отличающиеся от обычного 12-месячного цикла, функции DATE_PART могут помочь создать согласованность между финансовыми календарями и обычными календарями.
- Экспресс-анализа: Функции DATE_PART полезны в экспресс-анализах и запросах, когда вам нужно рассмотреть значения, сгруппированные по периодам дат или для сравнений периодов.

Это не исчерпывающий список того, где ваша команда может использовать функцию DATE_PART в ваших моделях dbt и логике BI-инструментов, но он содержит некоторые распространенные сценарии, с которыми сталкиваются аналитические инженеры в повседневной работе.