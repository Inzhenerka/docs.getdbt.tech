---
id: like
title: SQL LIKE
description: Оператор LIKE помогает легко сопоставлять, находить и фильтровать чувствительные к регистру строковые значения заданного шаблона с помощью подстановочных знаков SQL.
slug: /sql-reference/like
---

<head>
    <title>Работа с оператором SQL LIKE</title>
</head>

Оператор LIKE помогает легко сопоставлять, находить и фильтровать строковые значения заданного шаблона с помощью подстановочных знаков SQL. Важно отметить, что шаблон, передаваемый в оператор LIKE, чувствителен к регистру, в отличие от его нечувствительного к регистру аналога, [ILIKE](/sql-reference/ilike).

## Как использовать оператор SQL LIKE

Оператор LIKE имеет простую синтаксис, и его можно использовать в [WHERE-условиях](/sql-reference/where) или операторе case:

`where <field_name> like '<pattern>'` или `case when <field_name> like '<pattern>'`

Некоторые примечания по синтаксису и функциональности этого оператора:
- `<pattern>` может использовать два подстановочных знака SQL (`%` и `_`); символ подчеркивания соответствует *одному символу*, а % соответствует нулю или более символам
    - Пример: '%J' = любая строка, заканчивающаяся на заглавную J
    - Пример: 'J%' = любая строка, начинающаяся с заглавной J
    - Пример: 'J%L' = любая строка, начинающаяся с заглавной J и заканчивающаяся на заглавную L
    - Пример: '_J%' = любая строка, в которой заглавная J находится на второй позиции
- Большинство случаев использования оператора LIKE, вероятно, будет связано с подстановочным знаком `%`
- Оператор LIKE чувствителен к регистру, что означает, что регистр в `<pattern>`, который вы хотите отфильтровать, должен совпадать с регистром в значениях вашего столбца; для столбцов с различным регистром используйте нечувствительный к регистру оператор ILIKE
- Оператор LIKE может быть использован в сочетании с оператором NOT, чтобы фильтровать строки, которые не соответствуют заданному шаблону

Давайте рассмотрим практический пример использования оператора LIKE.

### Пример SQL LIKE

```sql
select
    user_id,
    first_name
from {{ ref('customers') }}
where first_name like 'J%'
order by 1
```

Этот простой запрос, использующий таблицу `customers` [Jaffle Shop](https://github.com/dbt-labs/jaffle_shop), вернет всех клиентов, чье имя начинается с *заглавной* буквы J:

| **customer_id** | **first_name** |
|:---:|:---:|
| 1 | Julia |
| 4 | Jeremy |

Поскольку LIKE чувствителен к регистру, этот запрос не вернет результаты для клиентов с именами, начинающимися с маленькой буквы j. Если у вас есть смесь строк с заглавными и строчными буквами в ваших данных, рассмотрите возможность стандартизации регистра строк с помощью функций [UPPER](/sql-reference/upper) и [LOWER](/sql-reference/lower) или используйте более гибкий [оператор ILIKE](/sql-reference/ilike).

## Синтаксис LIKE в Snowflake, Databricks, BigQuery и Redshift

Большинство, если не все, современные хранилища данных поддерживают оператор LIKE, и синтаксис также одинаков во всех них. Некоторые хранилища данных, такие как Snowflake и Databricks, дополнительно поддерживают аналогичные или более гибкие операторы, такие как ILIKE, нечувствительная к регистру версия LIKE, или LIKE ANY, который позволяет передавать несколько вариантов шаблона для поиска.

Используйте таблицу ниже, чтобы узнать больше о документации для оператора LIKE в вашем хранилище данных.

| **Хранилище данных** | **Поддержка LIKE?** |
|:---:|:---:|
| Snowflake | ✅ |
| Databricks | ✅ |
| Amazon Redshift | ✅ |
| Google BigQuery | ✅ |

## Примеры использования оператора LIKE

Вы можете увидеть, как оператор LIKE используется в аналитическом инжиниринге для:
- Группировки значений столбца на основе общих требований с использованием операторов case и оператора LIKE (например, `case when page_path like '/product%' then 'product_page' else 'non_product_page'`)
- Фильтрации записей электронной почты сотрудников на основе похожего шаблона адреса электронной почты (например, `where email_address not like '%@dbtlabs.com'`)

Это не исчерпывающий список того, где ваша команда может использовать оператор LIKE в ваших моделях dbt, но он содержит некоторые распространенные сценарии, с которыми сталкиваются аналитические инженеры в повседневной работе.